{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"HHNK Toolbox","text":"<p>Plugin voor het bouwen en analyseren van 3Di modellen van Hoogheemraadschap Hollands Noorderkwartier (HHNK)</p> <p></p> <p>Documentatie: https://threedi.github.io/hhnk-threedi-plugin</p> <p>Broncode: https://github.com/threedi/hhnk-threedi-plugin</p>"},{"location":"#inhoudsopgave","title":"Inhoudsopgave","text":""},{"location":"#controleer-de-docs","title":"Controleer de docs!","text":"<ul> <li>Inleiding</li> <li>Installatie instructies</li> <li>Werkwijze BWN</li> <li>Achtergronden en Uitgangspunten</li> <li>Gebruik plugin</li> <li>Polder clusters</li> <li>Schematisation builder</li> </ul>"},{"location":"md_files/polder_clusters/","title":"Polder clusters","text":"ID Naam Code Polders V4 1 Heerhugowaard \"03150\",\"03350\" 2 Drieban \"6090\" 3 Purmer \"5801\",\"5802\",\"5803\" 4 Grootlimmerpolder \"04230\",\"04290\",\"04300\" 5 Koegras \"2060\",\"2040\",\"2010\",\"20601\" 6 Marken \"5160\" 7 HUB \"04310\",\"04320\",\"04541\",\"04542\" 8 Beemster \"5400\",\"5401\" 9 VNK \"6750\" 10 t Hoekje \"2020\",\"2040\" 11 Assendelft \"04751\",\"04752\",\"04380\" 12 Grootslag \"6700\",\"6770\",\"6780\",\"6080\" 13 Heiloo \"04170\",\"04650\",\"04160\",\"04200\" 14 Purmerend \"5741\",\"5742\",\"5721\",\"5722\",\"5841\",\"5842\",\"5320\" 15 Starnmeer \"04460\" 16 Eijerland 8040,\"8071\" 17 Mijzen \"04520\" 18 Oudorp \"03765\" 20 Wijdewormer \"5310\" 21 Noorderkaag \"03703\" 23 Edam Volendam Katwoude \"5360\",\"5781\",\"5761\",\"5762\",\"5782\" 24 VRNK-Oost \"2100\",\"2110\",\"03190\",\"03200\",\"03210\",\"6753\" 25 Wieringermeer \"7701\",\"7702\",\"7703\",\"7704\" 26 Binnenduinrand Egmond \"04100\",\"04150\",\"04902\",\"04220\",\"04902-00\" 27 Geestmerambacht \"03764\",\"03751\",\"03240\",\"03801\",\"03802\",\"03763\",\"03300\",\"03752\" 28 Waterland \"5170\",\"5470\",\"5821\",\"5480\",\"5230\",\"5240\",\"5560\",\"5220\",\"5180\",\"5410\",\"5250\",\"5440\",\"5500\",\"5150\",\"5510\",\"5260\",\"5520\",\"5822\",\"5200\",\"5490\",\"5210\",\"5530\",\"5540\",\"5550\",\"5570\",\"5460\",\"5600\",\"5610\",\"5620\",\"5580\",\"5390\",\"5171\" 29 Schermer \"04851\",\"04852\",\"04853\" 30 Zijpe-West \"2751\",\"2752\",\"2775\",\"2754\",\"2780\",\"2779\",\"2050\",\"2756\" 31 Oosterpolder Hoorn \"6110\",\"6100\" 32 Westzaan \"04400\",\"04390\" 33 Bergermeer \"04070\",\"04080\",\"04090\",\"04952\",\"04953\",\"04640\" 34 Wieringerwaard \"2080\" 35 Schagerkogge \"03010\",\"03020\",\"03030\",\"03040\",\"03050\",\"03060\",\"03701\",\"03702\" 36 Zeevang \"5701\",\"5702\",\"5703\",\"5704\",\"5705\" 37 Westerkogge \"6130\" 38 Alkmaardermeerpolders \"04250\",\"04280\",\"04260\",\"04420\",\"04270\", \"04240\" 39 Wieringen \"2851\",\"2852\",\"2854\",\"2855\",\"2856\" 40 Zijpe-Zuid \"2757\",\"2758\",\"2759\",\"2781\",\"2763\",\"2764\",\"2765\",\"2766\" 41 Egmondermeer \"04130\",\"04110\",\"04951\" 42 Oostzaan \"5330\",\"5340\" 43 HOUW (Wohoobur) \"6180\",\"6190\",\"6200\",\"6210\" 44 Zijpe-Noord \"2767\",\"2768\",\"2772\",\"2769\",\"2773\",\"2774\",\"2120\" 45 Callantsoog \"2030\",\"2040\" 46 Bergen-Noord \"04010\",\"04020\",\"04030\",\"04040\",\"04050\",\"04060\" 47 Berkmeer e.o. \"6230\",\"6240\",\"03130\",\"03140\" 48 Valkkoog en Schagerwaard \"03080\",\"03090\" 49 Waar Woud Spek eet \"03100\",\"03110\",\"03120\",\"03340\" 50 Wormer \"5270\",\"5280\",\"5290\",\"5300\" 51 Eilandspolder \"04801\",\"04802\",\"04803\",\"04804\",\"04470\" 53 VRNK-West \"03160\",\"03170\",\"03180\",\"03070\" 54 Anna Paulowna \"2803\",\"2804\",\"2805\" 55 NZK-polders \"04340\",\"04580\",\"04590\",\"04610\",\"04410\" 56 Beetskoog \"5010\",\"5020\",\"5030\",\"5040\",\"5050\",\"5080\" 57 Texel-Zuid \"8010\",\"8020\",\"8030\",\"8071\""},{"location":"md_files/user_test_manual/","title":"Handleiding voor gebruikerstesten","text":""},{"location":"md_files/user_test_manual/#voorbereiding","title":"Voorbereiding","text":"<p>Om (een branch van) de plugin en modules te testen, voer je de volgende de volgende handelingen uit:</p> <ol> <li>zorg voor lokale clones van <code>hhnk-research-tools</code>, <code>hhnk-threedi-tools</code> en <code>hhnk-threedi-plugin</code> en zorg dat je de deze in edit-mode hebt geinstalleerd.</li> <li>zorg dat je een kopie hebt van <code>c:\\Users\\{user}\\AppData\\Roaming\\3Di\\QGIS3\\profiles\\default\\python\\plugins\\hhnk_threedi_plugin\\api_keys.txt</code></li> <li>verwijder de folder <code>c:\\Users\\{user}\\AppData\\Roaming\\3Di\\QGIS3\\profiles\\default\\python\\plugins\\hhnk_threedi_plugin</code></li> <li>kopieer de folder <code>hhnk_threedi_plugin</code> naar <code>c:\\Users\\{user}\\AppData\\Roaming\\3Di\\QGIS3\\profiles\\default\\python\\plugins</code></li> <li>kopieer je <code>api_keys.txt</code> naar <code>c:\\Users\\{user}\\AppData\\Roaming\\3Di\\QGIS3\\profiles\\default\\python\\plugins\\hhnk_threedi_plugin\\api_keys.txt</code></li> <li>Herstart de Modeller Interface</li> </ol> <p>Je kunt nu door naar gebruikerstests</p>"},{"location":"md_files/user_test_manual/#installatie-van-modules-in-edit-mode","title":"Installatie van modules in edit-mode","text":"<p>Verifieer of de modules nu naar de repositories verwijzen in de Python-console van de Modellers Interface. Voer in de Python console:</p> <pre><code>import hhnk_threedi_tools\nhhnk_threedi_tools.__file__\n</code></pre> <p>Je krijgt nu het pad naar de <code>__init__.py</code> in de lokale clone van <code>hhnk_threedi_tools</code> terug krijgen:</p> <p></p> <p>Als je de correcte directory terug krijgt voor zowel <code>hhnk_threedi_tools</code> als <code>hhnk_research_tools</code>, dan kun je verder me het testen van de plugin</p> <p>Verwijst het pad niet naar de repository, maar naar de plugin-dir, dan komt dat omdat daar de plugin nog staat. Verwijder <code>hhnk-research-tools</code> en <code>hhnk-threedi-tools</code> uit <code>c:\\Users\\{user}\\AppData\\Roaming\\3Di\\QGIS3\\profiles\\default\\python\\plugins\\hhnk_threedi_plugin\\external-dependencies</code></p> <p>Bestaan de modules niet, of heb je deze net verwijderd uit de external-dependencies folder</p> <p>Je voegt <code>hhnk-research-tools</code> en <code>hhnk-threedi-tools</code> op de volgende wijze toe aan de QGIS omgeving van de Modellers Interface 1. Zorg voor een lokale clone van de repositories 2. Open de OSGeo4W shell en controlleer of je in de shell van 3Di Model Interface zit:</p> <pre><code>python\nimport sys\nsys.executable\n</code></pre> <p>In je pad zou er vergelijkbaar uit moeten zien <code>C:\\\\PROGRA~1\\\\3DIMOD~1.28\\\\bin\\\\python.exe</code>. <code>3DIMOD</code> geeft aan dat je in de QGIS install zit van de M.I. en niet in een andere. </p> <ol> <li>en navigeer naar de het pad in hhnk-research-tools waar setup.py staat. Voer in:</li> </ol> <pre><code>pip install -e .\n</code></pre> <ol> <li>Herhaal hetzelfde voor hhnk-threedi-tools</li> </ol> <p></p>"},{"location":"md_files/user_test_manual/#gebruikerstests","title":"gebruikerstests","text":""},{"location":"md_files/user_test_manual/#_1","title":"Gebruikers testen","text":""},{"location":"md_files/1_inleiding/inleiding/","title":"Bescherming Wateroverlast Noorderkwartier","text":"<p>De afgelopen jaren heeft het hoogheemraadschap ge\u00efnvesteerd in de inrichting van het watersysteem om wateroverlast te beperken en het systeem aan de normen (NBW) te laten voldoen. Dit betekent echter niet dat er geen wateroverlast meer kan optreden. Het hoogheemraadschap wil daarom  samen met de omgeving inzetten op een verdere ontwikkeling naar een klimaatadaptieve leefomgeving, waarbij de bestrijding van wateroverlast zoals omschreven in het Deltaprogramma gezamenlijk wordt ingevuld. Om inzicht te verkrijgen in de gevolgen van de extreme neerslag is een modelonderzoek uitgevoerd. Binnen HHNK staat dit bekend als het BWN2-project (Bescherming Wateroverlast Noorderkartier).</p> <p>Met 3Di-modellen zijn op een hoog detailniveau de waterstromen en inundaties berekend in de situatie nu en waar bekend is de effectiviteit van maatregelen getoetst. Deze handleiding beschrijft de werkwijze voor het maken en controleren van deze 3Di modellen, die binnen HHNK bekend staan als BWN2-modellen. Bij de werkwijze horen ook klimaatsommen en het verwerken van de modeluitkomsten tot inundatiekaarten en verwachte schade bij verschillende herhalingstijden. Deze stappen zijn grotendeels geautomatiseerd middels een door HHNK ontwikkelde plugin (voor QGIS/3Di Modeler Interface): HHNK 3Di plugin.</p> <p>Deze handleiding is opgebouwd uit de volgende onderdelen:</p> <ul> <li>Werkwijze BWN2</li> <li>Achtergronden en uitgangspunten</li> <li>Gebruik plugin</li> </ul>"},{"location":"md_files/1_inleiding/inleiding/#installatie-hhnk-3di-plugin","title":"Installatie HHNK 3Di plugin","text":"<p>Klik hier om het stappenplan van de installatie van de plugin te doorlopen.</p>"},{"location":"md_files/2_werkwijze_bwn/hhnk_nieuw_model/","title":"Nieuw basismodel maken binnen HHNK omgeving","text":"<p>In de omgeving van HHNK kan actuele data ge\u00ebxporteerd worden en kunnen de datachecker en modelbuilder gedraaid worden om een nieuw basis model te maken. Volg hiervoor de volgende stappen:</p> <p>LET OP: er kan maar \u00e9\u00e9n model tegelijkertijd opgebouwd worden omdat de datachecker en modelbuilder dezelfde locaties en database gebruiken. Zorg ook voor administratie van in- en output omdat deze wordt overschreven.</p>"},{"location":"md_files/2_werkwijze_bwn/hhnk_nieuw_model/#maak-een-export-van-de-huidige-damo-en-hdb-met-fme","title":"Maak een export van de huidige DAMO en HDB met FME","text":"<ol> <li>Ga hiervoor naar <code>srv300d1.corp.hhnk.nl</code> via remote desktop en open FME (v2021), </li> <li>Open nu het meest recente fme script voor de export: <code>\\\\corp.hhnk.nl\\data\\Hydrologen_data\\Data\\01.basisgegevens\\00.Export\\01_DAMOHDBexport_&lt;datum&gt;.fmw</code>, </li> <li>Druk linksboven op de play-knop en vul in het scherm in welke gebieden je wilt exporteren en eventueel een unieke naam voor de export. </li> <li>Kopieer het resultaat <code>\\\\corp.hhnk.nl\\data\\Hydrologen_data\\Data\\01.basisgegevens\\00.Export\\export_output\\DAMO_{naam_van_jouw_gebiedje}.gpkg</code> naar <code>\\\\corp.hhnk.nl\\data\\Hydrologen_data\\Data\\modelbuilder\\data\\input</code> en hernoem het naar <code>DAMO.gpkg</code>. </li> </ol>"},{"location":"md_files/2_werkwijze_bwn/hhnk_nieuw_model/#draai-de-datachecker","title":"Draai de datachecker","text":"<ol> <li>Ga naar <code>srvota155</code> via Remote Desktop on open Visual Studio Code via het start menu (dus niet via de batch-file die de Modeller Interface python omgeving activeert).</li> <li>Open in VS Code de map van de modelbuilder <code>\\\\corp.hhnk.nl\\data\\Hydrologen_data\\Data\\modelbuilder\\</code></li> <li>Open het bestand <code>datachecker_visual_studio.py</code> in de map <code>datachecker</code>.</li> <li>Selecteer rechtsonder in Visual Studio de python interpreter <code>threedipy</code> en draai het script (SHIFT+ENTER), selecteer eventueel ook bij het scherm dat zich opent rechtsboven de juiste interpreteer en probeer opnieuw.</li> <li>Zodra de Datachecker klaar is wordt de <code>datachecker_output</code> weggeschereven naar de uitvoermap <code>data/output</code>.</li> <li>Controleer eerst het resultaat voordat het model wordt gemaakt.</li> </ol>"},{"location":"md_files/2_werkwijze_bwn/hhnk_nieuw_model/#draai-de-modelbuilder","title":"Draai de modelbuilder","text":"<ol> <li>Zorg dat je zeker bent dat er in de tussentijd geen ander model via de datachecker is gedraaid.</li> <li>Herhaal stap 5 en 6.</li> <li>Open het bestand <code>modelbuilder_visual_studio.py</code> in de map <code>modelbuilder</code>.</li> <li>Pas in het python bestand de laatste regel aan naar het id en de naam van het gebied waarvoor je een model wilt maken. Deze polders worden uit de datachecker data geknipt en gebruikt om het model op te bouwen. De gegevens voor het model moeten dus in de datachecker zitten! De poldernaam wordt gebruikt voor oa naamgeving van bestanden.</li> <li>Zodra de Modelbuilder klaar is wordt het model en feedback weggeschreven naar de uitvoermap <code>data/output</code>.</li> <li>Kopieer voor gebruik in de plugin de bestanden naar de projectmap. De output van de modelbuilder staat al in de juiste mappenstructuur. Alleen de datachecker_output moet nog naar 01_source_data gekopieerd worden.</li> </ol>"},{"location":"md_files/2_werkwijze_bwn/hhnk_nieuw_model/#debugging","title":"Debugging","text":"<p>Mocht onverhoopt iets niet werken staan in de mappenstructuur van de modelbuilder verschillende logbestanden. Eventueel kan in de genoemde python scripts de optie <code>DEBUG=True</code> worden ingesteld om nog meer logging te ontvangen.</p> <p>De tussenstappen in de datachecker en modelbuilder zijn opgeslagen in een postgis database op de server. Om de tussenstappen te bekijken kun je verbinding maken met deze database via qgis (het olifant symbool van postgrs-database), met de volgende instellingen:</p> <ul> <li>Name: DCMB (vrije keuze)</li> <li>Service: (leeg)</li> <li>Host: localhost</li> <li>Port: 5433</li> <li>Database: datachecker</li> <li>SSL mode: allow</li> </ul> <p>Onder authentication kies je <code>basic</code>. De username en pasword zijn <code>postgres</code>.</p>"},{"location":"md_files/2_werkwijze_bwn/hhnk_nieuw_model/#overzicht-gebieden","title":"Overzicht gebieden","text":"<pre><code>ID  Naam                        Code Polders V4\n1   Heerhugowaard               \"03150\",\"03350\"\n2   Drieban                     \"6090\"\n3   Purmer                      \"5801\",\"5802\",\"5803\"\n4   Grootlimmerpolder           \"04230\",\"04290\",\"04300\"\n5   Koegras                     \"2060\",\"2040\",\"2010\",\"20601\"\n6   Marken                      \"5160\"\n7   HUB                         \"04310\",\"04320\",\"04541\",\"04542\"\n8   Beemster                    \"5400\",\"5401\"\n9   VNK                         \"6750\"\n10  t Hoekje                    \"2020\",\"2040\"\n11  Assendelft                  \"04751\",\"04752\",\"04380\"\n12  Grootslag                   \"6700\",\"6770\",\"6780\",\"6080\"\n13  Heiloo                      \"04170\",\"04650\",\"04160\",\"04200\"\n14  Purmerend                   \"5741\",\"5742\",\"5721\",\"5722\",\"5841\",\"5842\",\"5320\"\n15  Starnmeer                   \"04460\"\n16  Eijerland                   8040,\"8071\"\n17  Mijzen                      \"04520\"\n18  Oudorp                      \"03765\"\n20  Wijdewormer                 \"5310\"\n21  Noorderkaag                 \"03703\"\n23  Edam Volendam Katwoude      \"5360\",\"5781\",\"5761\",\"5762\",\"5782\"\n24  VRNK-Oost                   \"2100\",\"2110\",\"03190\",\"03200\",\"03210\",\"6753\"\n25  Wieringermeer               \"7701\",\"7702\",\"7703\",\"7704\"\n26  Binnenduinrand Egmond       \"04100\",\"04150\",\"04902\",\"04220\",\"04902-00\"\n27  Geestmerambacht             \"03764\",\"03751\",\"03240\",\"03801\",\"03802\",\"03763\",\"03300\",\"03752\"\n28  Waterland                       \"5170\",\"5470\",\"5821\",\"5480\",\"5230\",\"5240\",\"5560\",\"5220\",\"5180\",\"5410\",\"5250\",\"5440\",\"5500\",\"5150\",\"5510\",\"5260\",\"5520\",\"5822\",\"5200\",\"5490\",\"5210\",\"5530\",\"5540\",\"5550\",\"5570\",\"5460\",\"5600\",\"5610\",\"5620\",\"5580\",\"5390\",\"5171\"\n29  Schermer                    \"04851\",\"04852\",\"04853\"\n30  Zijpe-West                  \"2751\",\"2752\",\"2775\",\"2754\",\"2780\",\"2779\",\"2050\",\"2756\"\n31  Oosterpolder Hoorn          \"6110\",\"6100\"\n32  Westzaan                    \"04400\",\"04390\"\n33  Bergermeer                  \"04070\",\"04080\",\"04090\",\"04952\",\"04953\",\"04640\"\n34  Wieringerwaard              \"2080\"\n35  Schagerkogge                \"03010\",\"03020\",\"03030\",\"03040\",\"03050\",\"03060\",\"03701\",\"03702\"\n36  Zeevang                     \"5701\",\"5702\",\"5703\",\"5704\",\"5705\"\n37  Westerkogge                 \"6130\"\n38  Alkmaardermeerpolders       \"04250\",\"04280\",\"04260\",\"04420\",\"04270\", \"04240\"\n39  Wieringen                   \"2851\",\"2852\",\"2854\",\"2855\",\"2856\"\n40  Zijpe-Zuid                  \"2757\",\"2758\",\"2759\",\"2781\",\"2763\",\"2764\",\"2765\",\"2766\"\n41  Egmondermeer                \"04130\",\"04110\",\"04951\"\n42  Oostzaan                    \"5330\",\"5340\"\n43  HOUW (Wohoobur)             \"6180\",\"6190\",\"6200\",\"6210\"\n44  Zijpe-Noord                 \"2767\",\"2768\",\"2772\",\"2769\",\"2773\",\"2774\",\"2120\"\n45  Callantsoog                 \"2030\",\"2040\"\n46  Bergen-Noord                \"04010\",\"04020\",\"04030\",\"04040\",\"04050\",\"04060\"\n47  Berkmeer e.o.               \"6230\",\"6240\",\"03130\",\"03140\"\n48  Valkkoog en Schagerwaard    \"03080\",\"03090\"\n49  Waar Woud Spek eet          \"03100\",\"03110\",\"03120\",\"03340\"\n50  Wormer                      \"5270\",\"5280\",\"5290\",\"5300\"\n51  Eilandspolder               \"04801\",\"04802\",\"04803\",\"04804\",\"04470\"\n53  VRNK-West                   \"03160\",\"03170\",\"03180\",\"03070\"\n54  Anna Paulowna               \"2803\",\"2804\",\"2805\"\n55  NZK-polders                 \"04340\",\"04580\",\"04590\",\"04610\",\"04410\"\n56  Beetskoog                   \"5010\",\"5020\",\"5030\",\"5040\",\"5050\",\"5080\"\n57  Texel-Zuid                  \"8010\",\"8020\",\"8030\",\"8071\"\n</code></pre>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/","title":"Werkwijze BWN2","text":"<p>Voor het programma BWN2 zijn modellen en een werkwijze opgesteld. Het doel hiervan is om alle polders binnen HHNK op eenduidige manier te toetsen op mogelijke wateroverlast. Deze toetsing is uitgevoerd tussen 2015 en 2020, maar kan periodiek worden herhaald of wanneer (ruimtelijke) ontwikkelingen plaatsvinden. Door deze werkwijze te volgen zijn eveneens eenduidige vergelijkingen te maken tussen referentie en maatregel of ontwikkel scenarios. </p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#hydraulische-toets-en-klimaatsommen","title":"Hydraulische toets en klimaatsommen","text":"<p>BWN2 toetst het watersysteem op twee manieren, ten eerste middels de hydraulische toets (HT) en via klimaatsommen.</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#hydraulische-toets","title":"Hydraulische toets","text":"<p>In de HT wordt getoetst of het watersysteem voldoende kan afvoeren onder normale omstandigheden. Dat wil zeggen dat het watersysteem maximaal af moet kunnen voeren zonder dat er knelpunten of wateroverlast ontstaat. De maximale afvoer is voor polders vastgelegd in de afvoernorm (meestal 14,4 mm/dag of 10 m3/min/100ha, in grote polders soms 9 of 8 m3/min/100ha). In deze afvoersituatie mag de opstuwing in peilgebieden (~30cm) of verhang in watergangen (~2-4 cm/km) niet boven bepaalde grenswaarden uitkomen. Ook duikers mogen niet te veel opstuwing geven (~1cm). De genoemde waarden zijn afhankelijk van gebiedseigenschappen. </p> <p>De resultaten van opstuwing en verhang worden via kaarten gedeeld met de watersysteem-adviseurs. Ze worden gebruikt voor het identificeren van maatregelen en zijn input voor de leggertool. Met de leggertool worden minimale profielen van watergangen voor afvoer vastgesteld.</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#klimaatsommen","title":"Klimaatsommen","text":"<p>Met klimaatsommen wordt een set van 18 stochasten bedoeld waarmee het watersysteem op extreme neerslag wordt getoetst. De modellen zijn zo ingesteld dat neerslag via het maaiveld zijn weg moet zoeken naar het watersysteem. Infiltratie is mogelijk en er zijn drie bodemstochasten met verschillende bodemberging (GLG/GGG/GHG). Uiteraard kan water vanuit het watersysteem op het maaiveld stromen. De resultaten van de klimaatsommen worden opgewerkt tot drie inundatiekaarten bij T10/100/1000 en een kaart met de netto contante waarde van de schade.</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#wateroverlast-versus-plasvorming","title":"Wateroverlast versus plasvorming","text":"<p>In de resultaten wordt onderscheid gemaakt tussen wateroverlast en plasvorming. Wateroverlast treedt daar op waar inundatie vanuit de watergang plaatsvind of wanneer afvoer vanaf het maaiveld niet mogelijk is door verhoogde waterstanden in de watergangen. Plasvorming zijn die plaatsen waar plassen op het maaiveld ontstaan als gevolg van neerslag die niet af kan stromen.</p> <p>Dit onderscheid helpt modelleurs en beleidsmakers bij het bepalen van de oorzaak van wateroverlast en daarmee bij het vinden van effectieve maatregelen.</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#bwn2-modellen","title":"BWN2-Modellen","text":"<p>Voor de toetsing gebruikt HHNK 3Di modellen. 3Di is hydrodynamische modelsoftware waarmee zowel 1D (watergangen, riolering) als 2D (maaiveld) of 1D-2D gerekend kan worden. HHNK heeft de modellen specifiek ontworpen voor de hierboven beschreven doelen. De modellen bestaan uit: * alle watergangen en kunstwerken in een 1D watersysteem, * een maaiveldmodel gebaseerd op o.a. het AHN in het 2D rekendomein, * ruimtelijk variabele bodemwrijving in het 2D rekendomein,  * een vereenvoudigde bodem middels ruimtelijk variabele infiltratiesnelheid en maximale bodemberging, en * koppeling tussen het 1D watersysteem en het 2D maaiveld.</p> <p>De modellen zijn opgedeeld in ca. 55 clusters die samen alle ca. 225 polders van HHNK bevatten. De ruimtelijke resolutie van de rasters en daarmee de resulterende inundatiekaarten is 50x50cm.  </p> <p>Riolering in stedelijk gebied is sterk vereenvoudigd meegenomen in de infiltratie en bodembergingsrasters.</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#modelvarianten","title":"Modelvarianten","text":"<p>Voor het testen van de schematisatie, de hydraulische toets en de klimaatsommen gebruikt HHNK vijf verschillende varianten van de modellen: 1. Het 0d1d test model.      Alleen het 1D watersysteem wordt getoetst, maaiveld en bodemberging staan dus uit. Middels een 0D inloop-component komt alle neerslag (~14,4 mm/dag) in het watersysteem. De resultaten van de 0d1d_test worden gebruikt voor de hydraulische toets (mits de modelleur tevreden is met het functioneren van het model).  2. Het 1d2d test model.     Dit model bevat het 1D watersysteem en het 2D maaiveld, maar geen infiltratie. Het dient  voor de 1d2d test. 3. Drie 1d2d GXG modellen.     Deze modellen bevatten alle hierboven genoemde componenten, met voor de bodembergings drie verschillende initieel beschikbare bodemberging rasters, voor GLG, GGG en GHG. Ze worden gebruikt voor de klimaatsommen.</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#referentie-en-maatregelmodellen","title":"Referentie- en maatregelmodellen","text":"<p>In het BWN2-project is sprake van referentiemodellen en maatregelmodellen. Zoals de naam doet vermoeden gaat het in de referentiemodellen om de referentie situatie; het watersysteem zoals dit er op dat moment in de praktijk bij ligt. Daarnaast zijn voor sommige polders modellen aangepast om maatregelen te testen of ruimtelijke ontwikkelingen te toetsen. Het is belangrijk om onderscheid te blijven maken tussen deze typen modellen. De referentiemodellen zijn de onderligger voor de toetsing en vertrekpunt voor nieuwe projecten of vragen. Deze modellen zijn met revisienummer en modelleur opgeslagen in het HHNK-3Di-modellenregister.</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#modellenregister","title":"Modellenregister","text":"<p>De modelleurs van HHNK hebben tijdens het BWN-project een modellenregister bijgehouden met daarin een verwijzing naar de modellen die zijn gebruikt voor referentie of maatregelmodellen. Deze is bij HHNK beschikbaar op \\corp.hhnk.nl\\data\\Hydrologen_data\\Data\\01.basisgegevens\\ModellenregisterBWN.xlsx</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#circulair-modelleren","title":"Circulair modelleren","text":"<p>HHNK past sinds 2015 circulair modelleren toe. Bij circulair modelleren worden verbeteringen in gegevens bij de bron aangepast. Hierdoor komen de verbeterde gegevens voor toekomstige modellen en andere toepassingen beschikbaar, in plaats van dat ze verloren gaan in een modelversie. Modellen worden direct uit de brongegevens opgebouwd. Voor HHNK is dit de DAMO-database. </p> <p>Voor het controleren van de brongegevens en het automatisch opbouwen van modellen heeft HHNK samen met Nelen &amp; Schuurmans een datachecker en modelbuilder ontwikkeld. Deze systemen gebruiken een export vanuit DAMO om op een groot aantal punten de gegevens te controleren. De controles richten zich erop dat vanuit de gegevens een valide 3Di model opgebouwd kan worden. Dit model noemen we het basismodel en kan alleen binnen de omgeving van HHNK worden gemaakt via dit stappenplan. De uitgangspunten van de modelbouw zijn hier te vinden.</p>"},{"location":"md_files/2_werkwijze_bwn/werkwijze_bwn/#hhnk-3di-plugin","title":"HHNK 3Di plugin","text":"<p>Na de automatische modelbouw wordt het model verder gecontroleerd door meerdere testberekeningen en checks uit te voeren. Deze zijn nader beschreven in de beschrijving van de HHNK 3Di plugin.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/achtergronden_en_uitgangspunten/","title":"Uitgangspunten 3Di BWN2 modellen","text":"<p>De uitgangspunten die worden gebruikt bij het maken van de 3Di modellen zijn hieronder toegelicht. De volgorde waarin de uitgangspunten worden uitgelegd is als volgt:</p> <ul> <li>Functioneren watersysteem</li> <li>Watergangen en peilgebieden: initieel peil, obstacles, watergangen, profiel, compensatie te weinig oppervlaktewaterberging, en bank level.</li> <li>Kunstwerken: logisch bereik, aquaducten, bruggen, duikers, gemalen en stuwen.</li> <li>Onderliggende rasterdata: maailveldhoogte DEM, bodemwrijving/weerstand, infiltratiecapaciteit, bodemberging.</li> </ul> <p>Meer informatie over modelleren met 3Di kan hier geraadpleegd worden.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/a_watersysteem/1_watersysteem/","title":"Functioneren watersysteem","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/a_watersysteem/1_watersysteem/#functioneren-watersysteem","title":"Functioneren watersysteem","text":"<p>E\u00e9n van de belangrijkste controles voordat een model wordt gemaakt is of het watersysteem valide is. Dat wil zeggen of alle watergangen kunnen afvoeren naar een afvoergemaal of ander kunstwerk. Dit gaat in een aantal stappen, beginnend bij de modelgrenzen.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/a_watersysteem/1_watersysteem/#modelgrens","title":"Modelgrens","text":"<p>De modelleur kiest in de modelbuilder voor een regio waarvoor hij een model wil maken. Deze regio's zijn opgeslagen onder Polders_V4 in de HDB. In de datachecker zijn alle peilgebieden binnen deze gebieden samengevoegd tot poldercluster. Eigenlijk kies je daarom in de modelbuilder voor een poldercluster. De geometrie van de peilgebieden wordt gebruikt omdat deze wordt bijgehouden, die van polder niet. Zo liggen kunstwerken altijd op de grens van het model. </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/a_watersysteem/1_watersysteem/#afvoerkunstwerken","title":"Afvoerkunstwerken","text":"<p>Alle kunstwerken op de grens van het model zijn vervolgens kandidaten om een afvoer kunstwerk te worden. Dit zijn gemalen of stuwen met de functie <code>afvoer</code> of <code>aan- of afvoer</code> en duikers die in de HDB zijn aangemerkt als <code>op overstort</code>.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/a_watersysteem/1_watersysteem/#peilgrens-zonder-kunstwerk","title":"Peilgrens zonder kunstwerk","text":"<p>Binnen de polders wordt gecontroleerd of op elke watergang die een peilgrens kruist een kunstwerk ligt die het peil kan regelen. Locaties waar dit niet zo is worden aangemerkt als fout en <code>kruising zonder kunstwerk</code> genoemd.</p> <p>Het kan zo zijn dat het kunstwerk op de kruising wordt afgekeurd, omdat het niet in staat is af te voeren. Als dit het geval is kan er alsnog een kruising zonder kunstwerk worden aangemaakt:</p> <ol> <li>Duiker op peilgrens is afsluitbare inlaat (type 1 of 2) en dus naar verwachting niet gebruikt voor afvoer</li> <li>Stuw of gemaal zonder functie <code>afvoer</code> of <code>aan- of afvoer</code></li> <li>Vispassages worden niet meegenomen als afvoerkunstwerk.</li> </ol>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/a_watersysteem/1_watersysteem/#losliggende-watergangen","title":"Losliggende watergangen","text":"<p>Alle watergangen die helemaal los liggen (soms greppels, maar soms ook tekenfouten) worden verzameld in de laag <code>channel_loose</code> in de datachecker. </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/a_watersysteem/1_watersysteem/#verbondenheid-watersysteem","title":"Verbondenheid watersysteem","text":"<p>De laatste controle is of alle watergangen binnen de modelgrenzen verbonden zijn met een afvoerkunstwerk (op de modelgrens). Watergangen binnen peilgebieden of peilafwijkingsgebieden die niet logischerwijs kunnen afvoeren worden aangemerkt als fout. Dat is het geval in de volgende gevallen:</p> <ol> <li>Onderbemaling zonder gemaal,</li> <li>Opmaling zonder stuw of duiker,</li> <li>Laagste peilgebied van omliggende zonder gemaal, of</li> <li>Hoogste peilgebied van omliggende zonder stuw of duiker.</li> </ol> <p>Vervolgens worden watergangen met een kruising zonder kunstwerk ook weggelaten. Alle overgebleven watergangen worden samengevoegd mits ze verbonden zijn. De delen die nu niet kruisen met een afvoerkunstwerk, worden verzameld in de laag <code>channel_nowayout</code>. </p> <p>De watergangen in beide lagen worden aangemerkt als fout en niet meegenomen in de modelbouw. Het spreekt voor zich dat deze lagen belangrijk zijn voor de controle van de inputgegevens.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/b_logisch_bereik/1_logisch_bereik/","title":"Logisch bereik","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/b_logisch_bereik/1_logisch_bereik/#logisch-bereik-en-aannames","title":"Logisch bereik en aannames","text":"<p>Om de afmetingen van kunstwerken, watergangen en profielen in het model te implementeren wordt er gebruik gemaakt van aangeleverde gegevens. Deze aangeleverde gegevens worden gecontroleerd op logische waarden om te voorkomen dat typefouten in de modellen worden verwerkt. De waardes van verschillende attributen moeten telkens voldoen aan een logisch bereik zoals aangegeven in onderstaande tabel. Waardes buiten het logische bereik end ontbrekende worden aangemerkt als onbetrouwbaar en vervangen door een aanname.</p> <p>De meeste aannames worden al in de datachecker gemaakt en via de kolom opmerking geregistreerd. Onderstaande tabel geeft het overzicht van de bereiken en aannames per object.</p> <p></p> <p>Nb. de tabel is in Excel beschikbaar in de repo: <code>docs\\images\\Tabel logisch bereik en aannames.xlsx</code></p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/1_initieel_peil/","title":"Initieel peil","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/1_initieel_peil/#initieel-peil","title":"Initieel peil","text":"<p>Het initieel peil in de modellen wordt uitgelezen uit de attributen tabel van de peilgebieden in de DAMO export, kolom peil_wsa. Het initieel peil wordt bepaald door gebruik te maken van onderstaande volgorde. </p> <ol> <li>Peil in HDB Hydrodeelgebied      a. Winterpeil      b. Zomerpeil</li> <li>Vast peil uit DAMO.W_Streefpeil, namelijk:      a. 901  Vast peilbeheer; streefpeil jaarrond      b. 904  Dynamisch peilbeheer; streefpeil jaarrond      c. 915  Vrij afwaterend op buitenwater; ondergrenspeil jaarrond      d. 916  Vrij afwaterend op boezemwater; ondergrenspeil jaarrond      e. 918  Onderbemaling; ondergrenspeil      f. 919  Opmaling; bovengrenspeil      g. 920  Opstuwing; bovengrenspeil      h. 921  Op- en onderbemaling; ondergrenspeil      i. 922  Op- en onderbemaling; bovengrenspeil </li> <li>Winterpeil, namelijk:      a. 902  Seizoensgebonden peilbeheer; streefpeil winter      b. 907  Dynamisch seizoensgebonden peilbeheer; streefpeil winter </li> <li>Zomerpeil (maar vaak is dan ook een winterpeil aanwezig en zal dus winterpeil worden gekozen), namelijk:      a. 903  Seizoensgebonden peilbeheer; streefpeil zomer      b. 908  Dynamisch seizoensgebonden peilbeheer; streefpeil zomer      c. 917  Wateraanvoer Wieringermeer; streefpeil zomer</li> <li>Flexibel peil      a. 914  Flexibel peilbeheer; bovengrenspeil jaarrond</li> <li>Dataminingpeil obv 20-percentiel per peilgebied. De waterhoogtes hiervoor worden opnieuw afgeleid van de AHN3 en actueel ingetekende hydro-objecten uit de DAMO-database.</li> </ol> <p>Als de peil_wsa kolom niet is ingevuld, wordt het streefpeil volgens bovenstaande lijst bepaald of wordt er gebruik gemaakt van de aanname NAP -10m. </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/2_levees/","title":"Obstacles","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/2_levees/#obstacles-voorheen-levee","title":"Obstacles (voorheen Levee)","text":"<p>In 3Di worden levees sinds zomer 2023 obstacles genoemd.</p> <p>Obstacles zijn 2D-lijnelementen met een geijkte hoogte. Een obstacle geeft een drempelwaarde mee aan 2D-verbindingen die mogelijk hoger is dan de DEM. In de BWN2-modellen zijn deze gebruikt om peilgrenzen de minimale hoogte van het streefpeil + 30 cm te geven. Op deze manier kan met grotere rekencellen worden gerekend. </p> <p>De modelleur kan extra obstacles toevoegen voor hoog gelegen lijnelementen zoals wegen en spoorwegen. Dit kan in de HDB in de laag <code>keringen_hoge_lijnelementen</code> en deze worden vervolgens toegevoegd aan het model.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/3_watergangen/","title":"Watergangen","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/3_watergangen/#watergangen-en-kunstwerken","title":"Watergangen en kunstwerken","text":"<p>De HydroObjecten uit DAMO vormen de basis voor de watergangen in het model. De hydroobjecten worden allen samengevoegd en vervolgens opgeknipt op alle kruispunten. Hierdoor zijn de watergangen uit het model niet zonder bewerking terug te herleiden naar een DAMO hydroobject. Alle watergangen liggende binnen het modelgebied en zonder fouten verbonden met het afvoergemaal of stuw komen in het model.</p> <p>Watergangen lopen in DAMO door onder kunstwerken en hebben een (deels) overlappende geometrie met duikers. Duikers worden daarom vervolgens uit de watergangen geknipt.  Bij andere kunstwerken wordt de puntgeometrie omgezet in lijnen en met een lengte van 5m uit de watergangen geknipt, omdat in dit in 3Di verbindingen tussen twee punten moeten zijn. Als hierdoor hele korte segmenten ontstaan worden kunstwerken iets opgeschoven. Alle watergangen die overblijven komen als v2_channel in het model en krijgen aan het begin een eindpunt een connection node en ten minste \u00e9\u00e9n dwarsprofiel.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/4_profiel/","title":"Profiel","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/4_profiel/#dwarsprofielen","title":"Dwarsprofielen","text":"<p>Voor de dwarsprofielen in het model worden verschillende bronnen gebruikt. Voor de meeste primaire waterlopen zijn om de 250 meter gemeten dwarsprofielen beschikbaar. Deze worden zoveel mogelijk gebruikt. Voor het bepalen van het model-profiel worden alleen dieptemetingen aan de bovenkant van de baggerlaag (Z2) gebruikt in plaats van dieptemetingen bij de harde bodem (Z1). Ook worden er alleen 'natte' dieptemetingen gebruikt om dubbele berging en stroming op het droge talud te voorkomen. </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/4_profiel/#gegevens","title":"Gegevens","text":"<p>Als geen gemeten dwarsprofiel beschikbaar is worden BGT, leggerprofielen of aannames gebruikt. Onderstaande opsomming geeft aan welke DAMO kolommen zijn gebruikt en vormt gelijk de prioritering naar gelang beschikbaarheid van de gegevens.  </p> <ol> <li> <p>Gemeten profielen uit DAMO*</p> <p>a. GW_PBP </p> <p>b. GW_PRO </p> <p>c. GW_PRW </p> <p>d. IWS_GEO_BESCHR_PROFIELPUNTEN </p> </li> <li> <p>Zelf afgeleide profielen o.a. uit BGT. De breedte op basis van dwarslijnen op de Hydroobjecten binnen de BGT vlakken waterdeel. De diepte van onderstaande tabel. </p> </li> <li> <p>Leggerprofielen uit DAMO.**</p> <p>a. In kolommen HydroObject: </p> <pre><code>i. WS_BODEMBREEDTE\n\nii. WS_BODEMHOOGTE\n\niii. WS_TALUD_LINKS\n\niv. WS_TALUD_RECHTS\n</code></pre> </li> </ol> <p>*Tijdens de DAMO-export worden profielen gefilterd zodat oude of foutieve profielen niet mee komen.  * Datachecker crossprofile hoogte mag niet 0,0 zijn  * Datachecker crossprofile diepte mag niet &lt;0,3m  * Datachecker crossprofile breedte mag niet &lt;2m  * Datachecker crossprofile aantal punten mag niet &lt;5 * Continu\u00efteit x-richting profielpunten * Profiel moet wel koppelbaar zijn met watergang (moet hydroobject_id hebben)  * Profiel moet in gebied liggen met streefpeil in DAMO  * Leeftijd 2009 en jonger.</p> <p>In de Datachecker worden de profielen nogmaals gecontroleerd.</p> <p>**De leggerprofielen worden omgerekend volgens:</p> <pre><code>Bodembreedte = breedte_op_streefpeil - \n            ((streefpeil tov NAP - bodemhoogte tov NAP) *(talud_links+talud_rechts))\n</code></pre>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/4_profiel/#logisch-bereik-diepte","title":"Logisch bereik diepte","text":"<p>Er worden enkele controles toegepast om te zorgen dat de waarden voor waterdiepte en breedte binnen een logisch bereik vallen. Voor de waterdiepte geldt dat deze binnen dit bereik moet vallen:</p> <pre><code>&gt; 0,2 meter of &lt; 20 meter\n</code></pre> <p>Uitzondering hierop geldt voor profielen in hellend gebied.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/4_profiel/#aannames","title":"Aannames","text":"<p>Als bovenstaande geen of geen valide waarde geeft zijn onderstaande aannames toegepast. De bodemhoogte van een watergang in een watergang wordt bepaald door onderstaande volgorde: 1. De legger ws_bodemhoogte van hydroobject (in geval schatting foute waarde geeft maar deze wel beschikbaar is). 2. Aanname primaire watergangen: streefpeil - 1m indien geen bodemhoogte bekend OF . 3. Zelfde als 2 maar voor niet primaire watergangen: streefpeil - 0.5 meter. In hellend gebied wordt hij 10.5 meter onder streefpeil gezet bij ontbrekende waarde.  4. -10 meter indien nog steeds niets is ingevuld.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/4_profiel/#implementatie-in-model","title":"Implementatie in model","text":"<p>De plaatsing van profielen in het model is afhankelijk van de opbouw van het netwerk van watergangen en kunstwerken. Door deze verwevenheid is niet altijd duidelijk waar een gemodelleerd profiel op gebaseerd is. </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/4_profiel/#plaatsing-profielen","title":"Plaatsing profielen","text":"<p>Ten eerste kunnen de gemeten dwarsprofielen niet zonder meer op ingemeten locatie in het model worden geplaatst. Door kunstwerken en aftakkingen zijn watergangen in het model veel verder opgeknipt. Om te voorkomen dat in het model telkens afwisselend een gemeten of geschat/leggerprofiel wordt toegepast, terwijl in de praktijk de primaire watergang door loopt, is een speciaal bestand gebruikt dat primaire watergangen over langere afstand verbind. Dit bestand heet in de datacheker <code>channel-linemerge</code>. Hiermee worden de gemeten profielen over een aantal kruispunten en kunstwerken heen getild. Er wordt vanuit gegaan dat het profiel van (bijvoorbeeld) de primaire watergang niet wijzigt over het kruispunt met een secundaire watergang. Profielen worden tot maximaal 250 meter buiten de waterloop ge\u00ebxtrapoleerd. In oudere modellen kan het voorkomen dat een profiel door deze methodiek over een peilgrens heen wordt getrokken. Dit is inmiddels niet meer mogelijk.</p> <p>Watergangen waar geen gemeten profiel geplaatst kan worden krijgen op 10% en 90% van de lengte een geschat of legger profiel. Watergangen korter dan 10 m krijgen op 50% \u00e9\u00e9n profiel.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/4_profiel/#aanpassingen-aan-bodemhoogte","title":"Aanpassingen aan bodemhoogte","text":"<p>In 3Di moeten de bodemhoogtes van kunstwerken hoger liggen van die van watergangen. Duikers morgen dus niet deels in de baggerlaag liggen. Wanneer dit wel wordt ingesteld in het model, kan de berekening crashen als de waterstand in de duiker zakt tot onder de bodemhoogte van de watergang. Om deze reden zijn profielen in het model in zijn geheel verlaagd naar 1 cm onder de bodemhoogte van het kunstwerk. Dit kan zijn de Binnen Onderkant Buis (BOB) van een duiker of sifon, maar ook een minimale kruinhoogte van een stuw of het afslagpeil van een gemaal (deze laatste is onwaarschijnlijk omdat beide zijn gebaseerd op streefpeil).</p> <p>In niet peilgestuurd gebied kunnen droge beddingen voorkomen. Omdat de datachekcer en modelbuilder veel controles en aannames baseert op het streefpeil, bestaat de kans op fouten in de schematisaties in deze gebieden. De modelleur moet hier goed op letten.</p> <p>Bij het maken van nieuwe modellen geeft de modelbuilder middels de laag model_feedback.shp aan waar de bodemhoogte is aangepast.</p> <p>Helaas kan het voorkomen dat gemeten dwarsprofielen worden verlaagd aan de hand van aannames van een BOB. Het verbeteren hiervan is complex en nog niet opgepakt. Opties zijn: * BOB en dwarsprofiel van kunstwerken aanpassen als gemeten profiel (baggerlaag) hoger ligt * Profielen niet in geheel verlagen maar alleen een smal segment in het midden.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/5_compensatie_te_weinig_oppervlaktewaterberging/","title":"Compensatie te weinig oppervlaktewaterberging","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/5_compensatie_te_weinig_oppervlaktewaterberging/#compensatie-te-weinig-oppervlaktewaterberging","title":"Compensatie te weinig oppervlaktewaterberging","text":"<p>De BWN-modellen bevatten zowel 2D maaiveld als 1D watergangen. Om te voorkomen dat op watergangen die in 1D gemodelleerd zijn ook op het 2D berging en stroming kan plaatsvinden, wordt in het 2D maaiveld op NAP +10 m gezet. Het kan echter toch nog voorkomen dat de berging in 2D verschilt van het 1D, bijvoorbeeld door aannames in profielen. Op basis van onderstaande controle kan dit worden gecorrigeerd. De controle wordt uitgevoerd op basis van het basismodel (uit de modelbuilder), de modelleur dient bij wijzigingen in het model zelf rekening te houden met de verschillen tussen 1D en 2D.</p> <p>De berging in 1D (connection nodes + profielen watergangen) wordt per peilgebied vergeleken met het oppervlak van de BGT-waterdelen (vlakken). Een tekort aan berging wordt gelijk verdeeld toegekend als bergingsoppervlak aan secundaire connection nodes.</p> <p>De berging kan berekend worden met de volgende formule.</p> <p>Berging in profielen =  profielbreedte_1 x lengte_1 + gemiddelde profielbreedte 1&amp;2 x lengte_2  + profielbreedte_2 x lengte_3  </p> <p></p> <p>Bij het berekenen van de 1D-berging in het profiel wordt minder dan 2 m2 per connection node niet toegekend (en vervalt dus), om instabiliteit te voorkomen. Het is niet bekend hoe groot dit risico op instabiliteit is.  Daarnaast wordt een bergingsoverschot niet gecorrigeerd. Er kan geen negatieve berging worden toegekend. In dit geval moeten profielen worden gecorrigeerd. </p> <p>In de plugin geeft een van de sqlite tests de overschatting van wateroppervlakte op streefpeil weer per peilgebied. Na het uitvoeren van de checks en inladen van de lagen kan deze kaart via map theme <code>sqlite test: Verschil oppervlaktewater</code> bekeken worden.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/6_bank_level/","title":"Bank level","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/c_watergangen_en_peilgebieden/6_bank_level/#bank-level","title":"Bank level","text":"<p>De bank level van een watergang bepaalt vanaf welke waterstand het 1d netwerk en het 2d netwerk kunnen uitwisselen. Alle watergangen krijgen bank levels mee op basis van de volgende tabel: </p> <p></p> <p>Deze benadering is conservatief om lekken te voorkomen. Het risico bestaat hierdoor dat water van maaiveld niet naar de watergang kan stromen. In de bank level test worden 1d2d verbindingen nog een beoordeeld en waar mogelijk lager ingesteld.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/1_aquaducten/","title":"Aquaducten","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/1_aquaducten/#aquaducten","title":"Aquaducten","text":"<p>Een aquaduct wordt gemodelleerd als een vierkante sifon met een hoogte van 10m. De breedte, bodemhoogte en het materiaal worden overgenomen uit de aangeleverde data. </p> <p>Verder worden aquaducten gelijk behandeld als duikers.  </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/2_bruggen/","title":"Bruggen","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/2_bruggen/#bruggen","title":"Bruggen","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/2_bruggen/#breedte","title":"Breedte","text":"<p>De breedte wordt in de FME-export bepaalt aan de hand van de kolom BREEDTEOPENING in de laag DOORSTROOMOPENING uit DAMO. Er kunnen meerdere doorstroomopeningen per brug aanwezig zijn. In FME worden deze opgeteld en weergegeven in de laag BRUG in kolom <code>Som_doorstroomopeningen</code>. In de modellen worden meerdere openingen dus samengevoegd.</p> <p>Als er een doorstroombreedte bekend is en die breedte valt tussen een range van 0.5 meter tot 50 meter, dan is de breedte van de brug gelijk aan de doorstroombreedte. Anders wordt voor primair  20.02 meter aangenomen en voor secundair 10.01 meter.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/2_bruggen/#diepte","title":"Diepte","text":"<p>De diepte van bruggen staat niet in de basisgegevens. Deze wordt aangenomen op basis van de waterdiepte. In de datachecker wordt nu, waar beschikbaar, de getabelleerde bodemhoogte meegenomen. Na het toepassen van de ingemeten profielen op de watergang wordt bij iedere brug (v2_orifice met code: KBR*) op beide connection nodes gekeken wat de laagste bodemhoogte van de aangesloten kanalen is. Deze bodemhoogte+1cm wordt meegegeven aan de bruggen. Aan het einde van de routine wordt de bodemhoogte van kanalen naar BOB/crest_level-1cm gezet indien deze gelijk of hoger was dan de BOB/crest_level. </p> <p>Het verlagen van de watergangen aan de hand van kunstwerken vindt plaats aan het einde van de modelbuilder routine om er voor te zorgen dat het model goed rekent. Als een brug is verlaagd n.a.v. de laagste watergang, wordt dit doorgetrokken naar de hogere watergang. Dit vindt dus plaats nadat de bruggen zijn verlaagd naar waterganghoogte. </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/2_bruggen/#doorstroomhoogte","title":"Doorstroomhoogte","text":"<p>Als de diepte van de waterloop ter plaatse van een brug is aangepast naar bodemhoogte van de watergang berekent de modelbuilder de doorstroomhoogte opnieuw met de HOOGTEONDERZIJDE van de brug uit DAMO. Hiervoor geldt een minimale doorstroomhoogte van 1 meter. Bij geen ingevulde waarde in DAMO komt de bovenkant van het profiel op NAP +10,01 meter.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/2_bruggen/#coefficienten","title":"Co\u00ebffici\u00ebnten","text":"<p>De discharge coefficient voor een brug is 1. Dit betekent dat met brug de discharge even groot is als zonder brug en de waterstroom dus niet gehinderd wordt door de brug. </p> <p>In 3Di worden wel energie verliezen meegenomen voor het smaller of breder worden van het stroomprofiel.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/3_duikers/","title":"Duikers","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/3_duikers/#duikers","title":"Duikers","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/3_duikers/#algemeen","title":"Algemeen","text":"<p>Duikers moeten gekoppeld kunnen worden aan een watergang. De onderliggende watergang wordt alleen verwijderd als het een kruising zonder kunstwerk oplevert. </p> <p>In sommige gevallen worden duikers gemodelleerd als orifice. Tijdens het project hebben we meermaals last gehad van instabiliteit rondom korte duikers. Voor lange duikers is het echter van belang de weerstand als gevolg van de wand mee te nemen, dit gebeurt niet bij de orifice in 3Di.</p> <p>Alle duikers zijn gemodelleerd volgens de volgende stappen: 1.  Duikers korter dan 10 m als korte overlaten (orifice) met discharge co\u00ebffici\u00ebnt op 1.0</p> <ol> <li> <p>Lange overlaat (orifice) met discharge co\u00ebffici\u00ebnten op 1.0, mits:</p> <p>a.  Duiker breedte of diameter is factor 3 kleiner dan breedte watergang op streefpeil, en</p> <p>b.  Duiker is korter dan 25m, en</p> <p>c.  Het verschil tussen de bob beneden- en bovenstrooms is kleiner dan 10 cm.</p> </li> <li> <p>Alle andere duikers (lang, breed of schuin) als culvert maar toevoegen 1m2 storage op begin en eind node daar waar dat nog niet het geval is.</p> </li> </ol> <p>Duikers aan een stuw of gemaal worden niet in het model opgenomen. De stuw of het gemaal vormen dan de verbinding die de duiker representeert.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/3_duikers/#afmetingen","title":"Afmetingen","text":"<p>De afmetingen van een duiker worden overgenomen uit DAMO (VORMKOKER, HOOGTEOPENING en BREEDTEOPENING).  Indien er geen data beschikbaar is wordt er een waarde aangenomen van rond de 0.5 meter, bob op streefpeil minus duikerhoogte.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/3_duikers/#duikers-op-een-peilgrens","title":"Duikers op een peilgrens","text":"<p>In de afbeelding hieronder wordt met behulp van een blokkenschema uitgelegd hoe duikers die op een peilgrens liggen in het model worden meegenomen. </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/3_duikers/#sifons","title":"Sifons","text":"<p>Sifons worden apart behandeld (ze doorlopen niet bovenstaande schema) omdat ze (vrijwel) altijd op een peilgrens liggen. Ze worden uit de schematisatie gehaald samen met het hydroobject waar ze op liggen. Bij duikers wordt het deel van een hydroobject dat onder de duiker ligt weg geknipt om ruimte te maken voor de duikers. Bij sifons kan dit niet, omdat die altijd nog een hydroobject kruist. Sifons moeten daarom exact (gesnapt en even lang) op het onderliggende hydroobject liggen voor een correcte weergave in het model.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/3_duikers/#coefficienten","title":"Co\u00ebfficienten","text":"<p>De discharge coefficient van een duiker is 1.0 in het geval dat de duiker open staat. Indien het om een inlaat op een peilgrens gaat, wordt aangenomen dat de duiker is afgesloten en is de discharge coefficient gelijk aan 0. Dit wordt ook weergegeven in de afbeelding onderaan deze pagina.</p> <p>Voor sommige duikers is tijdens het modelleren gekozen om de stroming in een richting open te zetten en de andere dicht te houden. Hiermee kunnen waterbergingen gevuld worden zonder complexere sturing, of uitgelaten op de boezem (met vaste waterstand) als de waterstand in de polder hoger is dan de boezem.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/4_gemalen/","title":"Gemalen","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/4_gemalen/#gemalen","title":"Gemalen","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/4_gemalen/#capaciteit","title":"Capaciteit","text":"<p>De capaciteit wordt bepaald door gebruik te maken van onderstaande volgorde. Dit vormt tevens de rangorde voor prioritering bij het opnemen van de capaciteit in het model. Een capaciteit van 0 betekent dat de capaciteit 0 is. Een capaciteit van null betekent dat de capaciteit niet is ingevuld en dat er een aanname volgt (stap 3). </p> <ol> <li>Als de functie '904/98 doorspoelpomp', '1 aanvoergemaal' of '3 opmaling' is: 0 m3/s. </li> <li> <p>Als de functie '2 afvoergemaal', '4 onderbemaling', 'aan- en afvoergemaal' of 'op- en onderbemaling' is:  </p> <p>a. Zoals in DAMO onder MAXIMALECAPACITEIT </p> <p>b. Waarbij 0=0  3. Niet ingevuld (null): Aanname</p> <p>a. Primair: 25 m3/min </p> <p>b. Secundair: 1 m3/min </p> </li> </ol> <p>Let hierbij op dat de capaciteiten in DAMO weergegeven worden in m3/min en in de model-sqlite in l/s.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/4_gemalen/#richting","title":"Richting","text":"<p>De richting waarin gemalen het water pompen is van laag peil naar hoog peil op basis van het initi\u00eble water level van de connection nodes.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/4_gemalen/#aan-en-afslagpeilen","title":"Aan- en afslagpeilen","text":"<p>Het aan- en afslagpeil is gebaseerd op het streefpeil lage zijde (afvoeraanname). Dit gaat niet goed bij aanvoer-gemalen, maar omdat die een capaciteit van 0 meekrijgen heeft dit geen effect in de modellen. Het aanslagpeil is gelijk aan het streefpeil+0.02m en het afslagpeil is gelijk aan het streefpeil-0.03m.</p> <p>Voor poldergemalen is hier tijdens het modelleren vaak gekozen om het afslagpeil lager te leggen om de opstuwing hoger in het gebied te beperken.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/5_stuwen/","title":"Stuwen","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/5_stuwen/#stuwen","title":"Stuwen","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/5_stuwen/#ligging","title":"Ligging","text":"<p>Stuwen moeten gekoppeld kunnen worden aan een watergang. De onderliggende watergang wordt alleen verwijderd als het een kruising zonder kunstwerk oplevert.</p> <p>Stuwen die niet op een peilgrens liggen worden niet opgenomen in het model. Stuwen die in de HDB-kaartlaag Stuwen staan worden altijd opgenomen in het model.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/5_stuwen/#sturing","title":"Sturing","text":"<p>Stuwen die in de HDB-kaartlaag Sturing-3Di staan, worden gemodelleerd met de sturing die in die tabel is opgenomen. Dit op voorwaarde dat - de sturingsregels correct zijn - de stuwcode overeenkomt - de meetlocatie binnen een straal van 50 meter van een watergang ligt (5 april 2018). </p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/5_stuwen/#kruinhoogte","title":"Kruinhoogte","text":"<p>De kruinhoogte van een stuw wordt bepaald door gebruik te maken van kolom WS_FUNCTIESTUW en onderstaande volgorde. Dit vormt tevens de rangorde voor prioritering bij het opnemen van de kruinhoogte in het model. 1. Als functie = inlaatstuw (domein: 1), kies hoogste peil + 0,5 m. 2. Als minimum stuwhoogte boven hoogste peil, kies minimum stuwhoogte. 2. Als minimum stuwhoogte gelijk aan / onder hoogste peil, kies hoogste peil.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/5_stuwen/#kruinbreedte","title":"Kruinbreedte","text":"<p>De breedte van de stuw is gebaseerd op de kolom DOORSTROOMOPENING (en dus niet KRUINBREEDTE, want dit is de breedte van de constructie).</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/5_stuwen/#coefficienten","title":"Co\u00ebfficienten","text":"<p>Alle stuwen krijgen een discharge coefficient van 0.8.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/5_stuwen/#stuw-op-duiker","title":"Stuw op duiker","text":"<p>Bij een stuw op het uiteinde van een duiker, komt alleen de stuw in het model met het profiel van de stuw.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/d_kunstwerken/6_sturing/","title":"Sturing","text":"<p>&lt;!--TODO Ik mis basis uitleg hoe de sturing in elkaar steekt, wat we opslaan in de hdb en dat het belangrijk is dat bij het bouwen hier goed naar gekeken wordt omdat we dit al jaren niet hebben bijgewerkt.&gt;</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/e_onderliggende_rasterdata/1_onderliggende_rasterdata/","title":"Onderliggende rasterdata","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/e_onderliggende_rasterdata/1_onderliggende_rasterdata/#onderliggende-rasterdata","title":"Onderliggende rasterdata","text":"<p>In de 3Di poldermodellen zitten de volgende 4 rasterkaarten: 1. DEM 2. Weerstand 3. Infiltratie 4. Bodemberging</p> <p>Hoe deze kaarten zijn opgebouwd wordt hieronder beschreven. Alle rasters bevatten waardes op subgridniveau (0,5 m bij 0,5 m) die door 3Di worden opgeschaald tot de veel grotere rekencellen.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/e_onderliggende_rasterdata/1_onderliggende_rasterdata/#maaiveldhoogte-dem","title":"Maaiveldhoogte DEM","text":"<p>In het 3Di model wordt een hoogtekaart ofwel Digital Elevation Model (DEM) gebruikt voor de berging op en stroming over het maaiveld. De DEM wordt eveneens gebruikt om waterdieptes te berekenen die vervolgens worden gebruikt voor het afleiden van schade. De DEM is gebaseerd op de maaiveldhoogtekaart ofwel het Actuele Hoogtekaart Nederland. Ten tijde van het BWN2-project was dit AHN versie 3, inmiddels zijn alle modellen bijgewerkt naar AHN4. Modellen die nieuw worden opgebouwd zijn gebaseerd op de AHN5.</p> <p>De AHN moet echter bewerkt worden voordat deze geschikt is voor toepassing als DEM in 3Di. De AHN kent twee typen. Het DSM (digital surface model) is een ongefilterde vertaling van de ingevlogen hoogtemetingen naar een raster van 0,5 bij 0,5 m. Het DTM (digital terrain model) is een rasterkaart waarbij ingevlogen hoogtemetingen die geen maaiveld representeren (bv, daken, water, bomen, auto's en rietkragen) eerst uit de meetdata zijn gefilterd alvorens de rasterkaart is aangemaakt. Deze laatste kaart wordt gebruikt voor het aanmaken van de DEM. Beide rasters bevatten gaten op plekken waar geen of onvoldoende maaiveld meetdata beschikbaar was. </p> <p>Voor het aanmaken van een DEM uit de AHN zijn de volgende voorbereidingen gedaan in ons basis DEM: </p> <ol> <li>Gaten dicht interpoleren; </li> <li>Alle gebouwen (BGT Pand_v) een hoogte mee te geven die gelijk is aan het 75e percentiel van de omliggende maaiveldhoogtes (binnen een buffer van 1 m) + 5 cm (drempel/vloerpeil);  </li> </ol>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/e_onderliggende_rasterdata/1_onderliggende_rasterdata/#selectie-van-panden-voor-drempelhoogte","title":"Selectie van panden voor drempelhoogte","text":"<p>De panden uit de BAG waarmee de AHN5 is bijgewerkt zijn geexporteerd op 10 januari 2024. De panden bevatten attribuut 'status' waarin de volgende klassen zijn:</p> <ul> <li>'Bouw gestart' </li> <li>'Bouwvergunning verleend'  </li> <li>'Pand buiten gebruik'  </li> <li>'Pand in gebruik'  </li> <li>'Pand in gebruik (niet ingemeten)'  </li> <li>'Sloopvergunning verleend'  </li> <li>'Verbouwing pand' </li> </ul> <p>'Bouw gestart'  bevat scala aan situaties, nieuwbouw waar al is opgehoogd of niet, herbouw bestaande bouw, bouwputten.      Om gaten op te vullen worden deze gebruikt om op basis van 75 percentiel een drempelhoogte te geven. Daanaast slaan we deze los op zodat deze toegevoegd kunnen worden aan de laag met onbetrouwbare schades.</p> <p>'Bouwvergunning verleend' bevat ook vele mogelijkheden. Maar hier is vaker de originele maaiveldhoogte nog in de dtm te vinden.     Deze locaties zijn niet bijgewerkt in de DEM, maar los opgeslagen in de hydrologen database zodat ze eventueel toegevoegd kunnen worden aan de laag     met onbetrouwbare schades.</p> <p>Er zijn ook vlakken waar geen opvulhoogte op basis van de rand rondom het vlak gevonden kan worden. Dat komt bijvoorbeeld doordat een garagebox is omsloten door andere panden, en dus in een groot gat in de AHN staat. Ook winkelcenrtum Middenwaard is een voorbeeld, waar losse delen midden in het winkelcentrum zijn gedefinieerd. Deze vlakken worden los opgeslagen zodat deze toegevoegd kunnen worden aan de laag met onbetrouwbare schades. De drempelhoogte van deze vlakken nemen we over van het dichtstbijzijnde pand op een maximale afstand van 10 m.  Meer dan 10 m kan tot fouten leiden, zoals een waarde van de andere kant van de straat, bijvoorbeeld bij chinees rest. Libelle.</p> <p>Gaten in de AHN5 die overblijven worden dichtgeinterpoleerd volgens de nearest neighbour methode. Dat ziet er lelijk uit, maar dan zien we bij grote vlakken tenminste dat het niet klopt.</p> <p>De basis AHN wordt opgeslagen zoals hierboven beschreven. De HHNK modlbuilder voegt tenslotte nog de toe dat alle BGT watervlakken worden opgehoogd naar 10 m.</p> <p>In de eerste versie van de BWN modellen (AHN3) werken ook bassins en andere tanks opgehoogd. Dat doen we nu niet, omdat het slechts een klein aandeel heeft. Mocht dit lokaal toch nodig zijn dan kan de BGT hiervoor gebruikt worden: BGT OverigBouwwerk_v [BGTPlusType = 'bassin' OR BGTPlusType = 'opslagtank' OR BGTPlusType = 'bezinkbak']). </p> <p>Wat niet vooraf gebeurt is: 1. Maaiveldcorrecties door te voeren voor bouwputten, inritten, tunnelbakken en maaiveldveranderingen (bv recent aangelegde waterberging); 2. Maaiveldcorrecties voor viaducten en tunnels. Hiervoor is wel een bestand 'doorsnijdingen' beschikbaar voor omstromingsberekeningen.</p> <p>Dit kan in de model DEM aangepast worden en in de HDB worden bijgehouden in de laag <code>dem_edits</code> voor nieuwe modellen.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/e_onderliggende_rasterdata/1_onderliggende_rasterdata/#rasterkaart-weerstand","title":"Rasterkaart Weerstand","text":"<p>Het weerstandsraster heeft betrekking op de stroming over maaiveld en wordt uitgedrukt in Manning waarde die veel wordt toegepast voor het modelleren van ondiep water stroming. Hoe lager de Manningwaarde (s/m<sup>1/3</sup>) hoe lager de weerstand. Er wordt ook wel eens gebruik gemaakt van de inverse Manningswaarde wat de Stricklerwaarde wordt genoemd (s/m<sup>1/3</sup>). De stricklerwaarde wordt op basis van onderstaande punten toegekend.</p> <p>Waterlopen * 45-30: Zeer schoon; * 35-20: Schoon; * 25-15: Licht begroeid; * 20-10: Matig begroeid; * 16-5: Vrij sterk begroeid; * &lt;10: Zeer sterk begroeid;</p> <p>Betonnen duikers * 75-100: Duiker recht en schoon; * 70-90: Duiker met bochten, verbindingen en enige verontreiniging; * 55-75: Rioolbuis met mangaten, inlaten e.d. recht; * 70-85: Niet afgewerkt bij stalen bekisting; * 60-85: Niet afgewerkt bij gladde houten bekisting; * 50-65: Niet afgewerkt bij ruwe houten bekisting;</p> <p>Er wordt voorgesteld om de weestandskaart op te bouwen uit de BGT kaart en daarbij de volgende uitgangspunten aan te houden : * Wegdeel_v: 100 m<sup>1/3</sup>/s; * Overbruggingsdeel_v: 100 m<sup>1/3</sup>/s; * Pand_v: 5 m<sup>1/3</sup>/s; * OverigBouwwerk_v: 15 m<sup>1/3</sup>/s; * OnbegroeidTerreindeel_v: 15 m<sup>1/3</sup>/s; * BegroeidTerreindeel_v: 15 m<sup>1/3</sup>/s;</p> <p>Met behulp van bovenbenoemde uitgangspunten, die beschreven staan in 'Conversietabel_landgebruik_2018.csv', wordt er vanuit het landgebruiksraster per model een weerstandsraster aangemaakt. Deze waardes zijn uitgedrukt als Manningsweerstand in m<sup>1/3</sup>/s (Let op: dat is dus niet hetzelfde als hierboven).</p> <p>Nb. De conversietabel is beschikbaar op het systeem van HHNK onder: <code>\\\\corp.hhnk.nl\\data\\Hydrologen_data\\Data\\01.basisgegevens\\rasters\\Conversietabel_landgebruik_2018.csv</code></p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/e_onderliggende_rasterdata/1_onderliggende_rasterdata/#rasterkaart-infiltratie","title":"Rasterkaart Infiltratie","text":"<p>Voor het maken van de infiltratiekaart is een combinatie gebruikt van de BGT en de bodemkaart. Verhard oppervlak en water heeft een infiltratiesnelheid van 0 mm/u mee gekregen, overig stedelijk gebied een infiltratie van 2 mm/u en divers onverhard gebied (bv grasland agrarisch, bouwland en fruitteelt) heeft een infiltratiewaarde gekregen van 5 mm/u, 10 mm/u of 20 mm/u.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/e_onderliggende_rasterdata/1_onderliggende_rasterdata/#onverharde-infiltratiekaart","title":"Onverharde infiltratiekaart","text":"<p>Er wordt voorgesteld om de onverhard infiltratiekaart te maken op basis van de Imax waarde per grondsoort . De Imax waarde is de initi\u00eble verticale infiltratiesnelheid die optreedt na plasvorming en een vochtfront direct onder het maaiveld. Dit is de maximale infiltratiesnelheid die kan optreden en die wordt gedreven door een maximale drukhoogte gradi\u00ebnt in combinatie met capillaire krachten. </p> <p>De infiltratiesnelheid zal snel afnemen als het vochtfront verder onder het maaiveld komt te liggen omdat de drukhoogte gradi\u00ebnt dan afneemt. De snelheid neemt geleidelijk af tot de minimale infiltratiecapaciteit Ks, ook wel de verzadigde doorlatendheid genoemd. Als wordt uitgegaan van de infiltratiecapaciteit Imax dan wordt bij modelberekeningen met extreme neerslag de gemiddelde infiltratiesnelheid tijdens een neerslaggebeurtenis overschat.</p> <p>In onderstaande tabellen zijn Imax en Ks waardes gegeven voor onverharde gebieden.</p> <p></p> <p></p> <p>Op basis van bovenstaande tabellen is aan iedere PAWN grondsoort die in het beheergebied van HHNK voor komt een infiltratiecapaciteit toegekend. De toekenning is los gebaseerd op bovenstaande tabellen en houdt er rekening mee dat de bodemsoorten beter doorlatend zijn naarmate ze meer zandig zijn en slechter doorlatend naar mate ze meer lemig of kleiig zijn.</p> <p>De onverharde infiltratiecapaciteit wordt vermenigvuldigd met drie reductiekaarten:  1. Verhardings reductiekaart</p> <pre><code>Deze kaart reduceert de onverharde infiltratiecapaciteit ter plaatse van verharding en water.\n</code></pre> <ol> <li> <p>Erf reductiefactor kaart.</p> <p>Deze kaart reduceert de onverharde infiltratiecapaciteit op particuliere erven ten gevolge van parti\u00eble verharding. </p> </li> <li> <p>Riolering reductiefactor kaart </p> <p>Deze kaart geeft een additionele infiltratie reductie in stedelijk gebied om een oppervlakkige afvoercomponent te cre\u00ebren waarmee het weglaten van riolering wordt gecompenseerd. </p> </li> </ol> <p>Kaarten 2 en 3 worden afgeleid uit een kaart die de dichtheid van bebouwing aangeeft: de bebouwingsfractie kaart.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/e_onderliggende_rasterdata/1_onderliggende_rasterdata/#rasterkaart-bodemberging","title":"Rasterkaart Bodemberging","text":"<p>De hoeveelheid bodemberging hangt af van het grondgebruik, het bodemprofiel en de ontwateringsdiepte. In de 3Di poldermodellen worden 3 bodemberging rasters aangemaakt, behorend bij 3 verschillende grondwaterstanden (GLG, GHG en het gemiddelde daarvan GGG). Omdat het GGG raster het gemiddelde is van het GHG en GLG raster zijn alleen de GHG en GLG rasters getoond.</p> <p>Voor gedetailleerde regionale toepassingen bestaan er geen betrouwbare gebiedsdekkende databronnen voor GLG/GHG. Er bestaan wel gebiedsdekkende GLG/GHG kaarten maar die zijn dusdanig onnauwkeurig dat ze voor regionale toepassingen lokaal grote fouten kunnen introduceren. Voor het beheergebied van HHNK bestaan er 2 gebiedsdekkende GLG/GHG producten:  1. Alterra GLG/GHG kaart</p> <pre><code>De GLG/GHG kaart van Alterra is een rasterkaart van 25 m bij 25 m met de grondwaterstanden in m minus maaiveld. De grondwaterstanden zijn gebaseerd op meetreeksen, de AHN1 en de bodemkaart.\n</code></pre> <ol> <li> <p>De GLG/GHG uit het grondwatermodel van HHNK. </p> <p>Deze (100m bij 100 m) raster kaarten zijn in 2014 gegenereerd met het (MODFLOW/ SEAWAT) grondwatermodel van HHNK en hebben een grove modelschaal (ca. 100 bij 100 m). Deze modelversie betreft een modelvernieuwing van het oorspronkelijke model uit het project Leven met Zout Water uit 2012.</p> </li> </ol> <p>Nb: de grondwatertrappen uit de bodemkaart zijn een oudere en minder geavanceerde aanpak op basis van dezelfde brondata als de Alterra kaart en vormt dus geen additionele bron van informatie. </p> <p>Naast dit kaartbeeld bestaan er twee methoden waarmee gebiedsdekkend een inschatting gemaakt kan worden van de GLG/GHG standen:  1. GHG kaart op basis van ontwateringsnormen:</p> <ol> <li>GLG/GHG op basis van drainagebasis.</li> </ol> <p>Tijdens het BWN2-project zijn bergingskaarten gebaseerd op de Alterra grondwaterstanden en bergingsco\u00ebffici\u00ebnten uit SOBEK. Deze zijn voor het laatst bijgewerkt in 2020. De bestanden zijn te vinden op <code>\\\\corp.hhnk.nl\\data\\Hydrologen_data\\Data\\01.basisgegevens\\rasters</code>. HHNK werkt aan het verbeteren van de input voor de bodembergingskaarten voor toekomstige analyses.</p>"},{"location":"md_files/3_achtergronden_en_uitgangspunten/g_achtergrond_klimaatsommen/1_achtergrond_klimaatsommen/","title":"Klimaatsommen","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/g_achtergrond_klimaatsommen/1_achtergrond_klimaatsommen/#update-klimaatstatistiek","title":"Update klimaatstatistiek <p>Om beter aan te sluiten bij landelijke ontwikkelingen op het gebied van klimaatstatistiek worden momenteel extremere buivolumes toegepast dan in de BMW van Deltaris (2017). Er is destijds uitgebreid onderzocht welke frequenties horen bij welke bui- en grondwatercondondities. Dit zal in de toekomst herhaald moeten worden, maar momenteel hanteren we een andere aanpak. Er is gekozen om de frequenties momenteel niet aan te passen, maar de buivolumes daarentegen wel. Hierdoor sluiten we aan bij de landelijke ontwikkelingen voor buivolumes en kunnen we de frequenties in de toekomst nog actualiseren.</p>","text":""},{"location":"md_files/3_achtergronden_en_uitgangspunten/g_achtergrond_klimaatsommen/1_achtergrond_klimaatsommen/#klimaatsommen","title":"Klimaatsommen","text":"<p>De gevolgen van klimaatverandering worden steeds beter merkbaar. Onder andere in de vorm van hevigere (piek) en/of langdurige (blok) neerslagsituaties. Om de gevolgen van deze neerslagevenementen in beeld te brengen, worden een aantal scenario's met verschillende herhalingstijden doorgerekend. De drie herhalingstijden die gesimuleerd worden zijn:</p> <ol> <li>T10 (neerslagsituatie die zich statistisch gezien 1x in de 10 jaar voordoet)</li> <li>T100 (neerslagsituatie die zich statistisch gezien 1x in de 100 jaar voordoet)</li> <li>T1000 (neerslagsituatie die zich statistisch gezien 1x in de 1000 jaar voordoet)</li> </ol> <p>Voor deze herhalingstijden gebruiken we twee neerslagpatronen:</p> <ol> <li>Piek: hevige neerslagsituatie die in 2 uur de eerste 2 uur valt, vervolgens 46 uur droog</li> <li>Blok: langdurige neerslagsituatie met een lage neerslagintensiteit die 48 uur duurt </li> </ol> <p>Hieronder is voor zes scenario's van herhalingstijd en neerslagtype het neerslagvolume weergegeven:</p> <p> Bron: Brede Methodiek Wateroverlast, Deltares (Met update buivolumes o.b.v. STOWA neerslagstatistiek uit 2024)</p> <p>Daarnaast is de grondwater conditie voorafgaand aan de neerslagsituatie van invloed op het verloop van het scenario. De volgende drie grondwater condities kunnen worden toegepast:  1. Gemiddeld laagste grondwaterstand (GLG): de gemiddeld laagste grondwaterstand wordt vastgesteld op basis van metingen van grondwaterstanden op de 14e en 28e van de maand. Per jaar worden de drie laagste grondwaterstanden geselecteerd en gemiddeld over minimaal 8 jaar. 2. Gemiddelde grondwaterstand (GGG): Dit is het gemiddelde tussen de GLG en de GHG. 3. Gemiddeld hoogste grondwaterstand (GHG): de gemiddeld hoogste grondwaterstand wordt vastgesteld op basis van metingen van grondwaterstanden op de 14e en 28e van de maand. Per jaar worden de drie hoogste grondwaterstanden geselecteerd en gemiddeld over minimaal 8 jaar.</p> <p>Bij het analyseren van de resultaten die uit de klimaatsommen volgen, is het tevens van belang om te weten hoe vaak een bepaalde combinatie van variabelen (herhalingstijd, neerslagtype en grondwaterconditie) zich voordoet. De neerslagregio's die in Nederland zijn vastgesteld geven daar inzicht in. Onderstaand figuur laat de neerslagregio's in het beheergebied van HHNK zien.</p> <p></p> <p>In het beheergebied van HHNK bevinden zich drie neerslagregio's: 1. Hoog 2. Referentie 3. Laag (wordt niet gebruikt in de berekeningen)</p> <p>Aan de hand van de neerslagregio's is bepaald wat de frequentie van de herhalingstijden van piek- en blokbuien in de zomer en de winter is. Deze frequenties zijn nodig voor het bepalen van de netto contante waarde van de schade. </p> <p>---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- <p>Ter illustratie zijn in de onderstaande figuren de frequenties van voorkomen opgenomen van een combinatie van buivolume uit de BWN van 2017, buivorm en seizoen voor twee neerslagregios. <p> Neerslagregio gemiddeld <p> Neerslagregio hevig <p>---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- <p>Het onderscheid tussen zomer en winter is gemaakt, omdat de beschikbare bodemberging een andere kans heeft in de zomer en winter en de kans op neerslag in de zomer en winter sterk uiteen loopt. In het figuur hieronder is de kans op het optreden van een bepaalde bodemtoestand in de zomer en winter weergegeven.</p> <p></p> <p>Al deze kansen leiden tot een overzicht met de frequentie van elk van de 18 scenario's. In de afbeelding hieronder is weergegeven wat de frequenties van de scenario's zijn voor de neerslagregio <code>Referentie</code>.</p> <p></p> <p>In de afbeelding hieronder is weergegeven wat de frequenties van de scenario's zijn voor de neerslagregio <code>Hoog</code>.</p> <p></p>"},{"location":"md_files/4_gebruik_plugin/_introductie_plugin/","title":"Introductie HHNK-3Di-plugin","text":"<p>HHNK heeft de werkwijze voor het controleren van modellen en de toetsing van het watersysteem binnen het project BWN2 vastgelegd in een plugin voor QGIS of de 3Di Modeler Interface. De HHNK plugin is beschikbaar via github en kan worden ge\u00efnstalleerd aan de hand van deze installatiehandleiding.</p>"},{"location":"md_files/4_gebruik_plugin/_introductie_plugin/#plug-in-scherm","title":"Plug-in-scherm","text":"<p>Na installatie kan de plugin worden geopend via het HHNK-symbool in de werkbalk van QGIS. Na het aanklikken opent er een 'docked' plug-in-scherm rechts in beeld. De HHNK Toolbox is opgedeeld in drie delen:</p> <p></p> <ul> <li>Main: via dit onderdeel wordt het project en andere lagen ingeladen en is het mogelijk om simulaties te starten.</li> <li>Checks: dit onderdeel geeft de gebruiker de mogelijkheid om controles uit te voeren voor het model of nabewerking te draain.</li> <li>Modelbouw: Voor het draaien van de datachecker en modelbuilder, werkt alleen op de server van HHNK.</li> </ul> <p>In de hoofdstukken hieronder is de BWN2-werkwijze stap-voor-stap uitgewerkt. Vooraf wijst de auteur de gebruiker nog graag op het gebruik van een logboek.</p>"},{"location":"md_files/4_gebruik_plugin/_introductie_plugin/#logboek","title":"Logboek","text":"<p>Gedurende het gehele modelleerproces is het van belang een logboek bij te houden van gemaakte stappen en wijzigingen in het model. Neem in het logboek op door wie, wanneer en in welke modelrevisie de wijzigingen zijn gemaakt. Daarnaast heeft het de voorkeur om wijzigingen in het model via SQL aan te brengen en in het logboek te noteren, zodat deze eenvoudig opnieuw uitgevoerd kunnen worden. Het logboek ziet er bijvoorbeeld zo uit:</p> <pre><code>-------Revisie 4------------\n-- Wouter van Esse, 25 oktober 2021\n-- Duiker vervangen door stuw op aangeven gebiedsbeheerder\nDELETE FROM v2_orifice WHERE code LIKE 'KDU-JL-3420'\n;\nINSERT INTO v2_cross_section_definition (code, id,width,shape)\nVALUES (\"KST-Q-23237\", 9999001,1,1)\n;\nINSERT INTO v2_weir (zoom_category, code, display_name,\n    discharge_coefficient_negative, sewerage, \n    discharge_coefficient_positive, external, crest_type, \n    friction_type, friction_value,\n    connection_node_start_id, connection_node_end_id, \n    crest_level, cross_section_definition_id) \nVALUES (4, \"KST-Q-23237\", \"KST-Q-23237\", 0.8, 0, 0.8, 0, 4, 2, \n        0.03,2597, 1051, -0.6, 9999001)\n;\n</code></pre> <p>Geef ook aan wanneer het model is gebruikt voor het maken van de hydraulische toets of klimaatsommen en of dit om de referentie situatie of een maatregel scenario gaat.</p>"},{"location":"md_files/4_gebruik_plugin/_introductie_plugin/#leeswijzer-plug-in","title":"Leeswijzer plug-in","text":"<p>Onderstaande hoofdstukken vormen samen de BWN2-werkwijze en leggen telkens de benodigde stappen uit in de plugin. Het eerste hoofdstuk Brongegevens dient als naslagwerk voor de benodigde gegevens en een aantal definities. De overige hoofdstukken zijn een handleiding voor het gebruik:</p> <ul> <li>Project starten</li> <li>Sqlite checksuitvoeren</li> <li>Modelstaten aanpassen</li> <li>Berekeningen uitvoeren</li> <li>Resultaten downloaden</li> <li>0d1d test uitvoeren</li> <li>Bank level test uitvoeren</li> <li>1d2d test uitvoeren</li> <li>Klimaatsommen uitvoeren</li> </ul>"},{"location":"md_files/4_gebruik_plugin/a_brongegevens/","title":"Brongegevens","text":""},{"location":"md_files/4_gebruik_plugin/a_brongegevens/#brongegevens","title":"Brongegevens","text":"<p>Hieronder vind je een beschrijving van alle brongegevens die worden gebruikt. Daarnaast is hier informatie te vinden over modelinstellingen.</p> <ol> <li>Model</li> </ol> <p>Het model bevat de meeste informatie over de polder, zoals welke watergangen en kunstwerken zich in het gebied bevinden. Als er, bij het aanpassen van de modelstaat, backups worden aangemaakt worden die toegevoegd aan het model.</p> <ol> <li>DAMO</li> </ol> <p>De <code>DAMO</code> database is de gestandaardiseerde informatiebron waarvan de Waterschappen gebruik maken. De data uit DAMO die gaat over het gebied dat het model beslaat, is opgeslagen in de <code>DAMO.gdb</code> file. Het model is in de meeste gevallen opgebouwd vanuit deze database.</p> <p>Gegevens uit DAMO worden gebruikt in verschillende tests die er op zijn gericht de brongegevens te vergelijken met wat er in het model zit. De <code>DAMO.gdb</code> worden gebruikt in onderstaande tests:</p> <ul> <li> <p><code>oppervlaktewater</code> test om het oppervlaktewater in het model mee te     vergelijken (de gebruikte laag uit DAMO is <code>Waterdeel</code>). </p> </li> <li> <p><code>Bodemhoogte kunstwerken</code> test om informatie over de hoogte op bepaalde punten van objecten toe te voegen (de gebruikte laag uit de <code>DAMO.gdb</code> is <code>DuikerSifonHevel</code>). </p> </li> </ul> <p>Beide tests maken deel uit van de <code>Sqlite tests</code></p> <ol> <li>HDB</li> </ol> <p>De <code>HDB</code> database (<code>.gdb</code>) bevat aanvullende informatie over het gebied dat het model representeert. Het gaat hier om informatie die niet in DAMO kan worden opgeslagen, maar die wel relevant is voor hydrologische analyse. De HDB wordt gebruikt in de <code>gestuurde kunstwerken</code> test om informatie toe te voegen over de kunstwerken, zoals de object code, het streefpeil en de minimale en maximale kruinhoogtes. De gebruikte laag is     <code>Sturing_3Di</code>. </p> <ol> <li>3Di resultaten</li> </ol> <p>De 3Di resultaten (<code>.nc</code> en <code>.h5</code>) worden gebruikt in de <code>0d1d tests</code>, <code>bank level tests</code> en <code>1d2d test</code>. De resultaten bevatten informatie over het gedrag van een model op verschillende tijdstappen tijdens het gesimuleerde scenario.</p> <ol> <li>DEM</li> </ol> <p>Het DEM raster (Digital Elevation Model) bevat informatie over de maaiveldhoogte binnen het gebied dat het model beslaat. Deze informatie wordt gebruikt in de <code>maximale waarde dem</code> check, om te verifieren dat het raster klopt. Vervolgens wordt de informatie gebruikt in de <code>ontwateringsdiepte</code> test om het verschil tussen de bodemhoogte en het grondwaterniveau te berekenen. De DEM wordt ook gebruikt in de <code>1d2d tests</code> om de waterstanden op verschillende tijdstippen te berekenen.</p> <ol> <li>Polder shapefile</li> </ol> <p>De polder shapefile (<code>.shp</code>) bevat informatie over de grootte van het gebied waarvan het model een representatie is. Het wordt gebruikt in de <code>ondoorlatend oppervlak</code> test (<code>sqlite tests</code>) om te bepalen of het ondoorlatend oppervlak in het model redelijk is ten opzichte van de grootte van het gehele gebied.</p> <ol> <li>Datachecker output</li> </ol> <p>De output van de datachecker bevat veel gegevens die overeenkomen met DAMO aangevuld met gecombineerde en gecontroleerde gegevens. Deze gegevens worden gebruikt in de volgende tests:</p> <ul> <li> <p><code>Ontwateringsdiepte</code> test om de waterstanden van de verschillende peilgebieden te bepalen (de gebruikte laag is <code>fixeddrainagelevelarea</code>). </p> </li> <li> <p><code>Oppervlaktewater</code> test om het oppervlaktewater te berekenen voor de verschillende peilgebieden (de gebruikte laag is <code>fixeddrainagelevelarea</code>). </p> </li> <li> <p><code>Bodemhoogte kunstwerken</code> test om informatie over aannames (waar van toepassing) toe te voegen aan kunstwerken. De laag die daarvoor wordt gebruikt is <code>culvert</code>.</p> </li> <li> <p>Channel surface from profiles</p> </li> </ul> <p>De channel surface from profiles shapefile (<code>.shp</code>) bevat informatie over de breedte van de watergangen. Deze informatie wordt gebruikt in de <code>oppervlaktewater</code> test om het totale oppervlaktewater van de watergangen in het model te berekenen. Dit bestand is een output van de modelbuilder.</p> <ol> <li>Model instellingen</li> </ol> <p>In <code>{Modellenmap}\\Polder_X\\02_schematisation</code> staan per model twee Excel documenten waarmee de modelinstellingen en modelstaten geconfigureerd kunnen worden. De instellingen in de sqlite-database van het model worden ten dele overschreven door de waarden in deze excel bestanden. In de tabel hieronder zijn een aantal default instellingen voor de schematisatie weergegeven.</p> <p></p> <p>Deze gegevens dienen in een Excel met de naam <code>model_settings_default</code> ingevoerd te worden, zodat ze in 3Di uitgelezen kunnen worden en de juiste invoerwaarden worden gebruikt.</p> <p>De instellingen voor modelstaten staan in de een Excel met de naam <code>model_settings</code>. Dit wordt verder toegelicht onder Modelstaten.</p> <p>Klik hier om van start te gaan met de plug-in.</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/","title":"Project starten","text":"<p>Er zijn twee mogelijkheden om met de toolbox aan de slag te gaan: 1. Gebruiker van de plugin begint een nieuw project  2. HHNK levert de projectmap inclusief data en model aan (klik hier)</p> <p>Na het inladen van het project kunnen de gegevens worden bekeken. De map themes bieden vooraf ingestelde combinaties waarmee snel tussen verschillende thema's gewisseld kan worden.</p> <p>Niet alle lagen zijn direct beschikbaar. Onder het tabblad <code>Checks</code> worden controles uitgevoerd die daar bekeken kunnen worden in tabellen of als lagen ingeladen kunnen worden. De controles zijn gebaseerd op de schematisatie of op basis van modelresultaten. Voor verdere beschrijving van deze controles zie Sqlite-checks en verder.</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#1-een-nieuw-project-beginnen","title":"1. Een nieuw project beginnen","text":"<p>Volg onderstaande werkwijze als je het model vanaf de 'grond' gaat opbouwen.</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#modellen-folder-selecteren","title":"Modellen folder selecteren","text":"<p>Voordat een nieuw project aangemaakt kan worden, moet een modellen folder gekozen worden. Op deze locatie wordt alle data in het vervolg opgeslagen. Hieronder is te zien op welke plek de modellen folder (1) zich bevindt:</p> <p></p> <p>Kies een locatie in de verkenner waar alles opgeslagen gaat worden (raadzaam om een lokale map te kiezen). Dit kan bijvoorbeeld in de map <code>C:\\Users\\{gebruiker}\\Documents\\3Di</code>. Je kunt ook een nieuwe map in de verkenner (locatie staat vrij, maar raadzaam om lokaal te werken) aanmaken. </p> <p><code>{gebruiker}</code> is de naam van de Windows-gebruiker.</p> <p>Kies de locatie van de hierboven aangemaakte map om ervoor te zorgen dat <code>Nieuw project aanmaken</code> (2) geactiveerd wordt. </p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#nieuw-project-aanmaken","title":"Nieuw project aanmaken","text":"<p>Wanneer je op <code>Nieuw project aanmaken</code> (2) klikt, opent zich een nieuw venster:</p> <p></p> <p>Hier kun je een referentie polder (1) opgeven als je die hebt. Dit werkt alleen binnen de systemen van HHNK.  Het is niet noodzakelijk om deze op te geven. Geef de schematisatie die je gaat aanmaken een naam (2). </p> <p>Wanneer je op <code>Project aanmaken</code> klikt, wordt er een lege mappenstructuur aangemaakt volgens de standaard projectindeling. In de verschillende mappen worden <code>readme</code> files aangemaakt waarin staat welke files in welke map wordt gezocht.</p> <p>Het resultaat in de verkenner ziet er als volgt uit:</p> <p></p> <p>Nu is het zaak de mappen in de projectstructuur te vullen met bestanden uit de DAMO-export, datachecker en modelbuilder. Zie hiervoor het hoofdstuk brongegevens. </p> <p>Volg hierna de stappen om het model in te laden.  </p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#2-data-aangeleverd-door-hhnk","title":"2. Data aangeleverd door HHNK","text":"<p>Volg onderstaande werkwijze als HHNK de benodigde projectmap aanlevert. </p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#map-aanmaken","title":"Map aanmaken","text":"<p>Maak een nieuwe map aan in de verkenner (locatie staat vrij, maar raadzaam om lokaal te werken) met de naam van het aangeleverde gebied (bijvoorbeeld polder_X). Dat kan er als volgt uit zien: <code>C:\\Users\\{gebruiker}\\Documents\\3Di\\polder_X</code>. </p> <p><code>{gebruiker}</code> is de naam van de Windows-gebruiker.</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#data-kopieren","title":"Data kopi\u00ebren","text":"<p>Kopieer de aangeleverde data naar de map die in stap 1 is gemaakt. Hieronder is een voorbeeld te zien waaruit de aangeleverde data (deze kan qua inhoud verschillen) is opgebouwd.</p> <p></p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#3-model-inladen","title":"3. Model inladen","text":"<p>Het model kan vervolgens ingeladen worden door bij <code>modellen folder</code> (1) door de volgende handeling: als je in stap 1 de map hebt aangemaakt in het pad: <code>C:\\Users\\{gebruiker}\\Documents\\3Di\\polder_X</code>, kies je bij <code>modellen folder</code> het volgende pad om het model in te kunnen laden: <code>C:\\Users\\{gebruiker}\\Documents\\3Di</code>. Vervolgens kan bij <code>polder</code> (2) gekozen worden voor <code>polder_X</code>. </p> <p></p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#4-gegevens-bekijken","title":"4. Gegevens bekijken","text":"<p>Via de knop <code>laad lagen</code> (3) kun je diverse lagen inladen om inzicht te geven in het model.</p> <p>Vervolgens verschijnt het onderstaande scherm met een aantal keuzes: </p> <p></p> <p>Bovenaan het scherm kan men kiezen om de resultaten van tests in te laden om te bekijken. Als er nog geen tests zijn uitgevoerd, laat deze leeg en ga hieronder verder. </p> <p>Hieronder kunnen nog een aantal andere opties aangevinkt worden: * Sqlite (3Di plugin) * Grid genereren * Sqlite testen * Banklevel test * Basis layout * Achtergrondkaarten</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#sqlite-3di-plugin","title":"Sqlite (3Di plugin)","text":"<p>Deze optie geeft de mogelijkheid om de schematisatie (.sqlite) van het model in te laden.</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#grid-genereren","title":"Grid genereren","text":"<p>Deze optie genereert het rekengrid onder andere op basis van grid refinements en rekencel grootte (bepaald in global settings) en deze wordt ingeladen. Voor deze test hoeft er niks gecontroleerd te worden.</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#sqlite-testen","title":"Sqlite testen","text":"<p>De sqlite tests zijn bedoeld om het model te controleren op (potenti\u00eble) fouten in de data en deze te corrigeren waar nodig. Als de sqlite tests nog niet zijn uitgevoerd, kunnen deze via sqlite tests worden gestart. Als de sqlite tests goed zijn bevonden, is het model klaar om de 0d1d test te draaien. </p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#banklevel-test","title":"Banklevel test","text":"<p>Door de <code>banklevel test</code> in te laden, kun je de resultaten inzien die volgen uit de test die is uitgevoerd. Verdere toelichting over de <code>banklevel test</code> is te vinden in Banklevel test.</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#basis-layout","title":"Basis layout","text":"<p>Met het inladen van de <code>basis layout</code> krijg je inzicht in de resultaten die volgen uit controles die zijn uitgevoerd om te kijken of het model goed is opgebouwd vanuit de brondata of dat er nog data mist. Gebruik deze optie om een standaard QGIS-project op te zetten.</p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#achtergrondkaarten","title":"Achtergrondkaarten","text":"<p>Met de optie <code>achtergrondkaarten</code> kun je verschillende soorten kaarten als achtergrond onder de schematisatie leggen. Dit is bijvoorbeeld handig om te controleren of een breedte van een watergang in het model overeenkomt met de breedte op de luchtfoto. </p>"},{"location":"md_files/4_gebruik_plugin/b_project_starten/#5-map-themes","title":"5.  Map themes","text":"<p>Door op het oogje te klikken onder lagen, kunnen bepaalde kaarten aangevinkt worden om snel een overzicht van de resultaten te krijgen die je wilt bekijken. Op deze manier hoef je niet zelf de juiste lagen aan of uit te vinken voor de resultaten van bepaalde testen, maar wordt dit voor je gedaan. In onderstaande afbeelding staat het oogje met de rode pijl aangegeven.</p> <p></p> <p>Klik hier om naar sqlite checks te gaan. </p>"},{"location":"md_files/4_gebruik_plugin/c_sqlite_checks/","title":"Sqlite checksuitvoeren","text":""},{"location":"md_files/4_gebruik_plugin/c_sqlite_checks/#sqlite-checks","title":"Sqlite checks","text":"<p>Als het model beschikbaar is, kunnen de sqlite testen worden uitgevoerd. De sqlite testen zijn bedoeld om het model te controleren op (potenti\u00eble) fouten in de data en deze te corrigeren waar nodig. Na de sqlite testen is het model klaar om modelstaten aan te passen en om de 0d1d test te draaien (zie 0d1d test uitvoeren, berekeningen uitvoeren en resultaten downloaden).</p> <p>De sqlite checks bestaan uit negen data verificatie testen en drie eenmalige testen. </p>"},{"location":"md_files/4_gebruik_plugin/c_sqlite_checks/#werkwijze-hhnk-3di-plugin","title":"Werkwijze HHNK 3Di plugin","text":"<p>Wanneer in de <code>main</code> van de HHNK toolbox de juiste modellen folder en polder zijn geselecteerd, kunnen de sqlite testen uitgevoerd worden. Volg onderstaande stappen:</p> <ol> <li>Ga naar <code>Checks</code> in de HHNK Toolbox.</li> <li>Kies voor <code>Sqlite checks</code>.</li> </ol> <p></p> <ol> <li>Selecteer in het Model sqlite check venster alle testen. Zorg er ook voor dat data verificatie en eenmalige tests zelf zijn geselecteerd. Het <code>Model sqlite checks</code> venster zou er dan zo uit moeten zien als op onderstaande afbeelding.</li> </ol> <p></p> <ol> <li>Klik op <code>Start tests</code>.</li> <li>QGIS laadt vervolgens de resultaten in onder de sqlite checks in de HHNK toolbox en in <code>Lagen</code>.</li> </ol>"},{"location":"md_files/4_gebruik_plugin/c_sqlite_checks/#uitkomsten-van-de-test","title":"Uitkomsten van de test","text":"<p>De uitkomsten van de testen worden geladen in <code>lagen</code>, maar zijn ook zichtbaar aan de rechterzijde van het scherm bij <code>sqlite check</code> onder <code>checks</code> in de HHNK toolbox. De uitkomsten van de testen kunnen er zo uit zien als op onderstaande afbeelding. </p> <p>Onder 'Lagen' zijn verschillende groepen zichtbaar die elk \u00e9\u00e9n of meerdere kaarten laden als resultaat van een test.  *  gebruikte profielen; Hier zijn de breedte en diepte van de watergangen zichtbaar. Dit is het resultaat van de gebruikte profielen test. * areaal waterberging op streefpeil; Hierin wordt onder andere het verschil oppervlaktewater weergegeven wat het resultaat is van de oppervlaktewater test. * ge\u00efsoleerde watergangen * gestuurde kunstwerken * bodemhoogte kunstwerken * bodemhoogte stuw * ontwateringsdiepte</p>"},{"location":"md_files/4_gebruik_plugin/c_sqlite_checks/#beoordeling-resultaten","title":"Beoordeling resultaten","text":"<p>Voor iedere test moet nagegaan worden of de waarden in het model voldoen. Hieronder wordt uitgelegd waar je bij iedere test op moet letten.</p>"},{"location":"md_files/4_gebruik_plugin/c_sqlite_checks/#data-verificatie-testen","title":"Data verificatie testen","text":"<ul> <li>Test 1: Ondoorlatend oppervlak</li> </ul> <p>Deze test berekent het oppervlak van de polder op basis van de <code>polder_shapefile</code> en het ondoorlatend oppervlak (impervious surface, 0d) in het model. Het resultaat is zichtbaar onder sqlite checks (in het rechter menu in het screenshot hierboven). Het verschil tussen de twee zou niet te groot moeten zijn. Bij de modelbuilder feedback zit een laag die <code>impervious_surface_simple</code> heet. Hierin kun je zien welk deel van de peilgebieden naar welke connection nodes zijn gegaan. Dit zou overeen moeten komen met de peilgebieden. Als dat niet zo is kun je zien waar je oppervlakte moet toevoegen in impervious surface lagen.</p> <ul> <li>Test 2: Gebruikte profielen</li> </ul> <p>Het resultaat van deze test is een weergave van de breedtes en dieptes van watergangen in het model. Deze breedtes en dieptes kunnen gevonden worden onder <code>sqlite checks</code> in de HHNK toolbox. Via de 'visability presets' kies je voor sqlite test: Verschil Oppervlaktewater.</p> <p>De laag helpt bij visuele controle; hebben de watergangen in het model realistische breedte ten opzichte van de luchtfoto of de waterdelen uit de BGT. Wanneer dit niet zo is kunnen profielen aangepast worden. Zie ook hieronder beschreven bij 'Oppervlaktewater berging', een test waarin de berging per peilgebied te vergelijken is.</p> <p>Indien deze waardes niet voldoen, kunnen de breedtes van de watergangen aangepast worden in v2_cross_section_definition tabel. De dieptes van de watergangen kunnen aangepast worden in de v2_cross_section_location tabel door het reference level aan te passen. Let op dat wanneer er te weinig berging (het oppervlakte open water) in een peilgebied aanwezig is in de 1D channels en profielen, dit is aangevuld in de connection nodes. Dus wanneer de watergangen breder gemaakt worden, moet het corresponderende oppervlakte van het berging van de connection nodes afgetrokken worden.</p> <p>Onder 'Lagen' zijn de resultaten van deze test ook zichtbaar.</p> <ul> <li>Test 3: Gestuurde kunstwerken </li> </ul> <p>Deze test selecteert alle gestuurde kunstwerken (uit de v2_culvert, v2_orifice en v2_weir tabellen van het model) op basis van de v2_control_table. Per kunstwerk worden actiewaarden opgevraagd. Per gevonden gestuurd kunstwerk wordt ook relevante informatie uit de HDB database toegevoegd, zoals het streefpeil en minimale en maximale kruinhoogtes. De resultaten van deze test kunnen gevonden worden onder sqlite checks in de HHNK toolbox. Hier kun je klikken op 'Bekijk resultaat' onder het kopje 'Gestuurde kunstwerken'. Er wordt dan een tabel geopend met de naam 'gestuurde_kunstwerken'.</p> <p>Dit gaat voornamelijk om stuwen en gestuurde duikers. Controleer de sturing door te kijken naar   - <code>start_action_value</code>; initiele waarde bij start van het model.   - <code>min_action_value</code>; laagste waarde in de regeling (bijvoorbeeld kruinhoogte bij een stuw)   - <code>max_action_value</code>; hoogste waarde in de regeling   Vergelijk deze met de werking van de kunstwerken volgens de gebiedsregeling.</p> <p>Onder 'Lagen' zijn de resultaten van deze test ook zichtbaar.</p> <ul> <li>Test 4: Bodemhoogte stuw</li> </ul> <p>Deze test vergelijkt de minimale kruinhoogte uit de sturingstabel met de aanliggende watergangen. De resultaten van deze test kunnen gevonden worden onder sqlite checks in de HHNK toolbox. Hier kun je klikken op 'Bekijk resultaat' onder het kopje 'Bodemhoogte stuw'. Als de bodemhoogte van de watergang hoger ligt dan de minimale kruinhoogte moet hier nog iets in worden aangepast door in de <code>v2_cross_section_location</code> tabel het reference_level aan te passen. Deze aanpassingen worden automatisch gegenereerd en ter goedkeuring aan de gebruiker voorgelegd. Deze voorgelegde aanpassingen kun je vinden onder sqlite checks in de HHNK toolbox als je klikt op 'Bekijk voorgestelde aanpassingen' bij het kopje 'Bodemhoogte stuw'. Deze aanpassingen kunnen goedgekeurd worden door te klikken op 'aanvaard aanpassingen'.</p> <ul> <li>Test 5: Geometrie</li> </ul> <p>Deze test controleert of de geometrie van een object in het model correspondeert met de start- of end node in de v2_connection_nodes tabel. Als de verkeerde id's worden gebruikt geeft dit fouten in het model. De resultaten van deze test kunnen gevonden worden onder sqlite checks in de HHNK toolbox. Hier kun je klikken op 'Bekijk resultaat' onder het kopje 'Geometrie'. Pas de ligging of de connection node id van de betreffende kunstwerken aan. Meestal ligt het kunstwerk omgekeerd, dat wil zeggen dat het beginpunt van de lijn op de connection node ligt die als eindpunt is aangegeven (en andersom). Dan is het makkelijker om de node id's van het kunstwerk aan te passen.</p> <ul> <li>Test 6: Bodemhoogte kunstwerken </li> </ul> <p>Deze test controleert of de kruinhoogte of bodemhoogte van een kunstwerk hoger ligt dan de bodemhoogte van aanliggende watergangen. Als dit niet zo is moet dat worden aangepast om met het model te kunnen rekenen. De resultaten van deze test kunnen gevonden worden onder sqlite checks in de HHNK toolbox. Hier kun je klikken op 'Bekijk resultaat' onder het kopje 'Bodemhoogte kunstwerken'. Er wordt dan een tabel geopend met de naam 'bodemhoogte_kunstwerken' waarin alle gevallen worden getoond waar de kruinhoogte of bodemhoogte van een kunstwerk lager ligt dan de bodemhoogte van aanliggende watergangen. De kruinhoogte of bodemhoogte wordt weergegeven door de kolom 'struct_reference_level'. De bodemhoogte van de watergangen wordt weergegeven door de kolom 'cross_reference_level'. Aanpassingen kunnen gedaan worden in v2_culvert, v2_orifice of v2_weir voor het aanpassen van de kruinhoogte of bodemhoogte van een kunstwerk en in v2_cross_section_definition voor een aanpassing in de bodemhoogte van de aanliggende watergang. Als elk van de aanliggende watergangen min of meer dezelfde bodemhoogte hebben is het aannemelijker dat de kruinhoogte van het kunstwerk fout is en dat deze dus moet worden verhoogd. Als \u00e9\u00e9n van de aanliggende watergangen een afwijkende bodemhoogte heeft van de andere aanliggende watergangen waardoor de kruinhoogte van het kunstwerk onder de desbetreffende bodemhoogte van de watergang komt te liggen, is het aannemelijker dat deze watergang een foute bodemhoogte heeft en moet deze worden aangepast.</p> <ul> <li>Test 7: Algemene tests</li> </ul> <p>De algemene tests is een collectie van checks op fouten die ervoor zorgen dat het model niet kan worden opgebouwd of waardoor er niet meer gerekend kan worden. De resultaten van deze test kunnen gevonden worden onder sqlite checks in de HHNK toolbox. Hier kun je klikken op 'Bekijk fouten in model' onder het kopje 'Algemene tests'. In het resultaat wordt onderscheid gemaakt tussen fouten en waarschuwingen. Fouten moeten worden opgelost, waarschuwingen zijn aandachtspunten. In de resultaten wordt omschreven wat het probleem is. Waar nodig kunnen de waardes worden aangepast door naar de bijbehorende tabel te gaan die wordt aangegeven in de table_name kolom.</p> <ul> <li>Test 8: Ge\u00efsoleerde watergangen</li> </ul> <p>Deze test bepaalt welk aandeel van watergangen geen verbinding heeft met het maaiveld (isolated). Het aandeel mag niet te groot zijn omdat neerslag de watergangen dan onvoldoende kan bereiken. De resultaten van deze test kunnen direct bij het kopje 'Ge\u00efsoleerde watergangen' onder de sqlite checks in the HHNK toolbox gevonden worden. Bekijk ook visueel welke watergangen isolated zijn via de v2_channels laag in het model. Klik rechts en selecteer bij stijlen <code>calculation type</code> voor een voorbeeld opmaak. </p>"},{"location":"md_files/4_gebruik_plugin/c_sqlite_checks/#eenmalige-testen","title":"Eenmalige testen","text":"<p>De eenmalige tests zijn er om een aantal randvoorwaarden te controleren. Als geverifieerd is dat hieraan is voldaan, dan hoeven ze niet opnieuw te worden gedraaid. * Test 1: Maximale waarde DEM</p> <p>Als de maximale waarde in de DEM te hoog is, duidt dat meestal op een fout in het bestand (de nodata waarde is waarschijnlijk verkeerd ingevoerd). Deze test berekent deze maximale waarde. Deze maximale waarde kan direct bij het kopje 'Ge\u00efsoleerde watergangen' onder de sqlite checks in the HHNK toolbox gevonden worden. Als er bij staat 'voldoen aan de norm' dan hoeft er niks aangepast te worden. Als dat niet zo is...</p> <ul> <li>Test 2: Ontwateringsdiepte</li> </ul> <p>Deze test controleert of het initi\u00eble waterpeil per polder onder de maaiveldhoogte (DEM) ligt. Het initi\u00eble waterpeil moet voornamelijk onder het oppervlak liggen. Het resultaat van deze test kan gevonden worden onder 'Lagen'. Hier bevindt zich een kaart met de naam 'ontwateringsdiepte'. Deze kaart geeft aan of het peil boven het maaiveld ligt (rood), of het peil net onder het maaiveld ligt (oranje) of dat het peil ruim voldoende onder het maaiveld ligt (groen). Bij grote rode gebieden is het belangrijk om de peilgebiedenkaart te controleren. Als hier fouten in zitten is het verstandig het model opnieuw op te bouwen aangezien het streefpeil wordt gebruikt voor aannames voor kunstwerken en profielen.</p> <ul> <li>Test 3: Oppervlaktewater berging</li> </ul> <p>Deze test controleert per peilgebied het oppervlakte open water in het model ten opzichte van de waterdelen in de BGT.. Dit totaal is opgebouwd uit de <code>storage_area</code> uit de <code>v2_connection_nodes</code> tabel opgeteld bij het oppervlak van de watergangen (uitgelezen uit de <code>channel_surface_from_profiles</code>) shapefile. Vervolgens worden de    totalen per peilgebied vergeleken met diezelfde totalen uit de DAMO database waterdelen (bron BGT). De resultaten geven een indicatie van over- of onderschatting van het oppervlakte open water in het model. Het resultaat van deze test kan eenvoudig weergegeven worden door gebruik te maken van map themes. Ideaal gezien zouden de afwijkingen tussen het model en de DAMO database zo klein mogelijk moeten zijn.  </p> <p>Deze test is goed samen te bekijken met de breedte van watergangen zoals eerder beschreven onder 'Gebruikte profielen'. Bij grote verschillen kan dit aan incomplete waterdelen liggen of aan verkeerde profielen. Controleer de inputdata goed en bouw eventueel het model opnieuw op. Voor individuele plassen of meren die niet goed in het model zijn gekomen kan de storage area in enkele connection nodes worden opgehoogd.</p> <p>Let op dat de <code>channel_surface_from_profiles</code> een datachecker laag is. Het oppervlakte open water in het model wordt daarmee niet bijgewerkt als er aanpassingen gedaan worden aan de profielen van de watergangen. </p> <p>Als het model is aangepast zodat er geen fouten meer in de sqlite schematisatie zitten, kan de eerste stap richting testberekeningen worden gezet door de modelstaat aan te passen.</p> <p>&lt;!---  LN:notitie voor mezelf: link map themes kloppend maken*</p>"},{"location":"md_files/4_gebruik_plugin/d_modelstaat_aanpassen/","title":"Modelstaten aanpassen","text":""},{"location":"md_files/4_gebruik_plugin/d_modelstaat_aanpassen/#modelstaten","title":"Modelstaten","text":"<p>De modelstaten zijn afgeleide modellen van het basismodel, waarin vastgestelde initi\u00eble settings worden meegegeven bij het aanmaken van het model (o.a. GHG/GGG/GLG). De mogelijke modelstaten worden uit een Excel-file gelezen. Dit Excel document moet in de volgende map staan: <code>{Modellenmap}\\Polder_X\\02_schematisation\\model_settings.xlsx</code>. In de tabel hieronder zijn voor de verschillende modelstaten de benodigde gegevens te zien. </p> <p></p> <p>Op de plek waar <code>Naam polder</code> staat, komt de naam van polder, bijvoorbeeld <code>callantsoog_0d1d_test</code>. Als er andere namen voor rasters worden gebruikt, kunnen deze uiteraard ingevoerd worden in de Excel, zolang ze corresponderen met de namen van de rasters die in <code>..\\02_schematisation_00_basis\\rasters</code> zijn opgeslagen. </p> <p>De algemene modelinstellingen (tijdstap, gridgrootte etc) settings worden uitgelezen uit een <code>02_schematisation\\model_settings_default.xlsx</code>. Indien deze Excel niet aanwezig is kan er geen modelstaat worden geiniti\u00eberd. Als er nog geen Excel aanwezig is in het voorgenoemde pad, zie brongegevens en dan <code>9. modelinstellingen</code> om de opbouw van de Excel te bekijken.</p> <p>Volg de volgende stappen voor het aanmaken of splitsen van het basismodel in \u00e9\u00e9n of meerdere modelstaten:</p> <ol> <li> <p>Controleer de gegevens in de hierboven genoemde Excel-bestanden.</p> </li> <li> <p>Klik op <code>Model splitten en uploaden</code> (4).  </p> </li> <li> <p>Hierna wordt het volgende scherm weergegeven: </p> </li> </ol> <p>Afhankelijk van de 'model_settings.xlsx' volgen de verschillende modelstaten (zie vak 1).  De modelsplitter kan vervolgens de modelstaten genereren, zoals in het vak met de <code>1</code> is te zien. De beschikbare modelstaten staan bij default onder <code>Enabled</code>. De niet gewenste modelstaten sleep je naar <code>Disabled</code>. 4. Druk op check sqlite om je schematisatie te controleren. (niet in afbeelding).  5. Druk op <code>Run: Model Splitter</code> (2) om de modelsta(a)t(en) die onder <code>Enabled</code> staan te initi\u00ebren. 6. Geef een <code>Commit message</code> mee (3). 7. Upload de geselecteerde modelstaten door op <code>Upload modelversion(s)</code> te klikken (4)</p> <p>Na het genereren van de modelstaten kunnen (test)berekeningen uitgevoerd worden. Klik hier om naar de beschrijving van het uitvoeren van (test)berekeningen te gaan.</p>"},{"location":"md_files/4_gebruik_plugin/e_berekeningen_uitvoeren/","title":"Berekeningen uitvoeren","text":""},{"location":"md_files/4_gebruik_plugin/e_berekeningen_uitvoeren/#berekeningen-uitvoeren","title":"Berekeningen uitvoeren","text":"<p>Nadat de modelstaten zijn gemaakt, kunnen de (test)berekeningen uitgevoerd worden. Hieronder wordt toegelicht hoe een (test)berekening gestart kan worden: 1. Voer je Lizard API key (5) en 3Di API key (6) in. Indien je nog geen API key(s) hebt, klik hier voor een Lizard API key en klik hier voor een 3Di API key.</p> <p></p> <ol> <li>Klik op <code>Open Jupyter Notebook Server</code> (7) om het notebook te openen voor het starten van de (test)berekeningen. Je wordt doorverwezen naar een lokale server en het volgende scherm komt tevoorschijn:</li> </ol> <p></p> <ol> <li>Om een simulatie te starten kun je gebruik maken van  <code>01_calculation_gui</code>. Door te dubbelklikken op de nieuwste versie, word je doorgestuurd naar het volgende scherm:</li> </ol> <p></p> <ol> <li>Doorloop nu de eerste stap door ergens te klikken in het veld met <code>#Add qgis plugin deps to syspath and load notebook_data</code> en vervolgens <code>crtl + enter</code>. Dit levert het onderstaande invoerscherm op:</li> </ol> <p></p> <ol> <li> <p>Loop vervolgens stap voor stap de volgende punten af:</p> </li> <li> <p><code>Login with API keys</code>: voer hier de Lizard en 3Di API keys in (deze zijn al ingevuld als je ze in QGIS goed hebt staan).</p> </li> <li><code>Search for schematisation on 3Di</code>: type de naam van het model in waar je een berekening mee wil maken en klik vervolgens op <code>Search</code>.     LET OP: om ervoor te zorgen dat de simulatienaam herleidbaar blijft voor nadere analyse, is het noodzakelijk om de gehele naam van de schematisatie te gebruiken. Voorbeeld: met de zoekterm 'Cal' zal het model 'Callantsoog' gevonden worden, maar wordt in de simulatienaam (7) alleen 'Cal' gebruikt. Typ daarom de gehele naam van het door te rekenen model in.</li> <li><code>Select schematisation and model</code>: kies hier de modelstaat onder <code>Schematisation</code> en kies bij <code>Revision</code> voor de door te rekenen revisie. Het <code>3Di model</code> wordt automatisch ingevoerd, waarna bij <code>Organisation</code> gekozen kan worden voor de organisatie waar de simulatie gedraaid moet worden.</li> <li><code>Select rain event</code>: maak hier een keuze voor de neerslagsituatie die bij de modelstaat hoort.</li> <li><code>Select output folder/name</code>: kies hier de <code>Sub folder</code> waar de resultaten weggeschreven moeten worden.</li> <li><code>Select settings to include</code>: deze stap geeft de mogelijkheid om een aantal opties aan te vinken voor de naverwerking van de resultaten: <ul> <li>Basic processing(*): stuur je resultaten naar Lizard en maakt een basisresultatenbestand zoals waterdiepte;</li> <li>Damage processing(*): voegt schadeberekening toe aan resultaten in Lizard (met behulp van standaard HHNK-instellingen);</li> <li>Arrival processing: voegt aankomsttijd toe aan resultaten in Lizard;</li> <li>Structure control: voegt sturing aan de berekening toe, aan te raden wanneer individuele klimaatsommen gedraaid worden; </li> <li>Laterals: voegt lateralen toe aan de berekening vanuit de sqlite-database, laat aan staan;</li> <li>Aggregation netcdf: voegt aggregatie instellingen uit de sqlite-database toe aan de berekening indien beschikbaar</li> <li>initial wlvl 2d: selecteert initial water level raster file om mee te nemen in de berekening</li> </ul> </li> <li><code>Start simulation</code>: de simulatienaam wordt automatisch gegenereerd op basis van de schematisatie die gebruikt wordt. Om de berekening te kunnen starten, moet eerst een simulatie aangemaakt worden middels de <code>Create simulation</code> knop. Als dat is gelukt, kleurt de knop <code>Start simulation</code> groen en kan de simulatie aangezet worden.</li> </ol> <p>* Lizard abonnement en opslag nodig. Niet nodig voor vervolg BWN werkwijze dus kan uitgelaten worden. </p> <p>Als je meerdere klimaatsommen wil doorrekenen, kun je ervoor kiezen om in plaats van de tab <code>single calculation</code>, de tab <code>batch calculation</code> te gebruiken en de scenario's te kiezen welke doorgerekend moeten worden. </p> <p></p> <p>Zoek opnieuw het gewenste model via stappen 1, 2 en 3. Onder 4. is het mogelijk het juiste model, revisie en benodigde 2D waterstand-rasters bij de juiste initi\u00eble condities (gXg) te selecteren. Standaard worden de resultaten opgeslagen onder <code>batch results</code>. Voeg eventueel een eigen map of kenmerk aan de simulatie toe (onder 7) om meerdere klimaat-batches uit elkaar te houden. Met de knop <code>check input</code> wordt een overzicht gemaakt van de berekeningen. Controleer deze en klik vervolgens op <code>start batch simulation</code>.</p> <p>Klik hier om naar de toelichting van het downloaden van de simulaties te gaan.</p>"},{"location":"md_files/4_gebruik_plugin/f_downloaden_resultaten/","title":"Resultaten downloaden","text":""},{"location":"md_files/4_gebruik_plugin/f_downloaden_resultaten/#resultaten-downloaden","title":"Resultaten downloaden","text":"<p>Naast het starten van simulaties, is het downloaden van de resultaten van de (test)berekeningen mogelijk middels een notebook. Hieronder is toegelicht hoe dat in zijn werk gaat:</p> <ol> <li>Om een simulatie te downloaden, kun je het beste gebruik maken van de meest recente versie van <code>02_download_gui</code>. Door te dubbelklikken op de nieuwste versie, word je doorgestuurd naar het volgende scherm:</li> </ol> <p></p> <ol> <li>Doorloop nu de eerste stap door ergens te klikken in het veld met <code>#Add qgis plugin deps to syspath and load notebook_data</code> en vervolgens <code>crtl + enter</code>. Dit levert het onderstaande invoerscherm op:</li> </ol> <p></p> <ol> <li> <p>Loop vervolgens stap voor stap de volgende punten af:</p> </li> <li> <p><code>Login with API keys</code>: voer hier de Lizard en 3Di API key in (deze zijn al ingevuld als je ze in QGIS goed hebt staan).</p> </li> <li><code>Search for simulation on lizard</code>: type de naam van de te downloaden simulatie in en klik vervolgens op <code>Search 3Di</code>.</li> <li><code>Select simulation results</code>: hier komt een overzicht te staan met de simulaties die overeenkomen met de zoekterm ingevoerd in stap 2. Selecteer de de simulatie of simulaties die je wil downloaden.</li> <li> <p><code>Select filetype</code>: selecteer hier welke <code>File results</code> en <code>Raster results</code> gedownload moeten worden.  <code>File results</code>: </p> <ul> <li>raw 3Di output (.nc): bevat de resultaten van de simulatie (noodzakelijk) </li> <li>aggregated 3Di output (.nc): bevat verschillende tijdstappen van de resultaten van de simulatie (noodzakelijk) </li> <li>grid administration (.h5): bevat het rekenrooster waarmee de ruwe 3Di resultaten gekoppeld worden aan de schematisatie </li> <li>calculation core logging (.txt): bevat verschillende bestanden met informatie over de simulatie </li> </ul> <p><code>Raster results*</code>:   * Max water level: dit raster bevat de maximale waterstand (m NAP) over de gehele simulatieduur    * Max water depth: dit raster bevat de maximale waterdieptes (m) over de gehele simulatieduur    * Total damage: dit raster bevat de berekende schade als gevolg van inundatie    * Water level at selected time: dit raster bevat de waterstand op een gekozen tijdstip    * Water depth at selected time: dit raster bevat de waterdiepte op een gekozen tijdstip    * Depth (damage calc): het waterdiepteraster gebruikt in de schadeberekening (algemeen AHN ipv model DEM).</p> <p>* Raster results zijn alleen beschikbaar als de resultaten ook in lizard zijn verwerkt. Het is ook mogelijk om vanuit de .nc deze rasters te maken.</p> </li> <li> <p><code>Select output folder/name</code>: kies hier de <code>Sub folder</code> waar de resultaten weggeschreven moeten worden.</p> </li> <li> <p><code>Download selected</code>: hier kun je kiezen uit een aantal opties:       a. Timestep raster: hier kan gekozen worden om voor een bepaald tijdstip een raster te downloaden. Als hier niets wordt gekozen, zal de laatste tijdstap worden gedownload         b. Resolution (m): voer hier de gewenste resolutie van het te downloaden raster in </p> <p>Klik vervolgens op <code>Download</code> om de resultaten te downloaden.    7. <code>Download klimaatsommen</code>: deze wordt alleen gebruikt voor het downloaden van klimaatsommen. Bij deze stap zijn twee invoervelden:    a. DEM path: laat deze staan als je het DEM als extent wil gebruiken. Indien je een eigen extent wil gebruiken, vink <code>Use custom extent</code> aan en voer de co\u00f6rdinaten van de gewenste extent in.    b. Naam van de batch folder (maak aan als niet bestaat!): kies hier de folder waar de resultaten weggeschreven moeten worden. Bijvoorbeeld: als je de resultaten van de <code>ggg</code> situatie wil downloaden, kies je hier ook voor de batch folder <code>ggg</code>.    Klik vervolgens op <code>Download batch</code> om een batch te downloaden.</p> </li> </ol> <p>Na het downloaden van resultaten kunnen deze gebruikt worden voor de 0d1d test.</p>"},{"location":"md_files/4_gebruik_plugin/g_0d1d_test/","title":"0d1d test uitvoeren","text":""},{"location":"md_files/4_gebruik_plugin/g_0d1d_test/#0d1d-test","title":"0d1d test","text":"<p>Als de sqlite tests zijn uitgevoerd, eventueel aanpassingen zijn gemaakt en het model is opgebouwd voor rekenen met 3Di, is het tijd om de 0d1d test uit te voeren. Voor deze toets is een test bui ontworpen om het 1d watersysteem in het model te controleren. De test bui begint met een droge dag, vijf dagen neerslag gelijk aan de afvoernorm (in de meeste polders is dit 14,4 mm/dag) en dan twee dagen droog, zoals in onderstaande afbeelding is weergegeven. Deze bui is zo ontworpen dat we een aantal eigenschappen van het watersysteem kunnen toetsen:</p> <ul> <li>streefpeil handhaving: blijven waterpeilen constant tijdens de droge dag?</li> <li>stationaire afvoer: stabiliseert het peil en de afvoer na de 5 dagen neerslag?</li> <li>herstel streefpeil: herstelt het streefpeil na de natte periode?</li> </ul> <p></p>"},{"location":"md_files/4_gebruik_plugin/g_0d1d_test/#werkwijze-hhnk-3di-plugin","title":"Werkwijze HHNK 3Di plugin","text":"<p>Om deze test uit te kunnen voeren, is een 0d1d model noodzakelijk. Indien er nog geen 0d1d model is gemaakt, kun je hier lezen hoe een 0d1d model gemaakt kan worden.</p> <p>In de 0d1d modelstaat zitten alleen watergangen met de bijbehorende kunstwerken en aan de watergangen zijn afvoervlakken verbonden. Na het succesvol uploaden en aanmaken van het 3Di model kan via de calculation gui op de Jupyter notebook server de berekening worden gestart. Selecteer het juiste model en start de 0d1d test.</p> <p>Download na de berekening de resultaten met de download gui. Kies voor raw output en grid administration en zorg dat de resultaten in de map 0d1d_results terecht komen.</p> <p>Om het resultaat in de HHNK Toolbox te laden kies je onder checks voor 0d1d tests. Selecteer daaronder de revisie van de gemaakte berekening en klik op Begin tests. Er worden hiermee een aantal kaartlagen aan het project toegevoegd in een groep met de naam: 05. Hydraulische Toets en 0d1d tests [polder revisie model]. De afbeelding hieronder geeft een beeld hoe dat eruit kan zien.</p> <p></p>"},{"location":"md_files/4_gebruik_plugin/g_0d1d_test/#uitkomsten-van-de-test","title":"Uitkomsten van de test","text":"<p>De 0d1d test genereert een aantal resultaten die inzicht geven in de werking van het systeem tijdens een stationaire bui. </p> <p>Hydraulische test (Kaart 1: Verhang kunstwerken): Deze test filtert de afvoer en waterstanden aan het einde van de neerslag uit de resultaten. Voor de watergangen en kunstwerken wordt het volgende bepaald: * Het debiet in m3/s (q) * Het verhang (cm/km) * De stroomsnelheid in m/s (u)</p> <p>Voor 1d waterstandpunten worden resultaten gefilterd op vaste tijdstappen. De tijdstappen zijn: * Aan het begin van de som * Aan het begin van de regen * Een dag voor het einde van de regen * Aan het einde van de regen * Aan het einde van de som</p> <p>Op basis van deze informatie worden de volgende waarden bepaald (in centimeters): * Het verschil in waterstand tussen het begin van de som en het begin van de regen (Kaart 2: Uitzakking initieel peil). Dit wordt gedaan om te controleren of peilgebieden niet lekken. * Het verschil in waterstand tussen het begin van de regen en het einde van de regen (Kaart 3: Streefpeilhandhaving). Dit wordt gedaan om te controleren of berekende waterstandstijgingen acceptabel zijn in relatie tot de drooglegging. * Het verschil in waterstand tussen het einde van de regen en een dag daarvoor (Kaart 5: Stabiele waterstandsverhoging einde regen). Dit wordt gedaan om te controleren of het systeem zich in een stationaire situatie bevindt. * Het verschil in waterstand tussen het einde van de regen en het einde van de som (Kaart 6: Herstel streefpeil). Dit wordt gedaan om te controleren of het watersysteem weer terug gaat naar het streefpeil.</p>"},{"location":"md_files/4_gebruik_plugin/g_0d1d_test/#beoordeling-resultaten","title":"Beoordeling resultaten","text":"<p>De resultaten die de 0d1d tests genereert, moeten gecontroleerd worden om te bevestigen dat het model naar behoren werkt. Gebruik de verschillende kaarten vooral om de plausibiliteit van het functioneren van het watersysteem in het model te controleren. Voeren de peilgebieden af zoals je verwacht, bijvoorbeeld via de watergangen die primair zijn. Controleer de stroming over de belangrijkste kunstwerken. Bespreek opvallendheden met de regioadviseurs van HHNK.</p> <p>Om te beoordelen of het watersysteem hydraulisch functioneert, is hieronder per onderdeel beschreven welke waarden/uitkomsten per onderdeel realistisch zijn (Kaart 1: Verhang kunstwerken) * Het debiet in m3/s (q) Controleer of het afvoerverloop overeenkomt met de verwachting. Bespreek dit in ieder geval met de watersysteem adviseurs van HHNK. * Het verhang (cm/km) Het verhang in een correct gedimensioneerde watergang ligt onder de 2-4 cm/km. Zodra het verhang boven de 4 cm/km ligt, is bijvoorbeeld de watergang (te) krap gedimensioneerd of de gemaalcapaciteit (te) laag. Watergangen met een hoog verhang kunnen op een schematisatiefout wijzen * De stroomsnelheid in m/s (u) Watergangen of kunstwerken met een heel hoge stroomsnelheid (&gt;0.5 m/s) kunnen wijzen op een schematisatiefout. * Het verschil in waterstand tussen het begin van de som en het begin van de regen (Kaart 2: Uitzakking initieel peil) De waterstand zou tot aan het begin van de neerslagsituatie niet meer dan 2 cm moeten stijgen of uitzakken. Indien de waterstand stijgt of zakt, zit er mogelijk een lek in het model. Dit zou een gemaal met een verkeerd aanslagpeil kunnen zijn of een stuw op de grens met een ander peilgebied staat te laag, waardoor het naar een ander peilgebied 'lekt'  Het verschil in waterstand tussen het begin van de regen en het einde van de regen (Kaart 3: Streefpeilhandhaving) Gedurende de neerslagsituatie is het normaal dat de waterstand in de watergangen stijgt. Afhankelijk van de drooglegging, het type gebied, is 15 tot 25 cm stijging een normale waarde. In veengebieden kunnen peilstijgingen groter dan 25 cm al voor problemen zorgen, terwijl in zandgebieden grotere peilstijgingen (&gt;25 cm) zonder directe overlast mogelijk zijn. Bij grotere peilstijgingen moet de gebruikte data of het 1d systeem gecontroleerd worden op fouten. * Het verschil in waterstand tussen het einde van de regen en een dag daarvoor (Kaart 5: Stabiele waterstandsverhoging einde regen) In de laatste dag van de neerslagsituatie zou de waterstand niet meer verder dan 1 cm moeten stijgen, omdat er een stationaire situatie is bereikt. Als de waterstand niet stabiel is kan dit opnieuw wijzen op een lekkend peilgebied of een dat een waterloop niet kan afvoeren. In grote polders kan het nodig zijn de neerslagperiode langer te maken (via de calculaiton-gui), de test detecteert het einde van de periode automatisch. * Het verschil in waterstand tussen het begin en het einde van de som (Kaart 6: Herstel streefpeil) In de laatste dag van de simulatie, waar geen regen meer valt, zou de waterstand weer moeten zakken naar het streefpeil (of mogelijk nog wat lager door de afslagpeilen van de gemalen). Wanneer de waterstand nog meer dan 2 cm boven het streefpeil ligt, zit er mogelijk een fout in het model. Mogelijke oorzaak is beperkte afvoermogelijkheden bij kunstwerken.*</p> <p>Als er voldoende vertrouwen in de uitkomsten van het model is, geldt het resultaat van de laatste 0d1d test als hydraulische toets. </p> <p>Om klimaatsommen te maken is het nodig de Banklevel test uit te voeren.</p>"},{"location":"md_files/4_gebruik_plugin/h_banklevel_test/","title":"Bank level test uitvoeren","text":""},{"location":"md_files/4_gebruik_plugin/h_banklevel_test/#banklevel-test","title":"Banklevel test","text":"<p>Als het 0d1d model is goedgekeurd (zie 0d1d test), kan deze test worden gedraaid. De bank levels test is grotendeels bedoeld om het model klaar te maken voor 3Di simulaties waarbij uitwisseling plaatsvindt tussen het watersysteem (1d) en het maaiveld (2d). Als deze test is voltooid kan de 1d2d test worden uitgevoerd.</p> <p>In de modelbuilder worden bank levels ingesteld op 10 cm boven streefpeil, tenzij de watergang binnen 40 meter van een levee ligt. Dan wordt de bank level gelijk aan de levee. Dit is een zeer conservatieve manier om lekken te voorkomen, omdat de modelbuilder nog niet weet waar de 1d2d verbindingen liggen. Het risico bestaat echter dat bank levels onnodig hoog zijn waardoor water niet niet van maaiveld kan afstromen. </p>"},{"location":"md_files/4_gebruik_plugin/h_banklevel_test/#kruising-1d2d-verbinding-en-levee","title":"Kruising 1d2d verbinding en levee","text":"<p>In de Banklevel test wordt nogmaals gecontroleerd of de bank levels hoog genoeg liggen, maar ook of ze lager kunnen. Hierbij wordt gebruik gemaakt van de 3Di gridbuilder, zodat duidelijk is waar de 1d2d verbindingen liggen. De bank levels worden alleen aangepast wanneer een 1d2d verbinding van een watergang de levee kruist. </p>"},{"location":"md_files/4_gebruik_plugin/h_banklevel_test/#peilscheidend-kunstwerk-binnen-peilgebied","title":"Peilscheidend kunstwerk binnen peilgebied","text":"<p>In de schematisatie worden kunstwerken naar het uiteinde van een waterloop verschoven als hierdoor zeer korte segmenten kunnen worden vermeden (max 5 m). Hierdoor kan het gebeuren dat het kunstwerk niet meer op de peilgrens ligt. De banklevel test controleert dit ook en voegd manholes toe waardoor water niet via 2D langs het peilscheidende kunstwerk kan stromen.</p> <p>Nb. In 2023 is een update doorgevoerd in 3Di waarbij de hoogte van de levee (inmiddels obstacles genoemd) de bank level overschrijft wanneer de 1d2d verbinding een obstacle kruist. De methode is echter nog niet waterdicht, dus is deze banklevel test voorlopig nog nodig. Ook omdat deze ook controleert of peilscheidende kunstwerken binnen een peilgebied vallen.</p>"},{"location":"md_files/4_gebruik_plugin/h_banklevel_test/#werkwijze-hhnk-3di-plugin","title":"Werkwijze HHNK 3Di plugin","text":"<p>Het draaien van de bank levels test kan worden uitgevoerd met enkel het sqlite-model. Selecteer in de 'main' van de HHNK toolbox de juiste modellen folder en polder en volg onderstaande stappen:</p> <ol> <li>Ga naar <code>Checks</code> in de HHNK Toolbox.</li> <li>Kies voor <code>Bank levels</code> en klik op <code>Begin tests</code>.</li> </ol> <p></p> <p>Na enige tijd verschijnt een scherm met daarin voorgestelde aanpassingen. Voer deze niet meteen uit. Het is mogelijk om op de kaart de resultaten te bekijken om te zien of je dit herkend. Ook kun je een lijst maken met connection nodes waar je bewust geen manholes wilt. Deze kun je invoeren in het scherm en worden overgeslagen.</p> <ol> <li>QGIS laadt vervolgens de resultaten in 'Lagen' als 03.BanklevelCheck.</li> </ol> <p></p>"},{"location":"md_files/4_gebruik_plugin/h_banklevel_test/#uitkomsten-van-de-test","title":"Uitkomsten van de test","text":"<p>Als uitkomst van deze test worden drie groepen ingeladen.  * De eerste laag heet <code>Stroming 1d2d flowlines</code> en geeft de stromingen tussen het maaiveld en de watergangen weer. In de attributen tabel van deze groep kan in de kolom type gezien worden of de 1d2d verbinding een levee kruist of niet. In het geval dat de 1d2d verbinding een levee kruist kan de levee hoogte gezien worden in de kolom 'levee_height'. * De tweede laag heet <code>Stroming 1d2d watergangen</code> en geeft de watergangen weer. In de attributentabel van deze groep kan in de kolom <code>bank_level_source</code> gezien worden of dat de banklevel gelijk wordt aan het streefpeil + 10cm of dat de banklevel de hoogte van de grootste levee hoogte binnen 40 meter krijgt afhankelijk van het kruisen van een 1d2d verbinding met een levee of niet. De nieuwe banklevel kan gezien worden in de kolom new_bank_level. </p>"},{"location":"md_files/4_gebruik_plugin/h_banklevel_test/#beoordeling-resultaten","title":"Beoordeling resultaten","text":"<p>Oranje stippen en ruiten zijn voorgestelde veranderingen die nog niet in de sqlite staan. De stippen zijn manholes die toegevoegd worden. Inzoomen geeft weer waarom er een manhole toegevoegd wordt. De ruiten zijn de cross section locations die een nieuwe banklevel krijgen. De labeling geeft aan hoeveel meter de banklevel verandert. In dit voorbeeld dus vier keer 0.98m lagere banklevel. Oranje lijnelementen zijn plekken waar er wel een kruising is met een fixeddrainagelevelarea maar niet met een levee. Controleer hier of het terecht is dat de banklevel op streefpeil + 10cm gezet moet worden of juist hoger wilt hebben. Deze specifieke aanpassing is geen scripting voor. De makkelijkste oplossing hier is een levee intekenen met de gewenste hoogte als deze ontbreekt.</p> <p>Als je geen manholes wilt op bepaalde connection nodes, maak dan een lijst aan van de connection node id's. Deze kunnen meegegeven worden in het scherm zodat ze overgeslagen worden.</p> <p>Wanneer je op aanpassingen uitvoeren klikt wordt het model aangepast. Pas opnieuw de modelstaat aan, upload het model en ga verder naar de 1d2d test.</p>"},{"location":"md_files/4_gebruik_plugin/i_1d2d_test/","title":"1d2d test uitvoeren","text":""},{"location":"md_files/4_gebruik_plugin/i_1d2d_test/#1d2d-test","title":"1d2d test","text":"<p>Wanneer de bank levels zijn bijgewerkt en waar nodig manholes zijn toegevoegd kan de 1d2d test worden gedraaid. Dit houdt in dat er opnieuw een test bui wordt gesimuleerd met 3Di.  De test bui begint met een uur droog, dan twee uur regen (17,75 mm/uur), dan 12 uur droog (zie figuur hieronder). Het simuleert daarmee een relatief hevige neerslag waarbij enige wateroverlast is te verwachten. In het 1d2d-test model is infiltratie uitgeschakeld.</p> <p></p> <p>Het doel van deze test is het controleren van stromingen in het watersyteem en over maaiveld en oplossen waar dit onrealistisch is. De plug-in zet de testresultaten om in een aantal kaarten die visueel kunnen worden gecontroleerd. Als de 1d2d test resultaten goedgekeurd zijn is het model klaar voor klimaarsommen.</p>"},{"location":"md_files/4_gebruik_plugin/i_1d2d_test/#werkwijze-hhnk-3di-plugin","title":"Werkwijze HHNK 3Di plugin","text":"<p>Deze test werkt alleen wanneer het model in de 1d2d-test-staat is ingesteld (zie Model staat aanpassen).</p> <p>In het model zijn nu als het goed is de channels connected en is de infiltratie uitgeschakeld. Na het succesvol uploaden en aanmaken van het 3Di model kan via de berekening worden gestart. Selecteer het juiste model en start de 1d2d test.  Download de resultaten. Kies voor raw output en grid administration en zorg dat de resultaten in de map 1d2d_results terecht komen. </p> <p>Om het resultaat in de HHNK Toolbox te laden kies je onder checks voor 1d2d tests. Selecteer daaronder de revisie van de gemaakte berekening en klik op <code>Begin tests</code>. Er worden hiermee een aantal kaartlagen aan het project toegevoegd in een groep met de naam: 07. Testprotocol 1d2d tests [polder revisie model]. De afbeelding hieronder geeft een beeld hoe dat eruit kan zien.</p> <p></p>"},{"location":"md_files/4_gebruik_plugin/i_1d2d_test/#uitkomsten-van-de-test","title":"Uitkomsten van de test","text":"<p>De ingeladen kaarten worden gebruikt om eventuele onrealistische resultaten te vinden die worden veroorzaakt door fouten in het model. Hiervoor worden drie typen kaarten ingeladen. </p> <ul> <li>Kaart 1: Debiet</li> </ul> <p>Deze functie leest alle debieten en richting in uit het 3Di resultaat op drie tijdstappen;   - T1: het begin van de regen   - T3: het einde van de regen   - T15: het einde van de som</p> <p>Vervolgens wordt gekeken naar het type van de lijn (1D2D of 2D). Aan de hand hiervan worden de lagen opgemaakt.</p> <ul> <li>Kaart 2: Waterdiepte</li> </ul> <p>Op basis van de DEM en de waterstand op de hierboven genoemde tijdstappen is de waterdiepte bepaald.  </p> <ul> <li>Kaart 3: Waterstanden </li> </ul> <p>De waterstanden op de hierboven genoemde tijdstappen op basis van het 3Di resultaat. </p>"},{"location":"md_files/4_gebruik_plugin/i_1d2d_test/#beoordeling-resultaten","title":"Beoordeling resultaten","text":"<p>Gebruik de kaarten en eventueel de ruwe 3Di resultaten om de het model te controleren. Let hierbij op de volgende zaken:</p> <ul> <li>Stroming vooraf</li> </ul> <p>De kaarten stroming vooraf en de waterstand- en waterdieptekaarten aan het begin van de berekeningen (T1) zouden geen stroming of ontstaan van inundatie moeten laten zien. Dit zou namelijk betekenen dat er zonder dat er neerslag valt, water uit het watersysteem het maaiveld op stroomt.</p> <ul> <li>Afvoerpatroon bij neerslag</li> </ul> <p>De kaarten stroming einde piek van de waterstanden en waterdieptes op T2 geven aan waar stroming is na de bui. Controleer of het afvoerpatroon vergelijkbaar is met de verwachting uit de 0d1d test. </p> <ul> <li>Stroming rond kunstwerken</li> </ul> <p>Bij de 1d2d berekening kan stroming optreden rondom kunstwerken via de 1d2d verbindingen. Het is moeilijk dit volledig te voorkomen, we hebben hier nog geen goede werkwijze voor. De locaties zijn wel te herkennen met de kaartlaag 1d2d stroming einde piek. Voor belangrijke kunstwerken, bijvoorbeeld op peilgrenzen, onder wegen door of die zijn aangemerkt als belangrijk, is het goed deze langs te lopen. Lokaal kan gekozen worden om roosterverfijning en obstacles of manholes te gebruiken om dit te voorkomen.</p> <ul> <li>Stroming over obstacles</li> </ul> <p>In de modellen zijn obstacles geplaatst op alle peilgrenzen en soms over hoger gelegen hoofdwegen. In de stromingskaarten wordt stroming over deze obstacles extra rood gemarkeerd. Peilgrenzen zijn niet per s\u00e9 altijd waterkeringen en het is dus niet altijd fout als er water over peilgrenzen stroomt, maar het is wel goed deze locaties te controleren. </p> <ul> <li>Stroming rondom waterbergingen</li> </ul> <p>In de modellen en brongegevens wordt op de begrenzing van (water)bergingsgebieden niet altijd een obstacle toegevoegd. Stroomt water in of uit de bergingsgebieden via het maaiveld, controleer dan of dit realistisch is en voeg eventueel een obstacle en roosterverfijning toe.</p> <ul> <li>Inundatie einde berekening</li> </ul> <p>De waterdieptekaart aan het einde van de berekening kan je helpen locaties te vinden waar neerslag niet kan afstromen richting het watersysteem. Pas hier mogelijk de bank levels verder aan of zorg voor roosterverfijning. In stedelijk gebied blijft neerslag vaak in tuinen of op wegen staan als gevolg van het ontbreken van riolering. Wees hier kritisch op bij de interpretatie van het resultaat.</p> <p>Als je tevreden bent met het model kun je verder met de klimaatsommen. Vergeet niet aanpassingen op te slaan en opnieuw via modestaat aanpassen de modellen te uploaden. </p>"},{"location":"md_files/4_gebruik_plugin/j_werkwijze_klimaatsommen/","title":"Klimaatsommen uitvoeren","text":""},{"location":"md_files/4_gebruik_plugin/j_werkwijze_klimaatsommen/#klimaatsommen","title":"Klimaatsommen","text":"<p>Als alle testen succesvol zijn afgerond, kunnen de klimaatsommen gesimuleerd worden. Voor meer informatie over de klimaatsommen, klik hier.</p>"},{"location":"md_files/4_gebruik_plugin/j_werkwijze_klimaatsommen/#werkwijze-hhnk-3di-plugin","title":"Werkwijze HHNK 3Di plugin","text":"<p>Voor het simuleren van de klimaatsommen, is het noodzakelijk om tenminste een GLG, GGG en GHG model te hebben. Indien deze niet aanwezig zijn, kun je deze via modelstaat aanpassen aanmaken.</p> <p>Zodra de modellen met grondwaterconditie gemaakt zijn, kunnen via berekeningen uitvoeren de klimaatsommen gestart worden. Klimaatsommen zijn alleen via de batch calculation te draaien. Download de resultaten via de <code>Download batch</code>-knop.</p> <p>Na het downloaden van de resultaten moeten nog een aantal nabewerkingen worden gedaan om de kaarten in de plugin te laden. Dit gebeurt via een notebook. Kies in het notebook voor <code>03_nabewerking_klimaatsommen</code>. Dit geeft het onderstaande scherm:</p> <p></p> <ol> <li>Gebruik ctrl + enter om het veld onder <code>Nabewerking Klimaatsommen</code> te doorlopen. </li> <li> <p>De volgende stap bevindt zich onder <code>Selectie neerslagzone en dem</code>. Draai het veld met ctrl + enter. Dit levert het een plaatje op met de ligging van de polder in het beheergebied:</p> <p> Kies bij <code>Selecteer een map met batch resultaten</code> de map waar de downloads zijn weggeschreven. Kies bij <code>Selecteer een neerslagzone</code> de neerslagzone die je wil gebruiken. In bovenstaand afbeelding is de keuze tussen twee zones, omdat het modelgebied in twee zones valt. Kies in dergelijk geval voor de zone waar het grootste deel van de polder in valt. 3. Stap 3 gaat over het lokaliseren van de polder folder. Run het veld met ctrl + enter.  Bij deze stap is het belangrijk dat alle folders goed staan. Als de resultaten in een folder in een andere map staat (ergens anders dan batch_results) of als het notebook vanuit een ander model wordt geopend dan welke je wil analyseren, zal een foutmelding ontstaan. 4. Draai de 4de stap middels ctrl + enter. Deze stap zet input klaar voor volgende stappen. Het duurt een tijd voordat deze stap doorlopen is. </p> </li> </ol> <ol> <li>De stappen die hierna komen tot <code>Schade corrigeren</code>, kunnen allemaal doorlopen worden middels ctrl + enter. De stappen vanaf <code>Schade corrigeren</code> zijn alleen noodzakelijk als er onrealistische schades zijn berekend op plekken. Deze kunnen dan middels een polygoon verwijderd worden. Zie het notebook voor de precieze stappen.</li> </ol> <p>De stappen die in het notebook zijn doorlopen, hebben resultaten gegenereerd die zijn in te laden in de HHNK plugin. Het inladen van de resultaten gaat als volgt: 1. Selecteer de revisie van het model waar je de resultaten van wil inladen (zie onderstaande afbeelding).  2. Klik op <code>Laad layout</code> om resultaten in te laden. De verschillende resultaten verschijnen onder <code>Lagen</code>. De afbeelding hieronder geeft een voorbeeld wat de inundatiediepte kan zijn bij een bui die 1x in de 1000 jaar voorkomt. </p> <pre><code>Stap 3 en 4 zijn optioneel.\n</code></pre> <ol> <li> </li> <li> <p>Met de knop <code>Maak pdfs</code> kunnen de kaarten uit de lagen naar een pdf ge\u00ebxporteerd worden. De pdf's worden in de map <code>batch results</code> weggeschreven. </p> </li> </ol>"},{"location":"md_files/4_gebruik_plugin/j_werkwijze_klimaatsommen/#uitkomsten-van-de-test","title":"Uitkomsten van de test","text":"<p>De ingeladen kaarten geven een beeld van wat de gevolgen van de diverse klimaatsommen zijn in het modelgebied. Om bepaalde resultaten makkelijk in te laden, is het gebruik van map themes handig. De volgende kaarten zijn getoond: * Resultaat klimaatsommen:      - Ruimtekaart:          - De ruimte index is in een bepaalde kleur per peilgebied weergegeven. De kaart laat zien of de schade per m3 gelijk verdeeld is over de polder en/of er ruimte is voor een betere verdeling van water bij extreme neerslag.         - De absolute berging in het peilgebied geeft een indicatie van de hoeveelheid berging in het peilgebied.         - De relatieve berging geeft een indicatie van de hoeveelheid berging in het peilgebied ten opzichte van de gehele polder.     - Peilgebieden: deze kaart geeft de peilgebieden in het modelgebied weer.</p> <ul> <li> <p>Inundatievlakken: de inundatievlakken bestaan uit de drie herhalingstijden: T10, T100 en T1000. De kaarten geven weer welk gebied bij welke herhalingstijd inundeert. De kaarten maken geen onderscheid tussen inundatie die vanuit het watersysteem ontstaat of door plasvorming op het maaiveld. </p> </li> <li> <p>Inundatievlakken - plas: deze kaart laat zien welke delen inunderen door plasvorming op het maaiveld.</p> </li> <li> <p>Inundatievlakken - overlast: deze kaart laat zien welke delen op het maaiveld inunderen door water dat vanuit het watersysteem komt.</p> </li> <li> <p>Inundatiediepte: de kaarten met de inundatiediepte zijn net als de inundatievlakken opgesteld op basis van de drie herhalingstijden: T10, T100 en T1000. Op de kaarten is te zien wat de berekende waterdiepte is bij elk van de herhalingstijden. De kaarten maken geen onderscheid tussen inundatie die vanuit het watersysteem ontstaat of door plasvorming op het maaiveld. </p> </li> <li> <p>Inundatiediepte - plas: deze kaart laat zien wat de waterdiepte is van de delen die inunderen door plasvorming op het maaiveld.</p> </li> <li> <p>Inundatiediepte - overlast: deze kaart laat zien wat de waterdiepte is van delen op het maaiveld die inunderen door water dat vanuit het watersysteem komt.</p> </li> </ul> <ul> <li> <p>Schadekaarten:</p> <ul> <li>Schade per peilgebied: deze kaart laat zien wat de schade is per peilgebied. Hierbij is de schade die door inundatie vanuit het watersysteem en inundatie door plasvorming op het maaiveld optreedt, bij elkaar opgeteld.</li> <li>Schade per peilgebied - plas: deze kaart laat zien wat de schade is per peilgebied welke wordt veroorzaakt door plasvorming op het maaiveld. </li> <li>Schade per peilgebied - overlast: deze kaart laat zien wat de schade is per peilgebied welke wordt veroorzaakt door inundatie vanuit het watersysteem. </li> <li>cw schade - overlast: dit raster toont in het modelgebied de contante waarde van de schade die is veroorzaakt door inundatie vanuit het watersysteem.</li> <li>cw schade - plas: dit raster toont in het modelgebied de contante waarde van de schade die is veroorzaakt door plasvorming op het maaiveld.</li> </ul> </li> <li> <p>Schade correctie: in deze laag kunnen polygonen worden toegevoegd om onrealistische schade te verwijderen. Dit kan via het doorlopen van het notebook.</p> </li> </ul> <p>De pdf kaarten zijn het eindproject van de modelanalyse. </p>"},{"location":"md_files/4_gebruik_plugin/z_bekende_problemen/","title":"Bekende problemen","text":""},{"location":"md_files/4_gebruik_plugin/z_bekende_problemen/#bekende-problemen","title":"Bekende problemen","text":""},{"location":"md_files/4_gebruik_plugin/z_bekende_problemen/#oude-sqlite-error","title":"Oude sqlite error","text":"<p>Wanneer in de aangeleverde data nog een .sqlite zit die in een oudere versie van 3Di is gemaakt, kan het voorkomen dat onderstaande foutmelding wordt weergegeven:</p> <p></p> <p>Deze error kan op de volgende manier opgeloste worden:</p> <ol> <li>Ga naar <code>select 3Di results</code> (1)</li> </ol> <p> </p> <ol> <li>Klik op <code>load</code> (2)</li> </ol> <p></p> <ol> <li>Ga naar de map waar je data hebt opgeslagen, zie ook project starten</li> <li>Vervolgens ga je naar het volgende pad: <code>C:\\Users\\{gebruiker}\\Documents\\3Di\\'polder_x'\\02_schematisation\\00_basis</code> en dubbelklik je op het .sqlite bestand. </li> <li>Nadat je hier op hebt geklikt, krijg je onderstaande waarschuwing: </li> </ol> <p></p> <p>Klik op <code>yes</code>. De .sqlite staat nu in een versie die ingeladen kan worden in 3Di zonder foutmelding. </p> <p><code>{gebruiker}</code> is de naam van de Windows-gebruiker.</p>"},{"location":"md_files/4_gebruik_plugin/zz_overige_en_externe_referenties/","title":"Overige en externe referenties","text":""},{"location":"md_files/4_gebruik_plugin/zz_overige_en_externe_referenties/#overige-en-externe-referenties","title":"Overige en externe referenties","text":""},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/","title":"1. Versiebeheer modellen","text":"<p>Het versiebeheer is een hulpmiddel om 3di wateroverlast modellen te beheren en zo aanpassingen te kunnen detecteren en archiveren. Het versiebeheer vindt plaats in Azure en verloopt via github (git_model_repo) en automatiseert het instellen van git hooks, git Large File Storage (LFS), en de benodigde .gitattributes en .gitignore bestanden. Met het toepassen van deze functionaliteiten is versiebeheer + extra inzicht bij de 3Di modellen mogenlijk gemaakt. Hiermee beogen we zowel intern als extern het overzicht te bewaken over de aanpassingen van 3di modellen, bijvoorbeeld bij het uitvoeren van scenariostudies. </p>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#hoofdfunctionaliteiten-voor-versiebeheer","title":"Hoofdfunctionaliteiten voor versiebeheer","text":"<ol> <li> <p>Azure DevOps &amp; GitHub integratie</p> <ul> <li>Modellen/Repositories worden gehost op Azure DevOps</li> <li>Uitchecken en diffen tussen modelvarianten in GitHub Desktop</li> <li>Initialisatie en beheer zijn hierop afgestemd </li> </ul> </li> <li> <p>Script: bin/initialize_repo.bat</p> <ul> <li>Voegt Git hooks toe aan model repository<ul> <li>Git hooks<ul> <li>Automatische installatie van hooks voor o.a. pre-commit, commit-msg, post-commit, etc.</li> <li>Hooks zorgen voor standaardisatie en extra checks bij commits en pushes binnen de model repo</li> </ul> </li> </ul> </li> <li>Initialiseert Git LFS (Large File Storage)<ul> <li>Git LFS<ul> <li>Zorgt dat grote bestanden (zoals rasters en modellen) via LFS worden beheerd</li> <li>Voorkomt dat grote bestanden direct in git komen</li> </ul> </li> </ul> </li> <li>Maakt of vult .gitattributes en .gitignore aan <ul> <li>.gitattributes en .gitignore<ul> <li>.gitattributes regelt welke bestanden via LFS gaan</li> <li>.gitignore voorkomt dat ongewenste, tijdelijke of backup bestanden in git worden opgeslagen</li> </ul> </li> </ul> </li> </ul> </li> </ol>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#locatie-model-repository-lokaal","title":"Locatie model repository &amp; lokaal","text":"<ul> <li>De modellen staan in Azure devops. Inloggen bij Azure Devops kan via de interne Azure omgeving van HHNK.</li> <li>Modellen kunnen uitgecheckt worden met Github Desktop. Modellen worden per user uitgecheckt in de map <code>E:\\github\\modellen_db\\&lt;username&gt;\\&lt;model_name&gt;</code> (De schijf E kan worden ingesteld in de interne hydrologen omgeving)</li> </ul>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#2-lokaal-werken-met-azuregithub-repo","title":"2. Lokaal werken met Azure/Github repo","text":""},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#21-createclone-azure-devops-repo","title":"2.1 Create/Clone Azure devops repo","text":"<ol> <li> <p>Op de interne Azure omgeving van HHNK, ga in de linker werkbalk naar <code>repos</code>. Kies vervolgens boven in in de werkbalk met de pulldown het model/repo dat je wilt hebben.</p> </li> <li> <p>Vervolgens verschijnt een overzicht van de bestanden in het rechter deel van het scherm . Kies in dit deel van het scherm rechtsboven op <code>Clone</code>. Kies hier HTTPS en kopieer de link (deze begint met <code>https://HHNK@dev.azure.com/HHNK/</code>), dit kan wordt gebruikt in Github Desktop onder <code>repository URL</code>.</p> </li> <li> <p>Klik vervolgens op 'Generate Git credentials' en kopieer de gebruikersnaam en wachtwoord. Deze kunnen in Github Desktop geplakt worden onder <code>Username</code> en <code>Password</code> in de popup die verschijnt bij het clonen.</p> </li> </ol>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#2-binnenhalen-op-github-desktop","title":"2. Binnenhalen op Github Desktop","text":"<ol> <li>Open Github Desktop en kies <code>File</code> -&gt; <code>Clone repository</code> en kies <code>URL</code>. Plak de link in <code>repository URL</code> </li> <li>Kies de locatie waar het model moet komen te staan (ZIE HIERBOVEN) </li> <li>Klik op <code>Clone</code> en vul de gebruikersnaam en wachtwoord in die je van Azure Devops hebt gekopieerd.</li> </ol>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#3-initialiseren-van-de-model-repository","title":"3. Initialiseren van de model repository","text":"<p>Na het uitchecken van een model repository is het nodig om deze te initialiseren. Dit voegt de benodigde git hooks (in de folder .git/hooks), initialiseert git LFS (Large File Storage) en maakt of voegt toe aan de .gitattributes en .gitignore file.</p> <p>Start de command prompt en ga naar de root van de model repository. Voer vervolgens het volgende commando uit:</p> <pre><code>```shell\n# vanuit de root van de model repository:\n&lt;path to hhnk-threedi-tools repo&gt;\\hhnk_threedi_tools\\git_model_repo\\bin\\initialize_repo.bat\n# of vanaf een andere locatie:\n&lt;root of hhnk-treedi-tools repo&gt;\\hhnk_threedi_tools\\git_model_repo\\bin\\initialize_repo.bat &lt;path to model repo&gt;\n```\n</code></pre>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#opzetwerkafspraken-modellen-repo","title":"Opzet/Werkafspraken modellen repo","text":""},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#main-branch","title":"Main branch","text":"<ul> <li>De main branch is de branch waar het laatste basismodel in is opgeslagen. </li> <li>De main branch is klaargezet door een RepoAdmin, dit basismodel dient als bron voor alle scenariobranches.</li> <li>Pushen vanaf een branch naar de main branch is niet mogelijk zonder een pull request.</li> </ul>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#branches-scenarios","title":"Branches / scenarios","text":"<ul> <li>Als aan het (basis)model wordt gewerkt, dan gebeurd dit dus in een branch. Branches van het basismodel kunnen als deze af zijn via een <code>pull request</code> worden samengevoegd met de main branch.</li> <li>Elke gebruiker kan zijn scenarios ook eenzelfde bescherming geven als de main branch, om bijvoorbeeld onverhoopte aanpassingen van 3di modellen te voorkomen.</li> <li>Afspraken over naamgeving van branches en scenarios:<ul> <li>Een persoonlijke werk branch begint met <code>work_&lt;naam_hydroloog&gt;</code></li> <li>De scenario branches beginnen met <code>scenario_&lt;project_naam&gt;</code> </li> </ul> </li> </ul>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#voorbeeld-van-branch-structuur-die-op-den-duur-kan-ontstaan","title":"Voorbeeld van branch structuur die op den duur kan ontstaan","text":"<pre><code>main - Basismodel 't Hoekje  \n\u2502\n\u251c\u2500\u2500 work_jan  \n\u2502\n\u251c\u2500\u2500 scenario_basisvariant\n\u2502\n\u2514\u2500\u2500 scenario_klimaatadaptatie\n</code></pre>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#pull-request","title":"Pull request","text":"<p>Een pull request (PR) is een verzoek om wijzigingen van een branch samen te voegen met een andere branch (meestal main). Volg de volgende stappen:</p> <ol> <li>Maak een branch aan en commit je wijzigingen.</li> <li>Push je branch naar de remote repository.</li> <li>Open een pull request in Azure DevOps.</li> <li>Laat de wijzigingen reviewen door collega(\u2019s).</li> <li>Na goedkeuring wordt de branch samengevoegd (gemerged) met de doelbranch.</li> </ol> <p>Een PR zorgt voor controle, review en goedkeuring voordat wijzigingen definitief worden.</p>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#pushen-en-pullen-en-commit-messages","title":"Pushen en pullen en commit messages","text":"<ul> <li> <p>Committen: Lokale wijzigingen opslaan in je branch.</p> </li> <li> <p>Pushen: Je lokale commits uploaden naar de remote repository.</p> </li> <li> <p>Pullen: Nieuwe wijzigingen van de remote repository ophalen naar je lokale repository.</p> </li> </ul>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#mergen-van-branches","title":"Mergen van branches","text":"<p>Mergen betekent het samenvoegen van de inhoud van twee branches.</p> <ul> <li>Dit gebeurt meestal via een pull request.</li> <li>Conflicten moeten eerst opgelost worden voordat het mergen kan plaatsvinden.</li> <li>Na het mergen zijn de wijzigingen van beide branches beschikbaar in de doelbranch (bijvoorbeeld main).</li> </ul>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#git-hooks-in-git_model_repo","title":"Git Hooks in git_model_repo","text":""},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#wat-zijn-git-hooks","title":"Wat zijn git hooks?","text":"<p>Git hooks zijn scripts die automatisch worden uitgevoerd bij bepaalde git-acties, zoals committen, pushen of mergen. Ze helpen om consistentie, kwaliteit en automatisering te waarborgen.</p>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#overzicht-van-geinstalleerde-hooks","title":"Overzicht van ge\u00efnstalleerde hooks","text":"<ul> <li> <p>pre-commit   Voert checks/taken uit v\u00f3\u00f3r een commit. </p> <ul> <li>Zijn er veranderde bestanden</li> <li>Taken, zoals omschrijven naar geojson</li> </ul> </li> <li> <p>commit-msg   Controleert of commit messages voldoen aan afspraken (zoals een ticketnummer of beschrijving). Dit zorgt voor een ingevuld commit veld, wat dient als extra logboek voor de aanpassingen binnen een branch.   </p> </li> <li> <p>post-commit   Kan gebruikt worden om na een commit extra acties uit te voeren, zoals notificaties of automatische documentatie.  </p> </li> <li> <p>post-checkout, post-merge, post-rewrite, prepare-commit-msg   Automatiseren taken na het wisselen van branches, mergen, herschrijven van geschiedenis of voorbereiden van commit messages.</p> </li> </ul>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#hoe-werken-de-hooks","title":"Hoe werken de hooks?","text":"<p>De hooks worden automatisch geplaatst in <code>.git/hooks</code> bij initialisatie van de repo met het script:</p> <pre><code>&lt;pad naar hhnk-threedi-tools&gt;\\hhnk_threedi_tools\\git_model_repo\\bin\\initialize_repo.bat &lt;pad naar model repo&gt;\n</code></pre> <p>Ze zijn direct actief en vereisen geen handmatige installatie.</p>"},{"location":"md_files/5_azure_versiebeheer/werken_met_modellen_repo/#hooks-uitbreiden","title":"Hooks uitbreiden","text":"<p>Wil je extra checks of acties toevoegen? - Voeg je script toe aan de betreffende hook in <code>.git/hooks</code> - Zorg dat het script uitvoerbaar is (<code>chmod +x &lt;hook&gt;</code> op Linux/Mac)</p>"},{"location":"md_files/5_schematisation_builder/","title":"Overzicht documentatie Schematisation Builder","text":"<p>a. Gebruikersinteractie    Uitleg voor het gebruik van de software via de Python interface en de QGIS-plugin.</p> <p>b. Architectuur, code &amp; tests    Hoofdlijnen van de systeemarchitectuur, inclusief stroomschema\u2019s en componentoverzicht. Overzicht van modules, klassen en functies met korte beschrijvingen. Uitleg over tests en testdatasets.</p> <p>c. Validatieregels &amp; aannames    Volledige lijst van validatieregels, verbeteringslogica, en de redenen achter deze keuzes.</p> <p>d. Data locaties &amp; bewegingen    Beschrijving van waar de data wordt ge\u00ebxporteerd, opgeslagen en hoe deze vervolgens beweegt.</p>"},{"location":"md_files/5_schematisation_builder/a_gebruikersinteractie/","title":"Gebruikersinteractie","text":"<p>Doel: Uitleg over gebruik van de software via Python of QGIS-interface. Lezerspubliek: Ontwikkelaars &amp; hydrologen</p>"},{"location":"md_files/5_schematisation_builder/a_gebruikersinteractie/#1-python-api-gids","title":"1. Python API gids","text":"<p>Installatie, importeren, hoofdfuncties/methoden met voorbeelden.</p>"},{"location":"md_files/5_schematisation_builder/a_gebruikersinteractie/#2-qgis-plugin-gids","title":"2. QGIS plugin gids","text":"<p>Locatie van de tab, hoe functies te gebruiken, screenshots toevoegen.</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/","title":"Architectuur, code &amp; tests","text":"<p>Doel: Uitleggen hoe het systeem op hoofdlijnen werkt en hoe de onderdelen samenhangen. Beschrijven van de rol van elke codecomponent en de interne structuur. Uitleg over tests en testdatasets.  Lezerspubliek: Ontwikkelaars &amp; architecten</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#1-uitgangspunten","title":"1. Uitgangspunten","text":"<p>Bij ontwikkeling van de Schematisation Builder zijn steeds de volgende uitgangspunten gehanteerd. * Transparantie: Het is eenvoudig te achterhalen waar gegevens vandaan komen: de gegevensbron, aannames en keuzes die gemaakt zijn. * Interactief: Een proces waarin de modelleur keuzes voorgelegd krijgt, in plaats van dat de software aannames doet waar de modelleur geen weet van heeft.  * Eenvoudiger proces: Versimpelen van het dataverwerkings- en modelleerproces, inclusief het documenteren van wat en waarom. * Modulaire opzet: Ontwikkeling van goed onderhoudbare, modulaire software, waarbij datavalidatie en conversie worden gescheiden. Van elke component is duidelijk beschreven wat die doet; elke component doet \u00e9\u00e9n ding, dit wordt niet door elkaar gemengd. * HyDAMO implementatie: Volledige integratie van HyDAMO als standaard voor data-uitwisseling, met ondersteuning voor aanvullende validaties. * Cyclisch modelleren: Onjuiste gegevens worden zoveel mogelijk in de brondata aangepast. Hierbij wordt aangesloten op het Mutatie Meldingen Systeem van team GEO. * Samenwerking met 3Di: Samenwerking met 3Di om zo min mogelijk zelf te ontwikkelen, maar waar mogelijk gebruik te maken van bestaande tools en expertise. * E\u00e9n taal/platform: Vereenvoudiging door over te stappen op \u00e9\u00e9n programmeertaal en platform (Python), ter vervanging van de huidige combinatie van verschillende systemen.</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#2-systeemstroomschema","title":"2. Systeemstroomschema","text":"<p>Het stroomschema geeft een overzicht van het volledige conversie- en validatieproces van brondata naar een 3Di schematisatie. Het proces start bij de gebruiker, die via de Folder selector de bronbestanden selecteert en, indien nodig, aannames toevoegt of wijzigt.</p> <p>De bestanden worden vervolgens verwerkt door de Exporter, die de ruwe data beschikbaar maakt. Daarna doorloopt de data twee opeenvolgende conversiestappen: de ToDAMO converter en de DAMO_to_HyDAMO converter, waarbij de data wordt omgezet naar het HyDAMO-formaat met correcte attributen en schema\u2019s.</p> <p>Na de conversie volgt de HyDAMO-validator, die de gegevens controleert op basis van vooraf gedefinieerde validatieregels. De gebruiker deelt de regels als kritisch of niet-kritisch. Als alle kritische validatieregels correct zijn, gaat het proces verder met de 3Di-importer. Met behulp van de Vector Data Importer in de Modeller Interface worden alle lagen in een 3Di schematisatie geladen.</p> <p>Bij aanwezige kritische fouten wordt geprobeerd deze te corrigeren met de HyDAMO-fixer, automatisch of met input van de gebruiker. De aangepaste HyDAMO-data wordt opnieuw geverifieerd in de validator, en het proces kan worden herhaald totdat alle fouten zijn opgelost. Uiteindelijk wordt de HyDAMO data omgezet naar een 3Di-schematisatie. Ook de bronrasters worden geclipt en voorbewerkt tot schematisatierasters, die bij de schematisatie worden geplaatst.</p> <p></p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#3-overzicht-componenten","title":"3. Overzicht componenten","text":"<p>Lijst van modules en hun verantwoordelijkheden.</p> Type Volgorde Module Rol Bestand Kernlogica A Database exporter Genereert een ruwe export op basis van een polder polygoon. /hhnk_threedi_tools/core/schematisation_buider/ DB_exporter.py Kernlogica B Raw Export naar DAMO Converter Zet ruwe export om in DAMO formaat. /hhnk_threedi_tools/core/schematisation_buider/ raw_export_to_DAMO_converter.py Kernlogica C DAMO naar HyDAMO converter Zet DAMO om in HyDAMO formaat. /hhnk_threedi_tools/core/schematisation_buider/ DAMO_HyDAMO_converter.py Kernlogica D HyDAMO validator Trapt validatieregels af op HyDAMO bestand. /hhnk_threedi_tools/core/schematisation_buider/ HyDAMO_validator.py Kernlogica E HyDAMO fixer Interpreteert validatieresultaten en biedt mogelijkheden tot automatische fixes. /hhnk_threedi_tools/core/schematisation_buider/HyDAMO_Fixer.py Kernlogica F 3Di converter Zet het (verbeterde) HyDAMO bestand om in een 3Di schematisatie /hhnk_threedi_tools/core/schematisation_buider/ HyDAMO_conversion_to_3di.py Interfaces ... ... /hhnk_threedi_tools/core/schematisation_buider/ schematisation_builder.py Interfaces ... ... /hhnk_threedi_plugin/gui/ schematisation_builder.py"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#a-database-exporter","title":"A. Database exporter","text":"<p>De <code>db_exporter</code> exporteert de brongegevens uit de beheersystemen van HHNK (DAMO &amp; CSO). De brongegevens zoals waterlopen en kunstwerken worden direct uit de Oracle databases gehaald en via een beperkt aantal tussenstappen opgeslagen in een Geopackage. De lagen en gegevens die worden ge\u00ebxporteert zijn gedefini\u00ebert in een Json bestand. Het default configuratiebestand staat opgeslagen in <code>hhnk_threedi_tools/recources/schematisation_builder/db_layer_mapping.py</code>. Dit is de default set gegevens voor het maken van een 3Di model.</p> <p>De selectie van gegevens gaat via een <code>intersect</code> met het opgegeven modelgebied. Datalagen zonder geometrie moeten via een id gerelateerd worden aan een laag met geometrie. In de <code>db_exporter</code> zijn dit sub-layers, die worden opgezocht middels de functie <code>export_sub_layer</code>. Voor de profielen is het mogelijk om een tweede afhankelijk laag te gebruiken (sub-sub-layer). </p> <p>De volgende tussenstappen zijn beschikbaar: 1. <code>update_model_extent_from_combinatiepeilgebieden</code>: Modellen bestaan vaak uit clusters van meerdere polders. Deze clusters houden we bij in de Hydrologische database (HDB). Deze worden niet beheerd waardoor afwijkingen ontstaan op de grenzen. Deze functie werkt dit bij zodat altijd een volledig peilgebied wordt ge\u00ebxporteerd. 2. <code>update_table_domains</code>: De gegevens in de DAMO database maken gebruik van domeinen. In CS-Objecten zijn de domeincodes omgezet naar domeinwaarden. Voor HyDAMO kan hiervoor gebruik worden gemaakt van de <code>DAMO_to_HyDAMO_Converter</code> (soms wel wasmachine genoemd), maar dit maakt alleen gebruik van officiele DAMO domeinen. HHNK gebruikt daarnaast eigen domeinen. Door deze stap direct bij de export te doen kunnen ook deze domeinen worden omgezet. De domeincode blijft behouden in een apart attribuut.</p> <p>Ad 1. Om een deel van een peilgebied te exporteren is het nodig dit deel op te nemen in de HDB deelgebieden en een fictief kunstwerk op de grens aan te maken. Dit geldt bijvoorbeeld voor de polders zoals Koegras, die zonder kunstwerk uitwisselen met de boezem. Om niet de hele boezem in het model op te hoeven nemen, moet een deel van het peilgebied van de schermerboezem worden geselecteerd via een Hydro_deelgebied.</p> <p>Ad. 2. Er is nog enige onduidelijkheid over de beste bron voor de domeinen van HHNK en of de DAMO-domeinen in de HHNK database zijn/worden bijgewerkt. Dit kan een bron van fouten of ontbrekenede gegevens zijn. De gegevens voor de modelbouw lijken aanwezig.</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#b-raw-export-naar-damo-converter","title":"B. Raw Export naar DAMO Converter","text":"<p>De <code>RawExportToDAMOConverter</code> class vormt een schakel tussen de ruwe exportbestanden (DAMO, CSO &amp; HDB) en de uiteindelijke HyDAMO/3Di-invoer, door de ruwe exportbestanden om te zetten in DAMO-formaat volgens standaard. De converter zorgt voor: * Inlezen en valideren van lagen. * Bewerken en verrijken van data (IDs, geometrie, koppelingen). * Schrijven van consistente outputs.</p> <p>De code is opgebouwd uit de <code>RawExportToDAMOConverter</code> parent klasse en meerdere child klassen (implementaties).</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#gemaalconverter","title":"GemaalConverter","text":"<p>De <code>GemaalConverter</code> is een implementatie van de <code>RawExportToDAMOConverter</code>. Deze richt zich op het verwerken van gemaal- en pomplagen, inclusief het aanbrengen van koppelingen tussen pompen en gemalen en het corrigeren van capaciteitwaarden. </p> <p>In hoofdlijnen zorgt de converter voor: * Het laden van de relevante lagen (<code>gemaal</code>, <code>pomp</code>, <code>hydroobject</code>). * Het aanmaken van een pomp-laag als deze ontbreekt of leeg is. * Het toevoegen van kolommen zoals <code>gemaalid</code> en <code>globalid</code> in de pomp-laag. * Het corrigeren van de pomp-capaciteit op basis van de gemaalgegevens.</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#peilgebiedconverter","title":"PeilgebiedConverter","text":"<p>De <code>PeilgebiedConverter</code> is een implementatie van de <code>RawExportToDAMOConverter</code>. Deze richt zich op het verwerken van peilgebiedlagen (<code>peilgebiedpraktijk</code>?). Nog verder te implementeren.</p> <p>In hoofdlijnen zorgt de converter voor: * Het laden van de <code>peilgebiedpraktijk</code>-laag vanuit de ruwe export. * Het opschonen van geometrie\u00ebn door het exploden van multipart-geometrie\u00ebn naar enkelvoudige features. * ... (toekomstige functionaliteiten)</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#profielconverter","title":"ProfielConverter","text":"<p>De <code>ProfielConverter</code> is een implementatie van de <code>RawExportToDAMOConverter</code>. Deze richt zich op het verwerken van profielgegevens (lijnen en punten) en het koppelen van deze profielen aan de juiste hydroobjecten. Het doel is om DAMO-conforme tabellen voor profielgroep, profiellijn en profielpunt op te bouwen.</p> <p>In hoofdlijnen zorgt de converter voor: * Het inladen van benodigde lagen (<code>hydroobject</code>, <code>gw_pro</code>, <code>gw_prw</code>, <code>gw_pbp</code>, <code>iws_geo_beschr_profielpunten</code>, <code>peilgebiedpraktijk</code>). * Het samenvoegen (linemergen) van hydroobjecten binnen peilgebieden. * Het opbouwen van profieltabellen (<code>profielgroep</code>, <code>profiellijn</code>, <code>profielpunt</code>) inclusief ID\u2019s en koppelingen. * Het verrijken van profielpunten met hoogtes, afstanden en typeprofielpunt. * Het koppelen van profielen aan hydroobjecten, inclusief fallback voor hydroobjecten zonder profiel (met een zoekradius). * Het berekenen van diepste punten per profiellijn en per hydroobject.</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#toekomstige-uitbreidingen","title":"Toekomstige uitbreidingen","text":"<ul> <li>Verdere kwaliteitscontroles op profielpunten (bijv. dubbele geometrie\u00ebn beter afhandelen).</li> <li>Mogelijkheid om meerdere types profielpunten (naast vaste bodem) te ondersteunen.</li> <li>Optimaliseren van de zoeklogica in <code>connect_profiles_to_hydroobject_without_profiles</code> (bijv. met ruimtelijke nearest-neighbour methoden).</li> </ul>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#_data","title":"_Data","text":"<p>De <code>_Data</code> class is een interne dataclass die beschikbaar is als <code>.data</code> binnen de <code>RawExportToDAMOConverter</code> en al zijn child classes. Het dient als centrale container voor alle gebruikte tabellen tijdens het conversieproces. Alle tabellen worden als <code>GeoDataFrame</code> opgeslagen, zodat zowel geometrie- als attribuutinformatie beschikbaar is voor verdere verwerking.</p> <p>In hoofdlijnen zorgt <code>_Data</code> voor: * Een consistente structuur waarin alle input-, tussen- en outputtabellen zijn opgeslagen. * Het eenvoudig aanspreken van tabellen via attributen (bijv. <code>.data.gemaal</code>, <code>.data.peilgebiedpraktijk</code>). * Validatie van geladen lagen via <code>_ensure_loaded</code>.</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#c-damo-naar-hydamo-converter","title":"C. DAMO naar HyDAMO converter","text":"<p>De <code>DAMO_to_HyDAMO_Converter</code> class zet een DAMO GeoPackage om naar een HyDAMO GeoPackage, waarbij domeinwaarden worden vertaald en extra velden zoals NEN3610id en statusobject worden toegevoegd. Het zorgt ervoor dat de attributen voldoen aan het HyDAMO schema en schrijft de geconverteerde lagen naar een nieuwe geopackage.</p> <p>Het omzetten van domeinwaarden is voor dit project overbodig geworden, omdat de tekstwaarden van de domeinen inmiddels direct beschikbaar zijn in de DAMO-database van het waterschap. Daarom kan de stap convert_domain_values worden overgeslagen (<code>convert_domain_values: bool = False</code>).</p> <p>In de onderstaande tabel is een overzicht te vinden van de functies, hun beschrijvingen en de interne helperfuncties die ze aanroepen.</p> Type Inputlagen Output Converter Class DAMO GeoPackage (<code>damo_file_path</code>) HyDAMO GeoPackage (<code>hydamo_file_path</code>) Functie Beschrijving Helper functies <code>__init__()</code> Initialisatie van converter met paden, lagen, schema's, logger, opties voor domain conversion en statusobject <code>_get_schema_path()</code>, <code>_retrieve_damo_domain_mapping()</code> <code>run()</code> Start het conversieproces, roept <code>convert_layers()</code> aan <code>convert_layers()</code> <code>convert_layers()</code> Loopt door de lagen, converteert naar HyDAMO en schrijft naar geopackage <code>_convert_attributes()</code>, <code>_add_column_NEN3610id()</code>, <code>_add_column_status_object()</code> <code>_convert_attributes(layer_gdf, layer_name)</code> Zet kolomnamen lowercase en converteert waarden per HyDAMO schema <code>_convert_column()</code> <code>_convert_column(column, column_name, layer_name)</code> Converteert individuele kolomwaarden naar juiste type en domein <code>_get_field_type()</code>, <code>_convert_domain_values()</code> <code>_get_field_type(column_name, layer_name)</code> Haalt veldtype op uit HyDAMO schema \u2013 <code>_convert_domain_values(object_name, column_name, column)</code> Zet domeinwaarden om naar descriptieve HyDAMO-waarden \u2013 <code>_add_column_NEN3610id(layer_gdf, layer_name)</code> Voegt NEN3610id toe aan laag gebaseerd op code/id/naam \u2013 <code>_add_column_status_object(layer_gdf, layer_name)</code> Voegt statusobject toe en valideert waarden \u2013 <code>_get_schema_path(schema_path, schema_basename, schema_version)</code> Bepaalt pad naar schema als dit niet expliciet is gegeven \u2013 <code>_retrieve_damo_domain_mapping()</code> Parseert DAMO XML schema en maakt dicts van domeinen en objecten \u2013"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#properties","title":"Properties","text":"Property Beschrijving <code>hydamo_definitions</code> Laadt en retourneert de HyDAMO schema-definities uit JSON bestand"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#d-hydamo-validator","title":"D. HyDAMO validator","text":"<p>De class <code>HyDAMO_validator</code> wordt gebruikt om HyDAMO-bestanden te controleren op consistentie en correctheid volgens de geldende validatieregels. </p> <p>De class leunt volledig op de functionaliteiten van de <code>HyDAMOValidatieModule</code>. Dit is een fork van de offici\u00eble hydamo_validation-module van Het Waterschapshuis. Voor dit project zijn custom functies toegevoegd om specifieke validatieregels af te kunnen dwingen en logging te integreren.</p> <p>Code-opbouw 1. Voorbereiding van bestanden: het HyDAMO-bestand en de validatieregels worden naar een werkmap gekopieerd. 2. Initialisatie validator: een validator-object wordt aangemaakt met de gewenste coverages (key: \"AHN\", value: padverwijzing naar map met index.shp en rasters) en output types (geopackage, csv, geojson). 3. Uitvoering validatie: het validator-object voert de validatie uit, schrijft de resultaten weg in de werkmap en retourneert een samenvatting van de resultaten.</p> <p>Validatieregels &amp; aannames </p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#e-hydamo-fixer","title":"E. HyDAMO fixer","text":"<p>De HyDAMO interpreteert validatieresultaten en biedt mogelijkheden tot automatische en handmatige fixes. Op deze manier wordt het HyDAMO klaar gemaakt om als input te dienen van een 3Di model. </p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#algemene-werking","title":"Algemene werking","text":"<p>In de validation_rules.json zijn de volgende attributen toegevoegd per validatieregel: * Fix_ID * Fix_name * category * assumption_values * related_layers</p> <p>Er zullen verschillende categorie\u00ebn fixes zijn en op basis daarvan wordt bepaald in welke maten de gebruiker input moet leveren om de fix uit te voeren. De gedefineerde categorie\u00ebn zijn: * Automatic:   * Automatisch niet laten meenemen in model validatie (verwijderen)   * Aanpassen op basis van aannames   * Aanpassen op basis van gerelateerde objecten in andere lagen   * Aanpassen op basis van aannames en gerelateerde objecten in andere lagen * Manual:   * INFO: Ter info! Gebruiker kan iets doen, maar niet perse nodig   * Warning: Waarschuwing! Gebruiker moet iets met object doen</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#code-opbouw","title":"Code opbouw","text":"<p>De <code>HyDAMO_fixer</code> class loopt over de invalid features in een HyDAMO bestand op een bepaald volgorde (NOTE: nog te bepalen) op basis van attributen in de validation_rules.json. Voor automatische fixes is er een functie in de class die functies aan vanuit de class <code>functions_hydamo_fixer</code> aanspreekt. Deze functie in de <code>HyDAMO_fixer</code> kan per Fix_ID, category en/of laag fixes uitgevoerd worden. Als een feature gefixt is worden de Fix_ID en category weggeschreven in het HyDAMO bestand. </p> <p>Na elke loop wordt het gehele HyDAMO bestand opnieuw gevalideert, waarbij gebruikt wordt gemaakt van de <code>HyDAMO_validator</code>. Verder moet de <code>HyDAMO_fixer</code> kunnen communiceren met de Qgis plugin, om user input op te halen en resultaten te laten zien. </p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#f-3di-converter","title":"F. 3Di converter","text":"<p>HyDAMO_conversion_to_3di mogelijk straks niet meer relevant door volledige QGIS integratie. Anders is het netjes om HyDAMO_conversion_to_3di.py te vernoemen naar HyDAMO_3Di_converter.py voor uniformiteit.</p>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#4-testoverzicht","title":"4. Testoverzicht","text":""},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#de-tests","title":"De tests","text":"<ul> <li>Unittests \u2013 Controleren individuele functies/klassen in isolatie.  </li> <li>Integratietests \u2013 Controleren dat componenten (exporter, (hy)damo converter, validator, fixer, schematisation converter) goed samenwerken.  </li> <li>End-to-end tests \u2013 Controleren van de volledige datastroom: export \u2192 omzetten naar (hy)damo \u2192 valideren \u2192 verbeteren \u2192 her-valideren \u2192 omzetten naar schematisatie (op objectniveau, danwel voor de gehele set).  </li> </ul> Testbestand Type test Status Scope Input dataset Output dataset Beschrijving Testvariabelen test_create_schematisation_rasters.py Unit \ud83d\udfe2 Getest Aanmaak van schema-rasters uit bronbestanden <code>source_data</code> (DEM, GLG/ GGG/ GHG, infiltratie, frictie, landuse, polder, waterdeel) <code>model/schema_base/rasters</code> (DEM, landuse) Test controleert of <code>create_schematisation_rasters</code> correcte rasters genereert op basis van brondata - <code>dst.dem.exists()</code> (voor en na)- <code>dst.dem.shape == [6962, 7686]</code>- <code>dst.landuse.sum() == 234612304.0</code> test_DAMO_HyDAMO_converter.py Unit \ud83d\udfe2 Getest Conversie van DAMO \u2192 HyDAMO (inclusief veldtypes en attributen) <code>schematisation_builder/DAMO.gpkg</code> <code>HyDAMO_*.gpkg</code> (gegenereerd in temp-dir) Test controleert of converter een HyDAMO-bestand genereert met extra kolommen (o.a. <code>NEN3610id</code>), juiste veldtypes en correcte domeinwaarden - <code>hydamo_file_path.exists()</code>- <code>\"NEN3610id\" in columns</code>- Domeinwaarden (code vs. beschrijving)- Datatypes (<code>float64</code> voor capaciteit) test_db_exporter.py Unit \ud83d\udfe2 Getest (mits DB beschikbaar) Export van DAMO/CSO-tabellen naar geopackage <code>schematisation_builder/area_test_sql_helsdeur.gpkg</code>, <code>model_test/01_source_data/polder_polygon.shp</code> <code>test_damo_gemaal_helsdeur.gpkg</code>, <code>test_export.gpkg</code> Test controleert of <code>db_exporter</code> tabellen en subtabel correct exporteert, inclusief domeinwaarden en foutafhandeling - <code>output_file.exists()</code>- <code>code == \"KGM-Q-29234\"</code>- <code>len(pomp_gdf) == 4</code>- Domeinomzetting (<code>functiegemaal</code>)- <code>logging_DAMO == []</code> test_flow_profiles.py End-to-end \ud83d\udfe0 Gedeeltelijk getest (skip bij Python &lt; 3.12) Volledige flow van profielverwerking: DAMO/CSO \u2192 intermediate \u2192 HyDAMO \u2192 validatie <code>schematisation_builder/raw_export.gpkg</code>, coverage-data (<code>schematisation_builder/dtm/index.shp</code>) <code>damo.gpkg</code>, <code>HyDAMO.gpkg</code>, validatie-output (<code>results.gpkg</code>, csv, geojson) Test controleert de volledige profielketen: laden, linemerge, profielcreatie en koppeling, berekening diepste punten, export naar HyDAMO en validatie met regels - Laagchecks: <code>hydroobject</code>, <code>peilgebiedpraktijk</code>- Profielpunt koppeling aan profiellijn- Profiellijn koppeling aan profielgroep- Profielgroep koppeling aan hydroobject- Diepste punten per profiellijn en hydroobject- Connectie hydroobjecten zonder profiel- HyDAMO export aanwezig- Validatieregels:\u00a0\u00a0100: <code>isascending</code>\u00a0\u00a0101: <code>hydroobject_breedte</code>\u00a0\u00a0102: <code>jaarinwinning</code>\u00a0\u00a0103: <code>max_cross_product</code>\u00a0\u00a0104: <code>afstandnatprofiel</code>\u00a0\u00a0105: <code>dieptenatprofiel</code>\u00a0\u00a0106: <code>nr_of_profielpunten</code>\u00a0\u00a0108: <code>maximalehoogteprofiel</code>\u00a0\u00a0109: <code>breedteprofiel</code> test_gemaalintermediateconverter.py Unit \ud83d\udfe2 Getest Conversie van gemaal- en pomplagen uit DAMO/CSO naar intermediate <code>schematisation_builder/raw_export.gpkg</code> <code>damo.gpkg</code> (met lagen <code>gemaal</code>, <code>pomp</code>) Test controleert of <code>GemaalIntermediateConverter</code> correcte lagen genereert met geldige relaties en unieke IDs - Output-bestand bestaat- <code>gemaal</code>-laag niet leeg- <code>pomp</code>-laag niet leeg- Kolom <code>globalid</code> aanwezig, niet null en uniek in beide lagen- Elke <code>pomp.gemaalid</code> verwijst naar bestaand <code>gemaal.globalid</code> test_HyDAMO_validator.py Unit \ud83d\udfe2 Getest (skip bij Python &lt; 3.12) Validatie van HyDAMO-bestand met regels en coverages <code>schematisation_builder/HyDAMO.gpkg</code>, coverage-data (<code>schematisation_builder/dtm/index.shp</code>) Validatie-output (<code>datasets/HyDAMO.gpkg</code>, <code>results.gpkg</code>, csv, geojson) Test controleert of <code>validate_hydamo</code> succesvol draait en valideerresultaten wegschrijft - <code>result_summary[\"success\"] == True</code>- Validatie-outputbestanden bestaan (<code>datasets/HyDAMO.gpkg</code>, <code>results.gpkg</code>)- Coverages worden meegenomen (AHN)- TODO\u2019s voor ontbrekende lagen (<code>brug</code>, <code>stuw</code>, <code>gemaal</code>, <code>pomp</code>) test_schematisation_builder.py End-to-end \ud83d\udfe0 Gedeeltelijk getest (skip bij Python &lt; 3.12 of zonder DB settings) Volledige flow: DAMO \u2192 HyDAMO \u2192 validatie <code>test_schematisation_builder/01_source_data/DAMO.gpkg</code> (gegenereerd in test) <code>HyDAMO.gpkg</code>, <code>log.log</code>, validatie-output (<code>results.gpkg</code>) Test controleert of <code>make_validated_hydamo_package</code> een compleet pakket aanmaakt en bestanden correct worden weggeschreven - <code>DAMO.gpkg</code> bestaat- <code>HyDAMO.gpkg</code> bestaat- <code>log.log</code> bestaat- Validatieresultaat <code>results.gpkg</code> bestaat test....py_ ... \ud83d\udd34 Niet getest ... .../....gpkg .../....gpkg ... ..."},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#testdata-en-integratie","title":"Testdata en integratie","text":"<p>De code van de tests staan in de hhnk-threedi-tools repo. </p> <p>De tests zijn ge\u00efntegreerd in de GitHub Actions van de <code>hhnk-threedi-tools</code> repository: - Alle tests draaien automatisch bij pull requests. - Mergen is alleen mogelijk wanneer alle tests slagen.  </p> <p>De tests zijn zoveel mogelijk gebaseerd op de testdataset van polderwatersysteem \u2019t Hoekje. Dit is een relatief klein en overzichtelijk gebied. De bestanden van de tests staan in de tests/data/schematisation_builder map. </p> <p>Op dit moment bevat de testdataset nog een groot deel van het watersysteem. Dit komt doordat: - nog niet alle tests zijn geschreven; - nog niet duidelijk is welke data wel of niet nodig is.  </p> <p>Wanneer de tests volledig zijn uitgewerkt, kan de dataset worden verkleind. Dit bespaart opslagruimte in de repository.</p> <p>Ontwikkeling gebeurt in VS Code met een Pixi-omgeving. Voor het installeren en het draaien van de tests kunnen de volgende stappen worden doorlopen: 1. Kloon de <code>hhnk-threedi-tools</code> repository. 2. Voer de volgende commando\u2019s uit:</p> <pre><code>    pixi install\n    pixi run postinstall\n</code></pre> <p>Dit zorgt voor:    - een lokale installatie van <code>hhnk-research-tools</code> en <code>HyDAMOValidatieModule</code>    - installatie van githooks die ruff-checks uitvoeren v\u00f3\u00f3r het pushen</p> <ol> <li>Start de Pixi-shell:</li> </ol> <pre><code>    pixi shell\n</code></pre> <p>Hiermee wordt de command prompt geopend met de juiste Python-omgeving. Voer de tests lokaal uit met Python 3.9:</p> <pre><code>    pixi run -e py39 tests\n</code></pre>"},{"location":"md_files/5_schematisation_builder/b_architectuur_code_tests/#ter-kennisgeving","title":"Ter kennisgeving","text":"<ul> <li>Migratie: vanaf juni 2025 wordt gewerkt aan de overstap naar Python 3.12.  </li> <li>Beperking: nog niet alle checks werken op 3.12.  </li> <li>Workaround: GitHub-checks draaien daarom nog op Python 3.9.</li> </ul>"},{"location":"md_files/5_schematisation_builder/c_validatieregels_aannames/","title":"Validatieregels &amp; aannames","text":"<p>Doel: Vastleggen van validatie- en verbeteringsregels met onderbouwing. Lezerspubliek: Ontwikkelaars &amp; hydrologen</p>"},{"location":"md_files/5_schematisation_builder/c_validatieregels_aannames/#1-validatieregels","title":"1. Validatieregels","text":"<p>De validatieregels zijn gedefineerd in een JSON-bestand in de resources map van de hhnk-threedi-tools, hier. Dit bestand is invoer voor de HyDAMOValidatieModule.</p> <p>Een tabel-overzicht (CSV-bestand) van de validatieregels staat hier. Dit is een, ter documentatie, gegeneerd overzicht (vanuit het JSON-bestand) met dit script. </p>"},{"location":"md_files/5_schematisation_builder/c_validatieregels_aannames/#2-verbeteringslogica","title":"2. Verbeteringslogica","text":"<p>Automatische en handmatige stappen inclusief aannames. Link naar excel overzicht in threedi-tools.</p>"},{"location":"md_files/5_schematisation_builder/d_data_locaties_bewegingen/","title":"Data locaties &amp; bewegingen","text":"<p>Doel: Uitleg over waar data wordt geexporteerd, opgeslagen en hoe data vervolgens beweegt. Lezerspubliek: Ontwikkelaars &amp; gegevensbeheerders</p>"},{"location":"md_files/5_schematisation_builder/d_data_locaties_bewegingen/#1-export","title":"1. Export","text":"<p>In de de <code>db_exporter</code> worden gegevens van drie bronnen gebruikt.  * DAMO  * CS Objecten * BGT (Basisregistratie Grootschalige topografie)</p> <p>Alle drie de bronnen zijn oracle databases die binnen HHNK draaien (zijn niet van buiten de HHNK omgeving beschikbaar). In DAMO en CS Objecten zitten objectdata die het waterschap beheerd. CS Objecten speelt een centrale rol in het Centraal Data Platform binnen HHNK. Objecten die als 'asset' gezien worden zitten hier in, denk aan stuwen en gemalen. Er is overlap met DAMO, maar in CS Objecten zit meer informatie. O.a. Hydro-object is een laag die (nog) niet in CS Objecten zit, maar alleen in DAMO. Voor de modelbuilder gebruiken we de waterdelen en ondersteunende waterdelen uit de BGT. </p> <p>De <code>db_exporter</code> haalt de benodigde lagen voor een gegeven gebied op uit de database (via config files in de resources) en slaat deze op in een geopackage. Dit is de bron voor de <code>IntermediateConverter</code> en de <code>HyDAMO-validator</code>.</p>"},{"location":"md_files/5_schematisation_builder/d_data_locaties_bewegingen/#2-datapaden","title":"2. Datapaden","text":"<p>Locaties van ruwe export, omgezet, gevalideerd, verbeterd, schematisatie.</p> <p>Dit is nu eigenlijk nog meer een ontwerp. Hier moeten we naartoe werken. Is mogelijk niet volledig en moet nog gereviewed worden.</p> <pre><code>{project_naam}\n\u251c\u2500\u2500 00_config\n\u2502   \u251c\u2500\u2500 00_Export\n\u2502       \u251c\u2500\u2500 databases.json\n\u2502   \u251c\u2500\u2500 03_HyDAMO_Validator\n\u2502       \u251c\u2500\u2500 validationrules.json\n\u2502   \u251c\u2500\u2500 04_HyDAMO_Fixer\n\u2502       \u251c\u2500\u2500 fixes.json\n\u2502   \u251c\u2500\u2500 05_3Di_Converter\n\u2502       \u251c\u2500\u2500 brug.json\n\u2502       \u251c\u2500\u2500 duiker.json\n\u2502       \u251c\u2500\u2500 gemaal.json\n\u2502       \u251c\u2500\u2500 hydroobject.json\n\u2502       \u251c\u2500\u2500 profiel.json\n\u2502       \u251c\u2500\u2500 stuw.json\n\u2502   \u2514\u2500\u2500 README.md\n\u251c\u2500\u2500 01_source_data\n\u2502   \u251c\u2500\u2500 00_Export\n\u2502       \u251c\u2500\u2500 raw_export.gpkg\n\u2502       \u251c\u2500\u2500 rasters\n\u2502           \u2514\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 01_Intermediate_Converter\n\u2502       \u251c\u2500\u2500 DAMO.gpkg\n\u2502   \u251c\u2500\u2500 02_HyDAMO\n\u2502       \u251c\u2500\u2500 HyDAMO.gpkg\n\u2502   \u251c\u2500\u2500 03_HyDAMO_Validator\n\u2502       \u251c\u2500\u2500 Set 1\n\u2502           \u251c\u2500\u2500 results.gpkg\n\u2502           \u251c\u2500\u2500 validation_result.json\n\u2502       \u251c\u2500\u2500 Set 2...\n\u2502   \u251c\u2500\u2500 04_HyDAMO_Fixer\n\u2502       \u251c\u2500\u2500 Set 1\n\u2502           \u251c\u2500\u2500 HyDAMO.gpkg\n\u2502           \u251c\u2500\u2500 fixer_result.json\n\u2502       \u251c\u2500\u2500 Set 2...\n\u2502   \u251c\u2500\u2500 05_3Di_Converter\n\u2502       \u251c\u2500\u2500 ??? komt hier wel iets terecht -&gt; schematisatie eindigt bij 02_schematisation\n\u2502   \u2514\u2500\u2500 polder.gpkg\n\u2502   \u2514\u2500\u2500 README.md\n\u251c\u2500\u2500 02_schematisation\n\u2502   \u2514\u2500\u2500 00_basis\n\u2502       \u2514\u2500\u2500 {project_naam}.gpkg\n\u2502       \u2514\u2500\u2500 rasters\n\u2502           \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 README.md\n\u251c\u2500\u2500 03_3di_results\n\u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 README.md\n\u2514\u2500\u2500 04_test_results\n\u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 README.md\n\u2514\u2500\u2500 log.log\n</code></pre>"},{"location":"md_files/5_schematisation_builder/d_data_locaties_bewegingen/#3-datastroom-bestand-en-opslag","title":"3. Datastroom (bestand- en opslag)","text":"<p>Hoe de uitvoer van elke stap de invoer voor de volgende vormt is weergegeven in onderstaande flowchart.</p> <p>```mermaid flowchart TD     %% Subgraphs voor overzicht     subgraph 00_config [00_config]         direction TB         DB[\"00_Export/databases.json\"]:::style_0         VR[\"03_HyDAMO_Validator/validationrules.json\"]:::style_0         FIXES[\"04_HyDAMO_Fixer/fixes.json\"]:::style_0         CONVERSION_CONFIGS[\"05_3Di_Converter/{}.json\"]:::style_0     end</p> <pre><code>DB ~~~ VR\nVR ~~~ FIXES\nFIXES ~~~ CONVERSION_CONFIGS\n\nsubgraph 01_source_data [01_source_data]\n    direction TB\n    POLDER[\"polder.gpkg\"]:::style_0\n    RAW_EXPORT[\"00_Export/raw_export.gpkg\"]:::style_A\n    INTERMEDIATE[\"01_Intermediate_Converter/DAMO.gpkg\"]:::style_B\n    HYDAMO[\"02_HyDAMO/HyDAMO.gpkg\"]:::style_C\n    VALIDATION_SET1[\"03_HyDAMO_Validator/set_1/results.gpkg\"]:::style_D\n    FIX_SET1[\"04_HyDAMO_Fixer/set_1/HyDAMO.gpkg\"]:::style_E\n    VALIDATION_SET2[\"03_HyDAMO_Validator/set_2/results.gpkg\"]:::style_D\n    FIX_SET2[\"04_HyDAMO_Fixer/set_2/HyDAMO.gpkg\"]:::style_E\nend\n\nsubgraph 02_schematisation [02_schematisation]\n    direction TB\n    SCHEMA[\"00_basis/{project_naam}.gpkg\"]:::style_F\nend\n\n%% Datastromen\nDB --&gt;|DatabaseExporter| RAW_EXPORT\nPOLDER --&gt;|DatabaseExporter| RAW_EXPORT\nRAW_EXPORT --&gt;|IntermediateConverter| INTERMEDIATE\nINTERMEDIATE --&gt;|DAMO2HyDAMOConverter| HYDAMO\nVR --&gt;|HyDAMOValidator| VALIDATION_SET1\nHYDAMO --&gt;|HyDAMOValidator| VALIDATION_SET1\nHYDAMO --&gt;|HyDAMOFixer| FIX_SET1\nFIXES --&gt;|HyDAMOFixer| FIX_SET1\nVALIDATION_SET1 --&gt;|HyDAMOFixer| FIX_SET1\nFIX_SET1 --&gt;|HyDAMOValidator| VALIDATION_SET2\nFIX_SET1 --&gt;|HyDAMOFixer| FIX_SET2\nVALIDATION_SET2 --&gt;|HyDAMOFixer| FIX_SET2\nCONVERSION_CONFIGS --&gt;|3DiConverter| SCHEMA\nFIX_SET2 --&gt;|3DiConverter| SCHEMA\n\n%% Gradient styling from A to F\nclassDef style_0 fill:#cccccc,stroke:#333,stroke-width:2px;\nclassDef style_A fill:#e0b3ff,stroke:#333,stroke-width:2px;\nclassDef style_B fill:#b3c6ff,stroke:#333,stroke-width:2px;\nclassDef style_C fill:#b3ffe0,stroke:#333,stroke-width:2px;\nclassDef style_D fill:#ffffb3,stroke:#333,stroke-width:2px;\nclassDef style_E fill:#ffd6b3,stroke:#333,stroke-width:2px;\nclassDef style_F fill:#ff4d4d,stroke:#333,stroke-width:2px;\n</code></pre>"},{"location":"md_files/installatie/installatie_handleiding/","title":"Installatie instructies","text":"<p>De HHNK Toolbox is te installeren in de volgende twee stappen:</p> <ol> <li>Installatie 3Di Modeller Interface (QGIS)</li> <li>Installatie HHNK Toolbox Plugin</li> <li>Datachecker en modelbuilder</li> <li>Python env</li> </ol> <p>Wanneer er tijdens de installatie zaken niet gaan zoals verwacht, kun je kijken bij bekende problemen.</p>"},{"location":"md_files/installatie/installatie_handleiding/#installatie-3di-modeller-interface-qgis","title":"Installatie 3Di Modeller Interface (QGIS)","text":""},{"location":"md_files/installatie/installatie_handleiding/#1-installatie-van-de-modeller-interface","title":"1. Installatie van de Modeller Interface","text":"<p>Download de MI versie die op de release pagina van de hhnk plugin staat.</p> <p>:warning: LET OP: deze versie kan afwijken van de versie die op de 3Di docs staat. :warning:</p> <p>Voor verdere installatie instructies kan je deze Installatie handleiding raadplegen. Voer de installatie van de Modeller Interface uit.</p> <p></p>"},{"location":"md_files/installatie/installatie_handleiding/#installatie-en-activatie-van-de-3di-toolbox-plugin","title":"Installatie en activatie van de 3Di Toolbox plugin","text":"<p> BvL: is dit nog van belang? Aangezien de Toolbox in de nieuwste versie van 3Di niet meer werkt. </p> <p>Bij het starten van de Modeller Interface wordt de 3Di Toolbox geinstalleerd:</p> <p> </p> <p>Na de installatie van de 3Di Toolbox moet je de Modeller Interface (zoals gevraagd) herstarten:</p> <p></p> <p>Kijk, na herstart, of de 3Di Toolbox goed is geinstalleerd en geactiveerd. Navigeer naar <code>plugins &gt; manage and install plugins</code>:</p> <p></p>"},{"location":"md_files/installatie/installatie_handleiding/#installatie-hhnk-toolbox-plugin","title":"Installatie HHNK Toolbox Plugin","text":"<p>Download de laatste <code>hhnk_threedi_plugin.zip</code> hier. </p> <p>Navigeer naar <code>plugins &gt; manage and install plugins</code>. In de Plugin Manager, klik op <code>install from ZIP</code></p> <p></p> <p>Selecteer de zip-file van de plugin en klik op <code>Install Plugin</code>. Negeer de security warning.</p> <p></p> <p>De plugin wordt nu geinstalleerd in de Modeller Interface, inclusief alle ontbrekende modules:</p> <p></p> <p>Na installatie moet je, zoals aangegeven, de Modeller Interface opnieuw starten:</p> <p></p> <p>Als alles goed is gegaan, is de plugin nu klaar voor gebruik:</p> <p></p> <p>Ga naar gebruik plugin om met de plugin aan de slag te gaan.</p>"},{"location":"md_files/installatie/installatie_handleiding/#bekende-problemen","title":"Bekende problemen","text":""},{"location":"md_files/installatie/installatie_handleiding/#_1","title":"Installatie instructies","text":"<p>Je kunt de plugin ook downloaden via de release-pagina op GitHub https://github.com/threedi/hhnk-threedi-plugin/releases/latest:</p> <p></p>"},{"location":"md_files/installatie/installatie_handleiding/#directe-installatie-in-plugin-folder","title":"Directe installatie in plugin-folder","text":"<p>Als de installatie via de plugin manager niet (soepel) verloopt, kun je de zip-file ook direct uitpakken in de plugin map. Deze staat in:</p> <p><code>c:\\Users\\{gebruiker}\\AppData\\Roaming\\3Di\\QGIS3\\profiles\\default\\python\\plugins\\</code> </p> <p><code>{gebruiker}</code> is de naam van de Windows-gebruiker waarbij de plugin ge\u00efnstalleerd is.</p> <p>N.B. Na het uitpakken van de zip-file moet je zorgen dat de plugin staat aangevinkt in de plugin-manager, en de installatie van de plugin verder wordt uitgevoerd zoals beschreven bij installatie.</p>"},{"location":"md_files/installatie/installatie_handleiding/#inconsistente-python-omgeving","title":"Inconsistente Python omgeving","text":"<p>De plugin is getest in een Python omgeving beschreven in deze Conda environment.yml. Het kan zijn dat de Python versie en/of modules ge\u00efnstalleerd in de Modeller Interface en 3Di Toolbox niet (meer) compatible zijn met de geteste versie van de HHNK Toolbox. Als dat zo is, krijg je bij start van de installatie de volgende melding:</p> <p></p> <p>Zolang de plugin werkt, kun je deze melding negeren/verhelpen, maar uiteindelijk zal de HHNK Toolbox plugin \u00e9\u00e9rst goed getest moeten worden in de gebruikte MI versie.</p>"},{"location":"md_files/installatie/installatie_handleiding/#datachecker-en-modelbuilder","title":"Datachecker en modelbuilder","text":"<p>In de HHNK omgeving draait de modelbuilder op de srv155 in <code>D:\\modelbuilder</code>. De code staat in de map code en komt van de repo: https://github.com/hhnk-git/hhnk-modelbuilder. Daarnaast gebruikt hij data van de <code>\\\\corp.hhnk.nl\\data\\Hydrologen_data</code> (vaste input, niet in github) en je eigen FME export in de map data/input. In de map data staan ook nog enkele kleinere input bestanden.</p> <p>Het draaien van de modelbuilder kan via visual studio, gebruik de python enviroment <code>threedipy</code> (zie phyton-env voor installatie). Start de visual code niet met de .bat waarmee deze vanuit de 3DI Modeller Interface op start, maar gewoon vanuit de snelkoppeling van windows. Met de volgende bestanden zijn de datachecker en modelbuilder te draaien. Pas voor de modelbuilder de naam en polder-id van je model aan.</p> <p><code>modelbuilder\\code\\datachecker\\datachecker_visual_studio.py</code></p> <p><code>modelbuilder\\code\\modelbuilder\\modelbuilder_visual_studio.py</code></p>"},{"location":"md_files/installatie/installatie_handleiding/#python-env","title":"Python env","text":"<p>Om te kunnen ontwikkelen afzonderlijk van QGIS is de python environment <code>threedipy</code> opgezet. Om dit te kunnen installeren is een installatie van Miniforge nodig. Anaconda Navigator werkt met conda ipv mamba en is daardoor erg traag met solven van environments. Zowel miniforge als Anaconda Navigator installeren wordt afgeraden ivm conflicten van paden. Bij HHNK gebruiken we <code>Miniforge-pypy3</code>.</p> <p>Installatie van de env gaat met de volgende stappen:</p> <ol> <li> <p>Kopieer  environment_services.yml naar <code>C:\\users\\%user%\\environment_services.yml</code></p> </li> <li> <p>Open Miniforge Prompt met admin rechten</p> </li> <li> <p><code>cd %homepath%</code></p> </li> <li> <p>Verwijderen bestaande env:\\     <code>mamba remove --name threedipy --all</code>\\     :warning: Let op dat <code>C:\\ProgramData\\miniforge-pypy3\\envs\\threedipy</code> ook echt weg is! Als er locks op zitten is, server herstarten. :warning:</p> </li> <li> <p>Nieuwe installatie:\\     <code>mamba env create -f environment_services.yml</code></p> </li> <li> <p>Of installatie bijwerken (als env hierna niet meer werkt, doe dan een verse installatie):\\     <code>mamba env update -f environment_services.yml</code></p> </li> <li> <p>Bij een nieuwe installatie van miniforge is het ook nodig om mod_spatialite te installeren. De foutmelding die je dan krijgt geeft aan wat je moet doen:     <code>Download mod_spatialite extension from http://www.gaia-gis.it/gaia-sins/windows-bin-amd64/     and place into anaconda installation C:\\ProgramData\\miniforge-pypy3\\mod_spatialite-5.0.1-win-amd64.</code>     hhnk-research-tools pakt hem dan verder op.</p> </li> </ol>"}]}